<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Viperals-svncheckins] r107 - in cms: branches/1.0alpha1 branches/1.0alpha1/admin branches/1.0alpha1/blocks branches/1.0alpha1/includes branches/1.0alpha1/includes/db branches/1.0alpha1/includes/display branches/1.0alpha1/includes/templates branches/1.0alpha1/includes/templates/installer branches/1.0alpha1/install branches/1.0alpha1/modules/Quick_Message branches/1.0alpha1/modules/articles branches/1.0alpha1/modules/articles/admin trunk trunk/admin trunk/blocks trunk/includes trunk/includes/db trunk/includes/display trunk/includes/templates trunk/install trunk/modules/Quick_Message trunk/modules/articles trunk/modules/articles/admin
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/viperals-svncheckins/2005-September/index.html" >
   <LINK REL="made" HREF="mailto:viperals-svncheckins%40lists.berlios.de?Subject=Re%3A%20%5BViperals-svncheckins%5D%20r107%20-%20in%20cms%3A%20branches/1.0alpha1%20branches/1.0alpha1/admin%20branches/1.0alpha1/blocks%20branches/1.0alpha1/includes%20branches/1.0alpha1/includes/db%20branches/1.0alpha1/includes/display%20branches/1.0alpha1/includes/templates%20branches/1.0alpha1/includes/templates/installer%20branches/1.0alpha1/install%20branches/1.0alpha1/modules/Quick_Message%20branches/1.0alpha1/modules/articles%20branches/1.0alpha1/modules/articles/admin%20trunk%20trunk/admin%20trunk/blocks%20trunk/includes%20trunk/includes/db%20trunk/includes/display%20trunk/includes/templates%20trunk/install%20trunk/modules/Quick_Message%20trunk/modules/articles%20trunk/modules/articles/admin&In-Reply-To=%3C200509101440.j8AEeYWn000905%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000027.html">
   <LINK REL="Next"  HREF="000029.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Viperals-svncheckins] r107 - in cms: branches/1.0alpha1 branches/1.0alpha1/admin branches/1.0alpha1/blocks branches/1.0alpha1/includes branches/1.0alpha1/includes/db branches/1.0alpha1/includes/display branches/1.0alpha1/includes/templates branches/1.0alpha1/includes/templates/installer branches/1.0alpha1/install branches/1.0alpha1/modules/Quick_Message branches/1.0alpha1/modules/articles branches/1.0alpha1/modules/articles/admin trunk trunk/admin trunk/blocks trunk/includes trunk/includes/db trunk/includes/display trunk/includes/templates trunk/install trunk/modules/Quick_Message trunk/modules/articles trunk/modules/articles/admin</H1>
    <B>Ryan Marshall at BerliOS</B> 
    <A HREF="mailto:viperals-svncheckins%40lists.berlios.de?Subject=Re%3A%20%5BViperals-svncheckins%5D%20r107%20-%20in%20cms%3A%20branches/1.0alpha1%20branches/1.0alpha1/admin%20branches/1.0alpha1/blocks%20branches/1.0alpha1/includes%20branches/1.0alpha1/includes/db%20branches/1.0alpha1/includes/display%20branches/1.0alpha1/includes/templates%20branches/1.0alpha1/includes/templates/installer%20branches/1.0alpha1/install%20branches/1.0alpha1/modules/Quick_Message%20branches/1.0alpha1/modules/articles%20branches/1.0alpha1/modules/articles/admin%20trunk%20trunk/admin%20trunk/blocks%20trunk/includes%20trunk/includes/db%20trunk/includes/display%20trunk/includes/templates%20trunk/install%20trunk/modules/Quick_Message%20trunk/modules/articles%20trunk/modules/articles/admin&In-Reply-To=%3C200509101440.j8AEeYWn000905%40sheep.berlios.de%3E"
       TITLE="[Viperals-svncheckins] r107 - in cms: branches/1.0alpha1 branches/1.0alpha1/admin branches/1.0alpha1/blocks branches/1.0alpha1/includes branches/1.0alpha1/includes/db branches/1.0alpha1/includes/display branches/1.0alpha1/includes/templates branches/1.0alpha1/includes/templates/installer branches/1.0alpha1/install branches/1.0alpha1/modules/Quick_Message branches/1.0alpha1/modules/articles branches/1.0alpha1/modules/articles/admin trunk trunk/admin trunk/blocks trunk/includes trunk/includes/db trunk/includes/display trunk/includes/templates trunk/install trunk/modules/Quick_Message trunk/modules/articles trunk/modules/articles/admin">viperal at berlios.de
       </A><BR>
    <I>Sat Sep 10 16:40:34 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000027.html">[Viperals-svncheckins] r106 - in cms/trunk: includes/templates includes/templates/installer install
</A></li>
        <LI>Next message: <A HREF="000029.html">[Viperals-svncheckins] r108 - in cms/branches/1.0alpha1: . images images/avatars images/avatars/gallery images/avatars/gallery/gallery1 images/avatars/gallery/gallery2 includes includes/db includes/display includes/forums install javascript modules/Forums modules/Forums/admin themes/viperal/style themes/viperal/template/modules themes/viperal/template/modules/Forums themes/viperal/template/modules/Forums/images themes/viperal/template/modules/Forums/images/en themes/viperal/template/modules/Forums/images/karma
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28">[ date ]</a>
              <a href="thread.html#28">[ thread ]</a>
              <a href="subject.html#28">[ subject ]</a>
              <a href="author.html#28">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: viperal
Date: 2005-09-10 16:40:33 +0200 (Sat, 10 Sep 2005)
New Revision: 107

Added:
   cms/branches/1.0alpha1/includes/templates/installer/
   cms/branches/1.0alpha1/includes/templates/installer/agreement.html
   cms/branches/1.0alpha1/includes/templates/installer/complete.html
   cms/branches/1.0alpha1/includes/templates/installer/stage1.html
   cms/branches/1.0alpha1/includes/templates/installer/stage2.html
Removed:
   cms/branches/1.0alpha1/includes/db/mssql.php
Modified:
   cms/branches/1.0alpha1/admin/blocks.php
   cms/branches/1.0alpha1/admin/menu.php
   cms/branches/1.0alpha1/admin/messages.php
   cms/branches/1.0alpha1/blocks/block-Quick_Message.php
   cms/branches/1.0alpha1/config.php
   cms/branches/1.0alpha1/core.php
   cms/branches/1.0alpha1/error.php
   cms/branches/1.0alpha1/includes/db/mysql.php
   cms/branches/1.0alpha1/includes/db/mysql3.php
   cms/branches/1.0alpha1/includes/db/mysqli.php
   cms/branches/1.0alpha1/includes/db/postgres.php
   cms/branches/1.0alpha1/includes/db/sqlite.php
   cms/branches/1.0alpha1/includes/display/display.php
   cms/branches/1.0alpha1/includes/functions.php
   cms/branches/1.0alpha1/includes/tables.php
   cms/branches/1.0alpha1/includes/templates/login_admin.html
   cms/branches/1.0alpha1/install/build_data.php
   cms/branches/1.0alpha1/install/build_tables.php
   cms/branches/1.0alpha1/install/installer.php
   cms/branches/1.0alpha1/modules/Quick_Message/index.php
   cms/branches/1.0alpha1/modules/Quick_Message/install.php
   cms/branches/1.0alpha1/modules/articles/admin/index.php
   cms/branches/1.0alpha1/modules/articles/index.php
   cms/branches/1.0alpha1/modules/articles/install.php
   cms/trunk/admin/blocks.php
   cms/trunk/admin/menu.php
   cms/trunk/admin/messages.php
   cms/trunk/blocks/block-Quick_Message.php
   cms/trunk/config.php
   cms/trunk/core.php
   cms/trunk/error.php
   cms/trunk/includes/db/mysql.php
   cms/trunk/includes/db/mysql3.php
   cms/trunk/includes/db/mysqli.php
   cms/trunk/includes/db/postgres.php
   cms/trunk/includes/db/sqlite.php
   cms/trunk/includes/display/display.php
   cms/trunk/includes/display/template.php
   cms/trunk/includes/functions.php
   cms/trunk/includes/tables.php
   cms/trunk/includes/templates/login_admin.html
   cms/trunk/install/build_data.php
   cms/trunk/install/build_tables.php
   cms/trunk/install/installer.php
   cms/trunk/modules/Quick_Message/index.php
   cms/trunk/modules/Quick_Message/install.php
   cms/trunk/modules/articles/admin/index.php
   cms/trunk/modules/articles/index.php
   cms/trunk/modules/articles/install.php
Log:
Completed installer
Updated everything else.


Modified: cms/branches/1.0alpha1/admin/blocks.php
===================================================================
--- cms/branches/1.0alpha1/admin/blocks.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/admin/blocks.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -143,7 +143,7 @@
 			'TITLE'			=&gt; $block['block_title'],
 			'TYPE'			=&gt; $_CLASS['core_user']-&gt;get_lang('TYPE_'.$block['block_type']),
 
-			'EXPIRES'		=&gt; ($block['block_expires'] &gt; $_CLASS['core_user']-&gt;time) ? $_CLASS['core_user']-&gt;format_date($block['block_expires']) : false,
+			'EXPIRES'		=&gt; ($block['block_expires']) ? $_CLASS['core_user']-&gt;format_date($block['block_expires']) : false,
 			'STARTS'		=&gt; ($block['block_starts'] &gt; $_CLASS['core_user']-&gt;time) ? $_CLASS['core_user']-&gt;format_date($block['block_starts']) : false,
 
 			'ORDER_DOWN' 	=&gt; ($block['block_order'] &lt; $weigth[$block['block_position']]),

Modified: cms/branches/1.0alpha1/admin/menu.php
===================================================================
--- cms/branches/1.0alpha1/admin/menu.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/admin/menu.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -42,6 +42,7 @@
 $menu['modules'][] = array('lang' =&gt; $_CLASS['core_user']-&gt;get_lang('MODULES'), 'link' =&gt; generate_link('modules', array('admin' =&gt; true)));
 $menu['modules'][] = array('lang' =&gt; $_CLASS['core_user']-&gt;get_lang('MANAGE'), 'link' =&gt; generate_link('modules', array('admin' =&gt; true)));
 $menu['modules'][] = '';
+$menu['modules'][] = array('lang' =&gt; $_CLASS['core_user']-&gt;get_lang('ARTICLES'), 'link' =&gt; generate_link('articles', array('admin' =&gt; true)));
 
 $menu['forums'][] = array('lang' =&gt; $_CLASS['core_user']-&gt;get_lang('FORUMS'), 'link' =&gt; generate_link('Forums', array('admin' =&gt; true)));
 $menu['forums'][] = array('lang' =&gt; $_CLASS['core_user']-&gt;get_lang('ADMIN_INDEX'), 'link' =&gt; generate_link('Forums', array('admin' =&gt; true)));

Modified: cms/branches/1.0alpha1/admin/messages.php
===================================================================
--- cms/branches/1.0alpha1/admin/messages.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/admin/messages.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -118,7 +118,7 @@
 		'EDIT_LINK'		=&gt; generate_link('messages&amp;mode=edit&amp;id='.$row['block_id'], array('admin' =&gt; true)),
 		'DELETE_LINK' 	=&gt; generate_link('messages&amp;mode=delete&amp;id='.$row['block_id'], array('admin' =&gt; true)),
 
-		'EXPIRES'		=&gt; ($row['block_expires'] &gt; $_CLASS['core_user']-&gt;time) ? $_CLASS['core_user']-&gt;format_date($row['block_expires']) : false,
+		'EXPIRES'		=&gt; ($row['block_expires']) ? $_CLASS['core_user']-&gt;format_date($row['block_expires']) : false,
 		'STARTS'		=&gt; ($row['block_starts'] &gt; $_CLASS['core_user']-&gt;time) ? $_CLASS['core_user']-&gt;format_date($row['block_starts']) : false,
 		'TITLE'			=&gt; $row['block_title'],
 

Modified: cms/branches/1.0alpha1/blocks/block-Quick_Message.php
===================================================================
--- cms/branches/1.0alpha1/blocks/block-Quick_Message.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/blocks/block-Quick_Message.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -26,9 +26,11 @@
     die;
 }
 
+global $table_prefix;
+
 if (!defined('QUICK_MESSAGE_TABLE'))
 {
-	define('QUICK_MESSAGE_TABLE', 'test_quick_message');
+	define('QUICK_MESSAGE_TABLE', $table_prefix.'quick_message');
 }
 
 global $prefix, $_CLASS, $_CORE_CONFIG;

Modified: cms/branches/1.0alpha1/config.php
===================================================================
--- cms/branches/1.0alpha1/config.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/config.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -1,101 +0,0 @@
-&lt;?php
-/*
-||**************************************************************||
-||  Viperal CMS &#169; :												||
-||**************************************************************||
-||																||
-||	Copyright (C) 2004, 2005									||
-||  By Ryan Marshall ( Viperal )								||
-||																||
-||  Email: <A HREF="https://lists.berlios.de/mailman/listinfo/viperals-svncheckins">viperal1 at gmail.com</A>									||
-||  Site: <A HREF="http://www.viperal.com">http://www.viperal.com</A>								||
-||																||
-||**************************************************************||
-||	LICENSE: ( <A HREF="http://www.gnu.org/licenses/gpl.txt">http://www.gnu.org/licenses/gpl.txt</A> )			||
-||**************************************************************||
-||  Viperal CMS is released under the terms and conditions		||
-||  of the GNU General Public License version 2					||
-||																||
-||**************************************************************||
-
-$Id$
-*/
-
-// TEMP
-
-// do not modify!
-if (!defined('VIPERAL'))
-{
-    die;
-}
-
-//echo getenv('DOCUMENT_ROOT'); die;
-/*
-If (getenv('DOCUMENT_ROOT') != 'C:/Program Files/Apache Group/Apache2/htdocs')
-{
-    die('Your site shouldn\'t access this file');
-}
-*/
-
-$prefix = 'test_';
-$user_prefix = 'test_';
-
-/*
-$site_db['type']		= 'mysql';
-$site_db['server']		= '';
-$site_db['port']		= '';
-$site_db['database']	= 'cms';
-$site_db['username']	= 'root';
-$site_db['password']	= '';
-$site_db['persistent']	= false;
-*/
-
-
-$site_db['type']		= 'postgres';
-$site_db['server']		= '';
-$site_db['port']		= '';
-$site_db['database']	= 'cms';
-$site_db['username']	= 'postgres';
-$site_db['password']	= 'viper83';
-$site_db['persistent']	= false;
-
-
-/*
-$site_db['type']	= 'sqlite';
-$site_db['file']	= 'C:\Program Files\Apache Group\Apache2\tester';
-$site_db['persistent']	= false;
-*/
-
-/*
-$site_db['type']	= 'sqlite_pdo';
-$site_db['file']	= 'C:\Program Files\Apache Group\Apache2\tester_pdo';
-$site_db['persistent']	= false;
-
-*/
-
-/*
-NOT WORKING
-
-$site_db['type']		= 'mssql';
-$site_db['server']		= '';
-$site_db['port']		= '';
-$site_db['database']	= 'tester';
-$site_db['username']	= '';
-$site_db['password']	= '';
-$site_db['persistent']	= false;
-*/
-
-//$acm_type = 'eaccelerator';
-$acm_type = 'file';
-
-if (!defined('INDEX_PAGE'))
-{
-	define('INDEX_PAGE', 'index.php');
-}
-
-if (!defined('ADMIN_PAGE'))
-{
-	define('ADMIN_PAGE', 'admin.php');
-}
-
-?&gt;
\ No newline at end of file

Modified: cms/branches/1.0alpha1/core.php
===================================================================
--- cms/branches/1.0alpha1/core.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/core.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -26,7 +26,7 @@
     die;
 }
 
-error_reporting(E_ALL);
+error_reporting(0);
 //error_reporting(0);
 
 if (!extension_loaded('mbstring'))
@@ -38,7 +38,6 @@
 mb_internal_encoding('UTF-8');
 //mb_http_output('UTF-8');
 
-
 // Remove registered globals
 if ((bool) ini_get('register_globals'))
 {
@@ -82,7 +81,7 @@
 
 // Set error handler
 $_CLASS['core_error_handler']-&gt;start();
-$_CLASS['core_error_handler']-&gt;stop();
+//$_CLASS['core_error_handler']-&gt;stop();
 //error_reporting(E_ERROR | E_WARNING | E_PARSE);
 
 if (function_exists('register_shutdown_function'))
@@ -93,26 +92,6 @@
 $_CLASS['core_db']-&gt;connect($site_db);
 unset($sitedb);
 
-/*
-$_CLASS['core_db']-&gt;transaction();
-require($site_file_root.'install/build_tables.php');
-$_CLASS['core_db']-&gt;transaction('commit');
-die;
-*/
-
-
-/*
-$_CLASS['core_db']-&gt;transaction();
-require($site_file_root.'install/build_data.php');
-$_CLASS['core_db']-&gt;transaction('commit');
-die;
-*/
-
-/*
-	Progres need to be optimized after install :-(
-	$_CLASS['core_db']-&gt;optimize_tables();
-*/
-
 $_CLASS['core_db']-&gt;return_on_error = true;
 
 // Error messages just incase we can't get our configs

Modified: cms/branches/1.0alpha1/error.php
===================================================================
--- cms/branches/1.0alpha1/error.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/error.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -22,7 +22,7 @@
 }
 
 //echo str_replace('\\','/', getenv('DOCUMENT_ROOT')); die;
-$site_file_root = 'C:/apachefriends/xampp/cms/';
+$site_file_root = '';
 $lang = 'en';
 
 if (isset($_SERVER['HTTP_ACCEPT_LANGUAGE']))

Deleted: cms/branches/1.0alpha1/includes/db/mssql.php
===================================================================
--- cms/branches/1.0alpha1/includes/db/mssql.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/db/mssql.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -1,693 +0,0 @@
-&lt;?php
-/*
-||**************************************************************||
-||  Viperal CMS &#169; :												||
-||**************************************************************||
-||																||
-||	Copyright (C) 2004, 2005									||
-||  By Ryan Marshall ( Viperal )								||
-||																||
-||  Email: <A HREF="https://lists.berlios.de/mailman/listinfo/viperals-svncheckins">viperal1 at gmail.com</A>									||
-||  Site: <A HREF="http://www.viperal.com">http://www.viperal.com</A>								||
-||																||
-||**************************************************************||
-||	LICENSE: ( <A HREF="http://www.gnu.org/licenses/gpl.txt">http://www.gnu.org/licenses/gpl.txt</A> )			||
-||**************************************************************||
-||  Viperal CMS is released under the terms and conditions		||
-||  of the GNU General Public License version 2					||
-||																||
-||**************************************************************||
-
-$Id$
-*/
-
-class db_mssql
-{
-	var $link_identifier = false;
-	var $db_layer = 'mssql';
-
-	var $last_result;
-	var $return_on_error;
-	var $in_transaction;
-
-	var $queries_time = 0;
-	var $num_queries = 0;
-
-	var	$query_list = array();
-	var $query_details = array();
-	var $open_queries = array();
-
-	var $_indexs = array();
-	var $_fields = array();
-	var $_table_name = false;
-	
-	var $_limit_last_key = 0;
-	var $_limit_result = array();
-
-	function connect($db)
-	{		
-		if ($db['port'])
-		{
-			$db['server'] .= ':' . $port;
-		}
-
-		if ($this-&gt;link_identifier)
-		{
-			$this-&gt;disconnect();
-		}
-
-		$this-&gt;link_identifier = ($db['persistent']) ? mssql_pconnect($db['server'], $db['username'], $db['password']) : mssql_connect($db['server'], $db['username'], $db['password']);
-
-		if ($this-&gt;link_identifier)
-		{
-			if (mssql_select_db($db['database']))
-			{
-				return $this-&gt;link_identifier;
-			}
-
-			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB2&lt;/center&gt;';
-		}
-
-		if (!$error)
-		{
-			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB1&lt;/center&gt;';
-		}
-
-		$this-&gt;disconnect();
-
-		trigger_error($error, E_USER_ERROR);
-	}
-
-	function disconnect()
-	{
-		if (!$this-&gt;link_identifier)
-		{
-			return;
-		}
-
-		@mssql_close($this-&gt;link_identifier);
-		$this-&gt;link_identifier = false;
-	}
-
-	function sql_return_on_error($fail = false)
-	{
-		$this-&gt;return_on_error = $fail;
-	}
-
-	function transaction($option = 'start')
-	{
-		if (!$this-&gt;link_identifier)
-		{
-			return;
-		}
-
-		$result = false;
-
-		switch ($option)
-		{
-			case 'start':
-				if ($this-&gt;in_transaction)
-				{
-					break;
-				}
-
-				$result = mysql_query('BEGIN  TRANSACTION', $this-&gt;link_identifier);
-				$this-&gt;in_transaction = true;
-			break;
-
-			case 'commit':
-			
-				if (!$this-&gt;in_transaction)
-				{
-					break;
-				}
-
-				$result = mysql_query('COMMIT', $this-&gt;link_identifier);
-				
-				if (!$result)
-				{
-					mysql_query('ROLLBACK', $this-&gt;link_identifier);
-				}
-				
-				$this-&gt;in_transaction = false;
-			break;
-
-			case 'rollback':
-				if (!$this-&gt;in_transaction)
-				{
-					break;
-				}
-
-				$result = mysql_query('ROLLBACK', $this-&gt;link_identifier);
-				$this-&gt;in_transaction = false;
-			break;
-		}
-
-		return $result;
-	}
-
-	function query($query = false,  $backtrace = false)
-	{
-		if (!$query || !$this-&gt;link_identifier) 
-		{ 
-			return false; 
-		}
-
-		global $_CLASS, $site_file_root;
-			
-		$this-&gt;num_queries++;
-		$this-&gt;last_query = $query;
-
-		if (!$backtrace)
-		{
-			$debug_backtrace = debug_backtrace();
-			$backtrace = array();
-			// remove the root directorys
-			$backtrace['file'] = str_replace('\\','/', $debug_backtrace[0]['file']);
-			$backtrace['file'] = str_replace($site_file_root, '', str_replace($_SERVER['DOCUMENT_ROOT'],'', $backtrace['file']));
-
-			$backtrace['line'] = $debug_backtrace[0]['line'];
-		}
-
-		$this-&gt;_debug('start', $backtrace);
-		$this-&gt;last_result = $this-&gt;sql_query($query);
-		$this-&gt;_debug('stop', $backtrace);
-
-		if ($this-&gt;last_result === false)
-		{
-			$this-&gt;_error($query, $backtrace);
-		}
-		elseif (strpos($query, 'SELECT') !== false)
-		{
-			$this-&gt;open_queries[(int) $this-&gt;last_result] = $this-&gt;last_result;
-		}
-
-		return $this-&gt;last_result;
-	}
-
-	function sql_query($query = false)
-	{
-		return mssql_query($query, $this-&gt;link_identifier);
-	}
-
-	function query_limit($query = false, $total = false, $offset = 0, $backtrace = false) 
-	{
-		if (!$query || !$total || !$this-&gt;link_identifier) 
-		{
-			// no need to check for query or link_id, it's checked in db::query()
-			return $this-&gt;query($query);; 
-		}
-
-		global $site_file_root;
-
-		if (!$backtrace)
-		{
-			$debug_backtrace = debug_backtrace();
-			$backtrace = array();
-			// remove the root directorys
-			$backtrace['file'] = str_replace('\\','/', $debug_backtrace[0]['file']);
-			$backtrace['file'] = str_replace($site_file_root, '', str_replace($_SERVER['DOCUMENT_ROOT'],'', $backtrace['file']));
-
-			$backtrace['line'] = $debug_backtrace[0]['line'];
-		}
-
-		$query = substr(trim($query));
-		
-		if (!$offset)
-		{
-			return $this-&gt;query(&quot;SELECT TOP($total) $query&quot;);
-		}
-		
-		/*
-			Welcome to hell
-
-			We'll do two query and get the diffence in php to make sure things work right
-			Other why needs us to know the a unique feild/key or primary key
-		*/
-		
-		// here we go, get the all data up to the offset row. offset row = total need + offset
-		$result = $this-&gt;query('SELECT TOP('.$total + $offset.&quot;) $query&quot;);
-
-		// need to test dataseek, if it resets after the a fetch do mssql_next_result loop
-		if (!$result || !mssql_data_seek($offset))
-		{
-			$this-&gt;free_result($result);
-
-			return false;
-		}
-
-		/*
-			change mssql_data_seek to mssql_num_rows &lt; $offset above if this is used
-			for ($i = 1; $i &lt;= $offset; $i++)
-			{
-				mssql_next_result($result);
-			}
-		*/
-
-		// we fetch array so both assoc and num can be used, May change later on
-
-		$this-&gt;_limit_last_key ++;
-		$result_id = 'LIMIT_'.$this-&gt;_limit_last_key;
-		
-		while ($row = mssql_fetch_array($result))
-		{
-			$this-&gt;_limit_result[$result_id][] = $row;
-		}
-
-		return $result_id;
-	}
-
-	/*
-		Boy do I like this but it phpBB's, may have to do something similar
-	*/
-	function sql_build_array($query, $assoc_ary = false)
-	{
-		if (!is_array($assoc_ary))
-		{
-			return false;
-		}
-
-		$fields = array();
-		$values = array();
-
-		if ($query == 'INSERT')
-		{
-			foreach ($assoc_ary as $key =&gt; $var)
-			{
-				$fields[] = $key;
-
-				if (is_null($var))
-				{
-					$values[] = 'NULL';
-				}
-				elseif (is_string($var))
-				{
-					$values[] = &quot;'&quot; . $this-&gt;escape($var) . &quot;'&quot;;
-				}
-				else
-				{
-					$values[] = (is_bool($var)) ? intval($var) : $var;
-				}
-			}
-
-			$query = ' (' . implode(', ', $fields) . ') VALUES (' . implode(', ', $values) . ')';
-		}
-		else if ($query == 'UPDATE' || $query == 'SELECT')
-		{
-			$values = array();
-			foreach ($assoc_ary as $key =&gt; $var)
-			{
-				if (is_null($var))
-				{
-					$values[] = &quot;$key = NULL&quot;;
-				}
-				elseif (is_string($var))
-				{
-					$values[] = &quot;$key = '&quot; . $this-&gt;escape($var) . &quot;'&quot;;
-				}
-				else
-				{
-					$values[] = (is_bool($var)) ? &quot;$key = &quot; . intval($var) : &quot;$key = $var&quot;;
-				}
-			}
-			$query = implode(($query == 'UPDATE') ? ', ' : ' AND ', $values);
-		}
-
-		return $query;
-	}
-
-	function num_rows($result = false)
-	{
-		if (!$result || !$this-&gt;link_identifier) 
-		{ 
-			return 0; 
-		}
-
-		if (strpos($result, 'LIMIT_') === 0)
-		{
-			return (empty($this-&gt;_limit_result[$result]) ? 0 : count($this-&gt;_limit_result[$result]));
-		}
-
-		return mssql_num_rows($result);
-	}
-
-	function affected_rows()
-	{
-		if (!$this-&gt;link_identifier)
-		{ 
-			return 0; 
-		}
-
-		$num = mssql_rows_affected($this-&gt;link_identifier);
-
-		// not sure what it returns one fail, test maybe ?
-		return (!$num || $num == -1) ? 0 : $num;
-	}
-
-	function fetch_row_assoc($result = false)
-	{
-		global $_CLASS;
-
-		if (!$result || !$this-&gt;link_identifier)
-		{
-			return false;
-		}
-
-		if (strpos($result, 'LIMIT_') === 0)
-		{
-			if (empty($this-&gt;_limit_result[$result]) || !($value = each($this-&gt;_limit_result[$result])))
-			{
-				return false;
-			}
-			return $value['value'];
-		}
-
-		return @mssql_fetch_assoc($result);
-	}
-
-	function fetch_row_num($result = false)
-	{
-		if (!$result || !$this-&gt;link_identifier)
-		{
-			return false;
-		}
-
-		if (strpos($result, 'LIMIT_') === 0)
-		{
-			if (empty($this-&gt;_limit_result[$result]) || !($value = each($this-&gt;_limit_result[$result])))
-			{
-				return false;
-			}
-			return $value['value'];
-		}
-
-		return @mssql_fetch_row($result);
-	}
-
-	function fetch_row_both($result = false)
-	{
-		if (!$result || !$this-&gt;link_identifier)
-		{
-			return false;
-		}
-
-		if (strpos($result, 'LIMIT_') === 0)
-		{
-			if (empty($this-&gt;_limit_result[$result]) || !($value = each($this-&gt;_limit_result[$result])))
-			{
-				return false;
-			}
-			return $value['value'];
-		}
-
-		return @mssql_fetch_array($result);
-	}
-	
-	function insert_id()
-	{
-		if (!$this-&gt;link_identifier)
-		{
-			return false;
-		}
-		
-		//@@IDENTITY
-		if ($result = mssql_query('SELECT SCOPE_IDENTITY() AS Identity', $this-&gt;db_connect_id))
-		{
-			$row = mssql_fetch_assoc($result);
-			mssql_free_result($result);
-		}
-
-		return (isset($row['Identity']) &amp;&amp; !is_null($row['Identity'])) ? $row['Identity'] : false;
-	}
-
-	function free_result($result = false)
-	{
-		if ($result &amp;&amp; strpos($result, 'LIMIT_') === 0)
-		{
-			if (isset($this-&gt;_limit_result[$result]))
-			{
-				unset($this-&gt;_limit_result[$result]);
-			}
-			return;
-		}
-
-		if (!$result || !isset($this-&gt;open_queries[(int) $result]) || !$this-&gt;link_identifier) 
-		{ 
-			return; 
-		}
-
-		unset($this-&gt;open_queries[(int) $result]);
-
-		@mssql_free_result($result);
-	}
-
-	function escape($text)
-	{
-		return str_replace(&quot;'&quot;, &quot;''&quot;, str_replace('\\', '\\\\', $text));
-	}
-
-	function escape_array($value)
-	{
-		return preg_replace('#(.*?)#e', &quot;\$this-&gt;escape('\\1')&quot;, $value);
-	}
-		
-	function optimize_tables()
-	{
-
-	}
-
-	function version()
-	{
-		//add later, more important things to do
-		//@@VERSION
-	}
-
-	function _error($sql = '', $backtrace)
-	{
-		if ($this-&gt;return_on_error)
-		{
-			return;
-		}
-
-		// should we use the long error getting why ?
-		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mssql_get_last_message() . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($sql) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $sql : '') . '&lt;br /&gt;';
-
-		if ($this-&gt;in_transaction)
-		{
-			$this-&gt;transaction('rollback');
-		}
-		
-		trigger_error($message, E_USER_ERROR);
-	}
-
-	function _debug($mode, $backtrace)
-	{
-		global $_CLASS, $_CORE_CONFIG;
-		static $start_time;
-
-		if (!$this-&gt;link_identifier) 
-		{ 
-			return false; 
-		}
-
-		switch ($mode)
-		{
-			case 'start':
-				$this-&gt;query_details[$this-&gt;num_queries][] = '';
-
-				$start_time = explode(' ', microtime());
-				$start_time = $start_time[0] + $start_time[1];
-			break;
-
-			case 'stop':
-				global $site_file_root;
-
-				$end_time = explode(' ', microtime());
-				$end_time = $end_time[0] + $end_time[1];
-				$this-&gt;queries_time += $end_time - $start_time;
-
-				if (empty($_CORE_CONFIG['global']['error']) || $_CORE_CONFIG['global']['error'] == ERROR_DEBUGGER)
-				{
-					if ($this-&gt;last_result !== false)
-					{
-						$affected = false;
-
-						if (preg_match('/^(UPDATE|DELETE|REPLACE)/', $this-&gt;last_query))
-						{
-							$affected = $this-&gt;affected_rows($this-&gt;last_result);
-						}
-						
-						$this-&gt;query_list[$this-&gt;num_queries] = array('query' =&gt; $this-&gt;last_query, 'file' =&gt; $backtrace['file'], 'line'=&gt; $backtrace['line'], 'affected' =&gt; $affected, 'time' =&gt; ($end_time - $start_time));
-					}
-					else
-					{
-						// should we use the long error getting why ?
-						$this-&gt;query_list[$this-&gt;num_queries] = array('query' =&gt; $this-&gt;last_query, 'file' =&gt; $backtrace['file'], 'line'=&gt; $backtrace['line'], 'error'=&gt; 1, 'errorcode' =&gt; mssql_get_last_message());
-					}
-				}
-			break;
-		}
-	}
-
-	/*
-		Table creation
-	*/
-	function table_create($option, $name = false)
-	{
-		switch ($option)
-		{
-			case 'start':
-				$this-&gt;_table_name = $name;
-				$this-&gt;_fields = $this-&gt;_indexs = array();
-			break;
-
-			case 'commit':
-			case 'return':
-				if (!$this-&gt;_table_name)
-				{
-					return;
-				}
-
-				$fields = implode(&quot;, \n&quot;, $this-&gt;_fields);
-				if ($indexs = implode(&quot;, \n&quot;, $this-&gt;_indexs))
-				{
-					$fields .= &quot;, \n&quot;;
-				}
-				
-				//#MyTempTable -- local temp tables
-				//##MyTempTable -- Global temp tables
-
-				$table = 'CREATE TABLE ['.$this-&gt;_table_name.&quot;] ( \n&quot; .$fields. $indexs .&quot; \n ) ENGINE=InnoDB;&quot;;
-				// Let users choose transaction safe InnoDB or MyISAM
-				// ENGINE=MyISAM
-				if ($option == 'return')
-				{
-					return $table;
-				}
-
-				$this-&gt;sql_query($table);
-
-			case 'cancel':
-				$this-&gt;_table_name = false;
-				$this-&gt;_fields = $this-&gt;_indexs = array();
-			break;
-		}
-	}
-
-//$name, $number_min, $number_max = false, $default = 0, $auto_increment = false
-	function add_table_field_int($name, $setting_sent)
-	{
-		$setting = array('default' =&gt; 0, 'min' =&gt; 0, 'max' =&gt; 0, 'auto_increment' =&gt; false, 'null' =&gt; false);
-		$setting = array_merge($setting, $setting_sent);
-
-		$length = max(strlen($setting['min']), strlen($setting['max']));
-
-		if ($setting['min'] &gt;= -0 &amp;&amp; $setting['max'] &lt;= 255)
-		{
-			// TINYINT UNSIGNED ( 0 to 255 )
-			$this-&gt;_fields[$name] =  &quot;`$name` TINYINT($length) UNSIGNED&quot;;
-		}
-		elseif ($setting['min'] &gt;= -128 &amp;&amp; $setting['max'] &lt;= 128)
-		{
-			// TINYINT ( -128 to 127 )
-			$this-&gt;_fields[$name] =  &quot;`$name` TINYINT($length) DEFAULT&quot;;
-		}
-		elseif ($setting['min'] &gt;= 0 &amp;&amp; $setting['max'] &lt;= 65535)
-		{
-			// SMALLINT UNSIGNED ( 0 to 65,535 )
-			$this-&gt;_fields[$name] =  &quot;`$name` SMALLINT($length) UNSIGNED&quot;;
-		}
-		elseif ($setting['min'] &gt;= -32768 &amp;&amp; $setting['max'] &lt;= 32767)
-		{
-			// SMALLINT ( -32,768 to 32,767 )
-			$this-&gt;_fields[$name] =  &quot;`$name` SMALLINT($length)&quot;;
-		}
-		elseif ($setting['min'] &gt;= 0 &amp;&amp; $setting['max'] &lt;= 16777215)
-		{
-			// MEDIUMINT UNSIGNED ( 0 to 16,777,215 )
-			$this-&gt;_fields[$name] =  &quot;`$name` MEDIUMINT($length) UNSIGNED&quot;;
-		}
-		elseif ($setting['min'] &gt;= -8388608 &amp;&amp; $setting['max'] &lt;= 8388607)
-		{
-			// MEDIUMINT ( -8,388,608 to 8,388,607 )
-			$this-&gt;_fields[$name] =  &quot;`$name` MEDIUMINT($length)&quot;;
-		}
-		elseif ($setting['min'] &gt;= -2147483647 &amp;&amp; $setting['max'] &lt;= 2147483647)
-		{
-			// INT ( -2,147,483,647 to 2,147,483,647 )
-			$this-&gt;_fields[$name] =  &quot;`$name` INT($length)&quot;;
-		}
-		elseif ($setting['min'] &gt;= 0 &amp;&amp; $setting['max'] &lt;= 4294967295) // we'll do this last
-		{
-			// INT UNSIGNED ( 0 to 4,294,967,295 )
-			$this-&gt;_fields[$name] =  &quot;`$name` INT($length) UNSIGNED&quot;;
-		}
-
-		if ($auto_increment)
-		{
-			$this-&gt;_fields[$name] .= ' auto_increment';
-		}
-		else
-		{
-			$this-&gt;_fields[$name] .= ($setting['null']) ? &quot; NULL&quot; : &quot; NOT NULL&quot;;
-			$this-&gt;_fields[$name] .= &quot; DEFAULT '&quot;.(int) $default.&quot;'&quot;;
-		}
-	}
-
-	function add_table_field_text($name, $characters = 60000, $null = false)
-	{
-		if ($characters &lt;= 255)
-		{
-			// TINYTEXT 1 to 255 Characters
-			$this-&gt;_fields[$name] =  &quot;`$name` TINYTEXT&quot;;
-		}
-		elseif ($characters &lt;= 65535)
-		{
-			// TEXT 1 to 65535 Characters
-			$this-&gt;_fields[$name] =  &quot;`$name` TEXT&quot;;
-		}
-		elseif ($characters &lt;= 16777215)
-		{
-			// MEDIUMTEXT 1 to 16,777,215 Characters
-			$this-&gt;_fields[$name] =  &quot;`$name` MEDIUMTEXT&quot;;
-		}
-		elseif ($characters &lt;= 4294967295)
-		{
-			// LONGTEXT 1 to 4,294,967,295 Characters
-			$this-&gt;_fields[$name] =  &quot;`$name` LONGTEXT&quot;;
-		}
-
-		$this-&gt;_fields[$name] .= ($null) ? &quot; NULL&quot; : &quot; NOT NULL&quot;;
-	}
-
-	function add_table_field_char($name, $characters, $default = '', $padded = false)
-	{
-
-		$this-&gt;_fields[$name] = ($padded) ? &quot;`$name` CHAR($characters)&quot; :  &quot;`$name` VARCHAR($characters)&quot;;
-		$this-&gt;_fields[$name] .= (is_null($default)) ? &quot; NULL&quot; : &quot; NOT NULL DEFAULT '$default'&quot;;
-	}
-
-	function add_table_index($field, $type  = 'index', $index_name = false)
-	{
-		$index_name = ($index_name) ? $index_name : $field;
-
-		if (empty($this-&gt;_fields[$field]))
-		{
-			return;
-		}
-
-		switch ($type)
-		{
-			case 'index':
-			case 'unique':
-				$this-&gt;_indexs[$index_name] = (($type == 'UNIQUE') ? 'UNIQUE ' : '') . &quot;KEY `$index_name` (`$field`)&quot;;
-			break;
-
-			case 'primary':
-				$this-&gt;_indexs['primary'] = &quot;PRIMARY KEY (`$field`)&quot;;
-			break;
-		}
-	}
-}
-
-?&gt;
\ No newline at end of file

Modified: cms/branches/1.0alpha1/includes/db/mysql.php
===================================================================
--- cms/branches/1.0alpha1/includes/db/mysql.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/db/mysql.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -41,11 +41,11 @@
 	var $_fields = array();
 	var $_table_name = false;
 
-	function connect($db)
+	function connect($db, $return = false)
 	{		
 		if ($db['port'])
 		{
-			$db['server'] .= ':' . $port;
+			$db['server'] .= ':' . $db['port'];
 		}
 
 		if ($this-&gt;link_identifier)
@@ -68,9 +68,14 @@
 
 			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB2&lt;/center&gt;';
 		}
-		
-		if (!$error)
+
+		if (!$this-&gt;report_error)
 		{
+			return false;
+		}
+
+		if (!isset($error))
+		{
 			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB1&lt;/center&gt;';
 		}
 
@@ -179,7 +184,7 @@
 
 		if ($this-&gt;last_result === false)
 		{
-			$this-&gt;_error($query, $backtrace);
+			$this-&gt;sql_error($backtrace);
 		}
 		elseif (strpos($query, 'SELECT') === 0)
 		{
@@ -223,60 +228,67 @@
 	/*
 		Boy do I like this but it phpBB's, may have to do something similar
 	*/
-	function sql_build_array($query, $assoc_ary = false)
+	function sql_build_array($query, $array = false)
 	{
-		if (!is_array($assoc_ary))
+		if (!is_array($array))
 		{
 			return false;
 		}
 
-		$fields = array();
-		$values = array();
+		$_fields = $values = array();
 
 		if ($query == 'INSERT')
 		{
-			foreach ($assoc_ary as $key =&gt; $var)
+			foreach ($array as $key =&gt; $value)
 			{
-				$fields[] = $key;
+				$_fields[] = $key;
 
-				if (is_null($var))
+				if (is_numeric($value))
 				{
-					$values[] = 'NULL';
+					$values[] = $value;
 				}
-				elseif (is_string($var))
+				elseif (is_string($value))
 				{
-					$values[] = &quot;'&quot; . $this-&gt;escape($var) . &quot;'&quot;;
+					$values[] = &quot;'&quot; . $this-&gt;escape($value) . &quot;'&quot;;
 				}
-				else
+				elseif (is_null($value))
 				{
-					$values[] = (is_bool($var)) ? intval($var) : $var;
+					$values[] = 'NULL';
 				}
+				elseif (is_bool($value))
+				{
+					$values[] = ($value) ? 1 : 0;
+				}
 			}
 
-			$query = ' (' . implode(', ', $fields) . ') VALUES (' . implode(', ', $values) . ')';
+			return ' (' . implode(', ', $_fields) . ') VALUES (' . implode(', ', $values) . ')';
 		}
-		else if ($query == 'UPDATE' || $query == 'SELECT')
+		elseif ($query == 'UPDATE' || $query == 'SELECT')
 		{
 			$values = array();
-			foreach ($assoc_ary as $key =&gt; $var)
+			foreach ($array as $key =&gt; $value)
 			{
-				if (is_null($var))
+				if (is_numeric($value))
 				{
-					$values[] = &quot;$key = NULL&quot;;
+					$values[] = $key.' = '.$value;
 				}
-				elseif (is_string($var))
+				elseif (is_string($value))
 				{
-					$values[] = &quot;$key = '&quot; . $this-&gt;escape($var) . &quot;'&quot;;
+					$values[] = &quot;$key = '&quot; . $this-&gt;escape($value) . &quot;'&quot;;
 				}
-				else
+				elseif (is_null($value))
 				{
-					$values[] = (is_bool($var)) ? &quot;$key = &quot; . intval($var) : &quot;$key = $var&quot;;
+					$values[] = &quot;$key = NULL&quot;;
 				}
+				elseif (is_bool($value))
+				{
+					$values[] = $key.' = '.(($value) ? 1 : 0);
+				}
+
 			}
-			$query = implode(($query == 'UPDATE') ? ', ' : ' AND ', $values);
+
+			return implode(($query == 'UPDATE') ? ', ' : ' AND ', $values);
 		}
-
-		return $query;
 	}
 
 	function num_rows($result = false)
@@ -393,7 +405,7 @@
 				}
 			}
 
-			$this-&gt;sql_freeresult($result);
+			$this-&gt;free_result($result);
 		}
 
 		if ($table)
@@ -412,14 +424,22 @@
 		return (($return_dbname) ? 'MySQL ' : '').mysql_get_server_info($this-&gt;link_identifier);
 	}
 
-	function _error($sql = '', $backtrace)
+	function sql_error($backtrace, $return = false)
 	{
+		if ($return)
+		{
+			return array(
+				'message'	=&gt; @mysql_error(),
+				'code'		=&gt; @mysql_errno()
+			);
+		}
+
 		if (!$this-&gt;report_error)
 		{
 			return;
 		}
 
-		$message = '&lt;br clear=&quot;all&quot;/&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mysql_error() . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($sql) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $sql : '') . '&lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';
+		$message = '&lt;br clear=&quot;all&quot;/&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mysql_error() . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($this-&gt;last_query) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $this-&gt;last_query : '') . '&lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';
 
 		if ($this-&gt;in_transaction)
 		{
@@ -427,8 +447,6 @@
 		}
 
 		trigger_error($message, E_USER_ERROR);
-		
-		script_close(false);
 	}
 
 	function _debug($mode, $backtrace)
@@ -634,6 +652,7 @@
 	function add_table_index($field, $type  = 'index', $index_name = false)
 	{
 		$index_name = ($index_name) ? $index_name : $field;
+		$index_name = is_array($index_name) ? implode('_', $index_name) : $index_name;
 
 		$field = is_array($field) ? implode('` , `', $field) : $field;
 

Modified: cms/branches/1.0alpha1/includes/db/mysql3.php
===================================================================
--- cms/branches/1.0alpha1/includes/db/mysql3.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/db/mysql3.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -64,7 +64,12 @@
 
 			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB2&lt;/center&gt;';
 		}
-		
+
+		if (!$this-&gt;report_error)
+		{
+			return false;
+		}
+
 		if (!isset($error))
 		{
 			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB1&lt;/center&gt;';
@@ -125,7 +130,7 @@
 
 		if ($this-&gt;last_result === false)
 		{
-			$this-&gt;_error($query, $backtrace);
+			$this-&gt;sql_error($backtrace);
 		}
 		elseif (strpos($query, 'SELECT') === 0)
 		{
@@ -348,14 +353,22 @@
 		return (($return_dbname) ? 'MySQL ' : '').mysql_get_server_info($this-&gt;link_identifier);
 	}
 
-	function _error($sql = '', $backtrace)
+	function sql_error($backtrace, $return = false)
 	{
+		if ($return)
+		{
+			return array(
+				'message'	=&gt; @mysql_error(),
+				'code'		=&gt; @mysql_errno()
+			);
+		}
+
 		if (!$this-&gt;report_error)
 		{
 			return;
 		}
 
-		$message = '&lt;br clear=&quot;all&quot;/&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mysql_error() . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($sql) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $sql : '') . '&lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';
+		$message = '&lt;br clear=&quot;all&quot;/&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mysql_error() . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($sql) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $this-&gt;last_query : '') . '&lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';
 
 		if ($this-&gt;in_transaction)
 		{
@@ -572,7 +585,8 @@
 	function add_table_index($field, $type  = 'index', $index_name = false)
 	{
 		$index_name = ($index_name) ? $index_name : $field;
-		
+		$index_name = is_array($index_name) ? implode('_', $index_name) : $index_name;
+
 		$field = is_array($field) ? implode('` , `', $field) : $field;
 
 		switch ($type)

Modified: cms/branches/1.0alpha1/includes/db/mysqli.php
===================================================================
--- cms/branches/1.0alpha1/includes/db/mysqli.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/db/mysqli.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -27,7 +27,7 @@
 	var $db_layer = 'mysqli';
 
 	var $last_result;
-	var $return_on_error;
+	var $report_error = true;
 	var $in_transaction;
 
 	var $queries_time = 0;
@@ -62,15 +62,19 @@
 				mysqli_query($this-&gt;link_identifier, 'SET NAMES utf8');
 
 				//mysqli_query($this-&gt;link_identifier, 'SET character_set_results = NULL');
-				//mysqli_set_charset($this-&gt;link_identifier, &quot;utf8&quot;);
 
 				return $this-&gt;link_identifier;
 			}
 
 			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB2&lt;/center&gt;';
 		}
+
+		if (!$this-&gt;report_error)
+		{
+			return false;
+		}
 		
-		if (!$error)
+		if (!isset($error))
 		{
 			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB1&lt;/center&gt;';
 		}
@@ -92,9 +96,9 @@
 		$this-&gt;link_identifier = false;
 	}
 
-	function sql_return_on_error($fail = false)
+	function report_error($report)
 	{
-		$this-&gt;return_on_error = $fail;
+		$this-&gt;report_error = ($report);
 	}
 
 	function transaction($option = 'start', $auto_rollback = true)
@@ -181,9 +185,9 @@
 
 		if ($this-&gt;last_result === false)
 		{
-			$this-&gt;_error($query, $backtrace);
+			$this-&gt;sql_error($backtrace);
 		}
-		elseif (strpos($query, 'SELECT') === false)
+		elseif (strpos($query, 'SELECT') === 0)
 		{
 			$this-&gt;open_queries[(string) $this-&gt;last_result] = $this-&gt;last_result;
 		}
@@ -421,14 +425,22 @@
 		return mysqli_get_server_info($this-&gt;link_identifier);
 	}
 	
-	function _error($sql = '', $backtrace)
+	function sql_error($backtrace, $return = false)
 	{
+		if ($return)
+		{
+			return array(
+				'message'	=&gt; @mysqli_error($this-&gt;link_identifier),
+				'code'		=&gt; @mysqli_errno($this-&gt;link_identifier)
+			);
+		}
+
 		if ($this-&gt;return_on_error)
 		{
 			return;
 		}
 
-		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mysqli_error($this-&gt;link_identifier) . '&lt;br /&gt;&lt;br /&gt;File: &lt;br/&gt;'.$backtrace['file'].'&lt;br/&gt;&lt;br /&gt;Line:&lt;br/&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $sql .'&lt;br /&gt;';
+		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mysqli_error($this-&gt;link_identifier) . '&lt;br /&gt;&lt;br /&gt;File: &lt;br/&gt;'.$backtrace['file'].'&lt;br/&gt;&lt;br /&gt;Line:&lt;br/&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $this-&gt;last_query .'&lt;br /&gt;';
 
 		if ($this-&gt;in_transaction)
 		{
@@ -638,8 +650,9 @@
 
 	function add_table_index($field, $type  = 'index', $index_name = false)
 	{
-		$index_name = $index_name ? $index_name : $field;
-		
+		$index_name = ($index_name) ? $index_name : $field;
+		$index_name = is_array($index_name) ? implode('_', $index_name) : $index_name;
+
 		$field = is_array($field) ? implode('` , `', $field) : $field;
 
 		switch ($type)

Modified: cms/branches/1.0alpha1/includes/db/postgres.php
===================================================================
--- cms/branches/1.0alpha1/includes/db/postgres.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/db/postgres.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -75,24 +75,30 @@
 
 		$connection_string = implode(' ', $connection_string);
 
-
 		$this-&gt;link_identifier = ($db['persistent']) ? @pg_pconnect($connection_string) : @pg_connect($connection_string);
 
 		if ($this-&gt;link_identifier)
 		{
-			//pg_set_client_encoding($this-&gt;link_identifier, 'UNICODE');
-			//pg_set_client_encoding($this-&gt;link_identifier, 'UTF8');  pg8.1 unicode still works tho
+			if (strtoupper(substr(PHP_OS, 0, 3)) !== 'WIN')
+			{
+				pg_set_client_encoding($this-&gt;link_identifier, 'UNICODE');
+				//pg_set_client_encoding($this-&gt;link_identifier, 'UTF8');  pg8.1 unicode still works tho
+				//pg_query($this-&gt;link_identifier, &quot;SET CLIENT_ENCODING TO 'UNICODE'&quot;); SET NAMES 'UNICODE'
+			}
 
-			//pg_query($this-&gt;link_identifier, &quot;SET CLIENT_ENCODING TO 'value'&quot;); SET NAMES 'value'
 			return $this-&gt;link_identifier;
 		}
 
+		if (!$this-&gt;report_error)
+		{
+			return false;
+		}
+
 		$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB1&lt;/center&gt;';
 
 		$this-&gt;disconnect();
+
 		trigger_error($error, E_USER_ERROR);
-
-		die;
 	}
 
 	function disconnect()
@@ -102,7 +108,7 @@
 			return;
 		}
 
-		@pg_close($this-&gt;link_identifier);
+		pg_close($this-&gt;link_identifier);
 		$this-&gt;link_identifier = false;
 	}
 
@@ -110,6 +116,7 @@
 	{
 		$this-&gt;report_error = ($report);
 	}
+
 	function transaction($option = 'start', $auto_rollback = true)
 	{
 		$result = false;
@@ -186,7 +193,7 @@
 
 		if ($this-&gt;last_result === false)
 		{
-			$this-&gt;_error($query, $backtrace);
+			$this-&gt;sql_error($backtrace);
 		}
 		elseif (strpos($query, 'SELECT') === 0)
 		{
@@ -329,7 +336,7 @@
 			return false;
 		}
 
-		return @pg_fetch_assoc($result);
+		return pg_fetch_assoc($result);
 	}
 
 	function fetch_row_num($result = false)
@@ -339,7 +346,7 @@
 			return false;
 		}
 
-		return @pg_fetch_row($result);
+		return pg_fetch_row($result);
 	}
 
 	function fetch_row_both($result = false)
@@ -349,12 +356,12 @@
 			return false;
 		}
 
-		return @pg_fetch_array($result);
+		return pg_fetch_array($result);
 	}
 
 	function insert_id($table, $column)
 	{
-		$oid = @pg_last_oid($this-&gt;last_result);
+		$oid = pg_last_oid($this-&gt;last_result);
 
 		/* 
 		Shouldn't be need, but incase they don't have oid support ( not sure why they wouldn't )
@@ -389,7 +396,7 @@
 
 		unset($this-&gt;open_queries[(int) $result]);
 
-		return @pg_free_result($result);
+		return pg_free_result($result);
 	}
 
 	function escape($text)
@@ -421,14 +428,22 @@
 		}
 	}
 
-	function _error($sql = '', $backtrace)
+	function sql_error($backtrace, $return = false)
 	{
+		if ($return)
+		{
+			return array(
+				'message'	=&gt; @pg_last_error($this-&gt;link_identifier),
+				'code'		=&gt; ''
+			);
+		}
+		
 		if (!$this-&gt;report_error)
 		{
 			return;
 		}
 
-		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @pg_last_error($this-&gt;link_identifier) . '&lt;br /&gt;&lt;br /&gt;File: &lt;br/&gt;'.$backtrace['file'].'&lt;br/&gt;&lt;br /&gt;Line:&lt;br/&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $sql .'&lt;br /&gt;';
+		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @pg_last_error($this-&gt;link_identifier) . '&lt;br /&gt;&lt;br /&gt;File: &lt;br/&gt;'.$backtrace['file'].'&lt;br/&gt;&lt;br /&gt;Line:&lt;br/&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $this-&gt;last_query .'&lt;br /&gt;';
 
 		if ($this-&gt;in_transaction)
 		{
@@ -490,14 +505,14 @@
 				{
 					if (strpos('SELECT', $this-&gt;last_query) === 0)
 					{
-						if ($result = @pg_query($this-&gt;link_identifier, 'EXPLAIN '.$this-&gt;last_query))
+						if ($result = pg_query($this-&gt;link_identifier, 'EXPLAIN '.$this-&gt;last_query))
 						{
-							while ($row = @pg_fetch_assoc($result))
+							while ($row = pg_fetch_assoc($result))
 							{
 								$this-&gt;query_details[$this-&gt;num_queries][] = $row;
 							}
 
-							@pg_free_result($result);
+							pg_free_result($result);
 						}
 					}
 					else

Modified: cms/branches/1.0alpha1/includes/db/sqlite.php
===================================================================
--- cms/branches/1.0alpha1/includes/db/sqlite.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/db/sqlite.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -172,7 +172,7 @@
 
 		if ($this-&gt;last_result === false)
 		{
-			$this-&gt;_error($query, $backtrace);
+			$this-&gt;sql_error($backtrace);
 		}
 		elseif (strpos($query, 'SELECT') === 0)
 		{
@@ -407,14 +407,24 @@
 		return (($return_dbname) ? 'SQLITE ' : '').sqlite_libversion();
 	}
 
-	function _error($sql = '', $backtrace)
+	function sql_error($backtrace, $return = false)
 	{
+		if ($return)
+		{
+			$code = @sqlite_last_error($this-&gt;link_identifier);
+
+			return array(
+				'message'	=&gt; @sqlite_error_string($code),
+				'code'		=&gt; $code
+			);
+		}
+
 		if (!$this-&gt;report_error)
 		{
 			return;
 		}
 
-		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @sqlite_error_string(@sqlite_last_error($this-&gt;link_identifier)) . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($sql) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $sql : '') . '&lt;br /&gt;';
+		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @sqlite_error_string(@sqlite_last_error($this-&gt;link_identifier)) . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($this-&gt;last_query) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $this-&gt;last_query : '') . '&lt;br /&gt;';
 
 		if ($this-&gt;in_transaction)
 		{

Modified: cms/branches/1.0alpha1/includes/display/display.php
===================================================================
--- cms/branches/1.0alpha1/includes/display/display.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/display/display.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -181,7 +181,6 @@
 			'SITE_BASE'			=&gt;	generate_base_url(),
 			'SITE_CHARSET'		=&gt;	'UTF-8',
 			'SITE_NAME'			=&gt;	$_CORE_CONFIG['global']['site_name'],
-			'SITE_URL'			=&gt;	$_CORE_CONFIG['global']['site_url'],
 			'HEADER_MESSAGE'	=&gt;	$this-&gt;message,
 			'HEADER_REGULAR'	=&gt;	$this-&gt;header['meta'].$this-&gt;header['regular'],
 			'HEADER_JS' 		=&gt;	$this-&gt;header['js'],

Modified: cms/branches/1.0alpha1/includes/functions.php
===================================================================
--- cms/branches/1.0alpha1/includes/functions.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/functions.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -803,6 +803,7 @@
 			@flock($fp, LOCK_UN);
 			fclose($fp);
 		}
+
 		return $bytes;
 	}
 }

Modified: cms/branches/1.0alpha1/includes/tables.php
===================================================================
--- cms/branches/1.0alpha1/includes/tables.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/tables.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -173,71 +173,71 @@
 
 // Table names
 
-define('FORUMS_ACL_TABLE', $prefix.'forums_auth');
-define('FORUMS_ACL_OPTIONS_TABLE', $prefix.'forums_auth_options');
-//define('ACL_DEPS_TABLE', $prefix.'forums_auth_deps');
-define('FORUMS_ACL_PRESETS_TABLE', $prefix.'forums_auth_presets');
+define('FORUMS_ACL_TABLE', $table_prefix.'forums_auth');
+define('FORUMS_ACL_OPTIONS_TABLE', $table_prefix.'forums_auth_options');
+//define('ACL_DEPS_TABLE', $table_prefix.'forums_auth_deps');
+define('FORUMS_ACL_PRESETS_TABLE', $table_prefix.'forums_auth_presets');
 
-define('FORUMS_ATTACHMENTS_TABLE', $prefix.'forums_attachments');
-define('FORUMS_BOOKMARKS_TABLE', $prefix.'forums_bookmarks');
-define('FORUMS_BBCODES_TABLE', $prefix.'forums_bbcodes');
-define('FORUMS_CONFIG_TABLE', $prefix.'forums_config');
-define('FORUMS_DRAFTS_TABLE', $prefix.'forums_drafts');
-define('FORUMS_FORUMS_TABLE', $prefix.'forums_forums');
-define('FORUMS_ACCESS_TABLE', $prefix.'forums_access');
-define('FORUMS_ICONS_TABLE', $prefix.'forums_icons');
-define('FORUMS_LOG_TABLE', $prefix.'forums_log');
-define('FORUMS_MODERATOR_TABLE', $prefix.'forums_moderator_cache');
-define('FORUMS_MODULES_TABLE', $prefix . 'forums_modules');
-define('FORUMS_POSTS_TABLE', $prefix.'forums_posts');
-define('FORUMS_PRIVMSGS_TABLE', $prefix.'forums_privmsgs');
-define('FORUMS_PRIVMSGS_TO_TABLE', $prefix.'forums_privmsgs_to');
-define('FORUMS_PRIVMSGS_FOLDER_TABLE', $prefix.'forums_privmsgs_folder');
-define('FORUMS_PRIVMSGS_RULES_TABLE', $prefix.'forums_privmsgs_rules');
-define('FORUMS_REPORTS_TABLE', $prefix.'forums_reports');
-define('FORUMS_REASONS_TABLE', $prefix.'forums_reports_reasons');
-define('FORUMS_SEARCH_TABLE', $prefix.'forums_search_results');
-define('FORUMS_SEARCH_WORD_TABLE', $prefix.'forums_search_wordlist');
-define('FORUMS_SEARCH_MATCH_TABLE', $prefix.'forums_search_wordmatch');
-define('FORUMS_TOPICS_TABLE', $prefix.'forums_topics');
-define('FORUMS_POLL_OPTIONS_TABLE', $prefix.'forums_poll_results');
-define('FORUMS_POLL_VOTES_TABLE', $prefix.'forums_poll_voters');
-define('FORUMS_WORDS_TABLE', $prefix.'forums_words');
-define('FORUMS_WATCH_TABLE', $prefix.'forums_watch');
-define('FORUMS_TRACK_TABLE', $prefix.'forums_tracking');
-define('FORUMS_RANKS_TABLE', $prefix.'forums_ranks');
+define('FORUMS_ATTACHMENTS_TABLE', $table_prefix.'forums_attachments');
+define('FORUMS_BOOKMARKS_TABLE', $table_prefix.'forums_bookmarks');
+define('FORUMS_BBCODES_TABLE', $table_prefix.'forums_bbcodes');
+define('FORUMS_CONFIG_TABLE', $table_prefix.'forums_config');
+define('FORUMS_DRAFTS_TABLE', $table_prefix.'forums_drafts');
+define('FORUMS_FORUMS_TABLE', $table_prefix.'forums_forums');
+define('FORUMS_ACCESS_TABLE', $table_prefix.'forums_access');
+define('FORUMS_ICONS_TABLE', $table_prefix.'forums_icons');
+define('FORUMS_LOG_TABLE', $table_prefix.'forums_log');
+define('FORUMS_MODERATOR_TABLE', $table_prefix.'forums_moderator_cache');
+define('FORUMS_MODULES_TABLE', $table_prefix . 'forums_modules');
+define('FORUMS_POSTS_TABLE', $table_prefix.'forums_posts');
+define('FORUMS_PRIVMSGS_TABLE', $table_prefix.'forums_privmsgs');
+define('FORUMS_PRIVMSGS_TO_TABLE', $table_prefix.'forums_privmsgs_to');
+define('FORUMS_PRIVMSGS_FOLDER_TABLE', $table_prefix.'forums_privmsgs_folder');
+define('FORUMS_PRIVMSGS_RULES_TABLE', $table_prefix.'forums_privmsgs_rules');
+define('FORUMS_REPORTS_TABLE', $table_prefix.'forums_reports');
+define('FORUMS_REASONS_TABLE', $table_prefix.'forums_reports_reasons');
+define('FORUMS_SEARCH_TABLE', $table_prefix.'forums_search_results');
+define('FORUMS_SEARCH_WORD_TABLE', $table_prefix.'forums_search_wordlist');
+define('FORUMS_SEARCH_MATCH_TABLE', $table_prefix.'forums_search_wordmatch');
+define('FORUMS_TOPICS_TABLE', $table_prefix.'forums_topics');
+define('FORUMS_POLL_OPTIONS_TABLE', $table_prefix.'forums_poll_results');
+define('FORUMS_POLL_VOTES_TABLE', $table_prefix.'forums_poll_voters');
+define('FORUMS_WORDS_TABLE', $table_prefix.'forums_words');
+define('FORUMS_WATCH_TABLE', $table_prefix.'forums_watch');
+define('FORUMS_TRACK_TABLE', $table_prefix.'forums_tracking');
+define('FORUMS_RANKS_TABLE', $table_prefix.'forums_ranks');
 
 
-define('ADMIN_AUTH_TABLE', 'test_admins');
+define('ADMIN_AUTH_TABLE', $table_prefix.'admins');
 
-define('BLOCKS_TABLE', 'test_blocks');
+define('BLOCKS_TABLE', $table_prefix.'blocks');
 
-define('CORE_CONFIG_TABLE', 'test_config');
-define('CORE_MODULES_TABLE', $prefix.'modules');
+define('CORE_CONFIG_TABLE', $table_prefix.'config');
+define('CORE_MODULES_TABLE', $table_prefix.'modules');
 
-define('SMILIES_TABLE', 'test_smilies');
+define('SMILIES_TABLE', $table_prefix.'smilies');
 
-define('USER_GROUP_TABLE', 'test_groups_members');
-define('GROUPS_TABLE', 'test_groups');
+define('USER_GROUP_TABLE', $table_prefix.'groups_members');
+define('GROUPS_TABLE', $table_prefix.'groups');
 
-define('SESSIONS_AUTOLOGIN_TABLE', 'test_sessions_auto_login');
-define('SESSIONS_TABLE', $prefix.'sessions');
+define('SESSIONS_AUTOLOGIN_TABLE', $table_prefix.'sessions_auto_login');
+define('SESSIONS_TABLE', $table_prefix.'sessions');
 
 
-define('EXTENSIONS_TABLE', $prefix.'forums_extensions');
-define('EXTENSION_GROUPS_TABLE', $prefix.'forums_extension_groups');
+define('EXTENSIONS_TABLE', $table_prefix.'forums_extensions');
+define('EXTENSION_GROUPS_TABLE', $table_prefix.'forums_extension_groups');
 
-define('USERS_TABLE', $prefix.'users');
-define('USERS_NOTES_TABLE', $prefix.'forums_users_notes');
-define('ZEBRA_TABLE', $prefix.'forums_zebra');
-//define('LOG_TABLE', $prefix.'log');
+define('USERS_TABLE', $user_prefix.'users');
+define('USERS_NOTES_TABLE', $table_prefix.'forums_users_notes');
+define('ZEBRA_TABLE', $table_prefix.'forums_zebra');
+//define('LOG_TABLE', $table_prefix.'log');
 
 
 // can be removed
-define('PROFILE_FIELDS_TABLE', $prefix.'forums_profile_fields');
-define('PROFILE_LANG_TABLE', $prefix.'forums_profile_lang');
-define('PROFILE_DATA_TABLE', $prefix.'forums_profile_fields_data');
-define('PROFILE_FIELDS_LANG_TABLE', $prefix.'forums_profile_fields_lang');
-define('DISALLOW_TABLE', $prefix.'forums_disallow');
+define('PROFILE_FIELDS_TABLE', $table_prefix.'forums_profile_fields');
+define('PROFILE_LANG_TABLE', $table_prefix.'forums_profile_lang');
+define('PROFILE_DATA_TABLE', $table_prefix.'forums_profile_fields_data');
+define('PROFILE_FIELDS_LANG_TABLE', $table_prefix.'forums_profile_fields_lang');
+define('DISALLOW_TABLE', $table_prefix.'forums_disallow');
 
 ?&gt;
\ No newline at end of file

Added: cms/branches/1.0alpha1/includes/templates/installer/agreement.html
===================================================================
--- cms/branches/1.0alpha1/includes/templates/installer/agreement.html	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/templates/installer/agreement.html	2005-09-10 14:40:33 UTC (rev 107)
@@ -0,0 +1,113 @@
+&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</A>&quot;&gt;
+&lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
+&lt;head&gt;
+&lt;title&gt;Viperal: Agreement&lt;/title&gt;
+&lt;meta http-equiv=&quot;content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
+&lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot; /&gt;
+
+&lt;style type=&quot;text/css&quot;&gt;
+&lt;!--
+body
+{
+    font-family: Verdana, Helvetica, sans-serif;
+    font-size: 10px;
+    margin: 0%;
+    padding: 0px;
+    background-color: white;
+    background: url(../images/bg.gif);
+}
+
+.error { color: red; }
+
+#container
+{
+	position: absolute;
+	top: 50%;
+	left: 0px;
+	width: 100%;
+	margin-top: -130px;
+}
+
+#wrapper
+{
+	position: relative;
+	text-align: left;
+	width: 500px;
+	margin: 0px auto;
+}
+
+.spacer
+{
+	background-color: #ECECEC;
+}
+
+.button
+{
+	background-color: #DCE1E5;
+	border: 1px solid #ccc;
+	color: black;
+}
+
+th { height: 28px; color: #FFA34F; font-size: 110%; font-weight: bold; background-color: #006699;white-space: nowrap; }
+.tablebg { background-color: #A9B8C2; }
+
+.row1 { background-color: #ECECEC; padding: 4px; }
+.row2 { background-color: #DCE1E5; padding: 4px; }
+.row3 { background-color: #C0C8D0; padding: 4px; }
+
+a:link { color: #005784; text-decoration: none; }
+a:active { color: #005784; text-decoration: none; }
+a:visited { color: #005784; text-decoration: none; }
+a:hover { color: #000000; text-decoration: none; }
+
+form { margin: 0px; padding: 0px; border: 0px; }
+input { font-weight: normal; background-color: #FAFAFA; border-style: solid; border-width: 1px; border-color: #ccc; color: black; font-family: Verdana, serif; font-size: 100%; }
+select { color: black; background-color: white; font-family: Verdana, serif; font-size: 100%; font-weight: normal; border-color: black; border-style: solid; border-width: 1px; }
+.post { background-color: white; border-style: solid; border-width: 1px; border-color: #ccc;}
+
+--&gt;
+&lt;/style&gt;
+
+&lt;body&gt;
+	&lt;div id=&quot;container&quot;&gt;
+		&lt;div id=&quot;wrapper&quot;&gt;
+			&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
+				&lt;table class=&quot;tablebg&quot; width=&quot;100%&quot; cellspacing=&quot;1&quot; cellpadding=&quot;4&quot;&gt;
+					&lt;tbody&gt;
+						&lt;tr&gt;
+							&lt;th style=&quot;text-align: center;&quot;&gt;Agreement&lt;/th&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot;&gt;
+								&lt;p&gt;
+									Because the program is licensed free of charge, there is &lt;b&gt;NO WARRANTY
+								FOR THE PROGRAM&lt;/b&gt;, to the extent permitted by applicable law.  except when
+								otherwise stated in writing the copyright holders and/or other parties
+								provide the program &quot;as is&quot; without warranty of any kind, either expressed
+								or implied, including, but not limited to, the implied warranties of
+								merchantability and fitness for a particular purpose.  the entire risk as
+								to the quality and performance of the program is with you.  should the
+								program prove defective, you assume the cost of all necessary servicing,
+								repair or correction.&lt;/p&gt;
+								&lt;p&gt;
+									&lt;b&gt;Please note&lt;/b&gt;, that while most of this program is mostly licensed under &lt;a href=&quot;<A HREF="http://www.gnu.org/licenses/gpl.txt">http://www.gnu.org/licenses/gpl.txt</A>&quot;&gt;GNU GPL&lt;/a&gt; . It &lt;b&gt;does&lt;/b&gt; include a few non GNU GPL licenses, your take responsibly  for looking at each file and/or folder for the it license and following it to it extent. 
+									&lt;br/&gt;&lt;br/&gt;None of these license hinders free redistribution, nor use of this software for individual or business related site&lt;/p&gt;
+								&lt;p&gt;
+									&lt;b&gt;If you agree to these terms and those of all the distrubuted licenses, Please hit agree.&lt;/b&gt;&lt;/p&gt;
+								&lt;p&gt;				
+							&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;th style=&quot;text-align: center;&quot;&gt;
+								&lt;input type=&quot;hidden&quot; name=&quot;stage&quot; value=&quot;1&quot; /&gt;
+								&lt;input type=&quot;submit&quot; name=&quot;agreement_signed&quot; value=&quot;I Agree&quot; class=&quot;formfield&quot; /&gt;
+							&lt;/th&gt;
+						&lt;/tr&gt;
+					&lt;/tbody&gt;
+				&lt;/table&gt;
+			&lt;/form&gt;
+		&lt;/div&gt;
+	&lt;/div&gt;
+&lt;/body&gt;
+
+&lt;/html&gt;
\ No newline at end of file

Added: cms/branches/1.0alpha1/includes/templates/installer/complete.html
===================================================================
--- cms/branches/1.0alpha1/includes/templates/installer/complete.html	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/templates/installer/complete.html	2005-09-10 14:40:33 UTC (rev 107)
@@ -0,0 +1,95 @@
+&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</A>&quot;&gt;
+&lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
+&lt;head&gt;
+&lt;title&gt;Viperal: Agreement&lt;/title&gt;
+&lt;meta http-equiv=&quot;content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
+&lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot; /&gt;
+
+&lt;style type=&quot;text/css&quot;&gt;
+&lt;!--
+body
+{
+    font-family: Verdana, Helvetica, sans-serif;
+    font-size: 10px;
+    margin: 0%;
+    padding: 0px;
+    background-color: white;
+    background: url(../images/bg.gif);
+}
+
+.error { color: red; }
+
+#container
+{
+	position: absolute;
+	top: 50%;
+	left: 0px;
+	width: 100%;
+	margin-top: -130px;
+}
+
+#wrapper
+{
+	position: relative;
+	text-align: left;
+	width: 500px;
+	margin: 0px auto;
+}
+
+.spacer
+{
+	background-color: #ECECEC;
+}
+
+.button
+{
+	background-color: #DCE1E5;
+	border: 1px solid #ccc;
+	color: black;
+}
+
+th { height: 28px; color: #FFA34F; font-size: 110%; font-weight: bold; background-color: #006699;white-space: nowrap; }
+.tablebg { background-color: #A9B8C2; }
+
+.row1 { background-color: #ECECEC; padding: 4px; }
+.row2 { background-color: #DCE1E5; padding: 4px; }
+.row3 { background-color: #C0C8D0; padding: 4px; }
+
+a:link { color: #005784; text-decoration: none; }
+a:active { color: #005784; text-decoration: none; }
+a:visited { color: #005784; text-decoration: none; }
+a:hover { color: #000000; text-decoration: none; }
+
+form { margin: 0px; padding: 0px; border: 0px; }
+input { font-weight: normal; background-color: #FAFAFA; border-style: solid; border-width: 1px; border-color: #ccc; color: black; font-family: Verdana, serif; font-size: 100%; }
+select { color: black; background-color: white; font-family: Verdana, serif; font-size: 100%; font-weight: normal; border-color: black; border-style: solid; border-width: 1px; }
+.post { background-color: white; border-style: solid; border-width: 1px; border-color: #ccc;}
+
+--&gt;
+&lt;/style&gt;
+
+&lt;body&gt;
+	&lt;div id=&quot;container&quot;&gt;
+		&lt;div id=&quot;wrapper&quot;&gt;
+			&lt;table class=&quot;tablebg&quot; width=&quot;100%&quot; cellspacing=&quot;1&quot; cellpadding=&quot;4&quot;&gt;
+				&lt;tbody&gt;
+					&lt;tr&gt;
+						&lt;th style=&quot;text-align: center;&quot;&gt;Agreement&lt;/th&gt;
+					&lt;/tr&gt;
+					&lt;tr&gt;
+						&lt;td class=&quot;row1&quot;&gt;
+							&lt;p style=&quot;text-align: center&quot;&gt;
+								Congrates { $username }, Your Site is now installed.
+								&lt;br/&gt;
+								&lt;br/&gt;
+								&lt;a href=&quot;{ $admin_link }&quot;&gt;Go to Site Admin&lt;/a&gt;
+							&lt;p&gt;
+						&lt;/td&gt;
+					&lt;/tr&gt;
+				&lt;/tbody&gt;
+			&lt;/table&gt;
+		&lt;/div&gt;
+	&lt;/div&gt;
+&lt;/body&gt;
+
+&lt;/html&gt;
\ No newline at end of file

Added: cms/branches/1.0alpha1/includes/templates/installer/stage1.html
===================================================================
--- cms/branches/1.0alpha1/includes/templates/installer/stage1.html	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/templates/installer/stage1.html	2005-09-10 14:40:33 UTC (rev 107)
@@ -0,0 +1,205 @@
+&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</A>&quot;&gt;
+&lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
+&lt;head&gt;
+&lt;title&gt;Viperal: Agreement&lt;/title&gt;
+&lt;meta http-equiv=&quot;content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
+&lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot; /&gt;
+
+&lt;style type=&quot;text/css&quot;&gt;
+&lt;!--
+body
+{
+    font-family: Verdana, Helvetica, sans-serif;
+    font-size: 10px;
+    margin: 0%;
+    padding: 0px;
+    background-color: white;
+    background: url(../images/bg.gif);
+}
+
+.error { color: red; }
+
+#container
+{
+	position: absolute;
+	top: 50%;
+	left: 0px;
+	width: 100%;
+	margin-top: -130px;
+}
+
+#wrapper
+{
+	position: relative;
+	text-align: left;
+	width: 500px;
+	margin: 0px auto;
+}
+
+.spacer
+{
+	background-color: #ECECEC;
+}
+
+.button
+{
+	background-color: #DCE1E5;
+	border: 1px solid #ccc;
+	color: black;
+}
+
+th { height: 28px; color: #FFA34F; font-size: 110%; font-weight: bold; background-color: #006699;white-space: nowrap; }
+.tablebg { background-color: #A9B8C2; }
+
+.row1 { background-color: #ECECEC; padding: 4px; }
+.row2 { background-color: #DCE1E5; padding: 4px; }
+.row3 { background-color: #C0C8D0; padding: 4px; }
+
+a:link { color: #005784; text-decoration: none; }
+a:active { color: #005784; text-decoration: none; }
+a:visited { color: #005784; text-decoration: none; }
+a:hover { color: #000000; text-decoration: none; }
+
+form { margin: 0px; padding: 0px; border: 0px; }
+input { font-weight: normal; background-color: #FAFAFA; border-style: solid; border-width: 1px; border-color: #ccc; color: black; font-family: Verdana, serif; font-size: 100%; }
+select { color: black; background-color: white; font-family: Verdana, serif; font-size: 100%; font-weight: normal; border-color: black; border-style: solid; border-width: 1px; }
+.post { background-color: white; border-style: solid; border-width: 1px; border-color: #ccc;}
+
+--&gt;
+&lt;/style&gt;
+&lt;script language=&quot;Javascript&quot; type=&quot;text/javascript&quot;&gt;
+&lt;!--
+var old_value = 'all';
+
+function change_option(name)
+{
+	var area = document.getElementById(name);
+
+	if (!area)
+	{
+		if (old_value == 'all')
+		{
+			return;
+		}
+		else
+		{
+			name = 'all'
+			area = document.getElementById(name);
+		}
+	}
+
+	area.style.display = '';
+
+	var i = 1;
+
+	while (true)
+	{
+		area = document.getElementById(name + '_' + i);
+
+		if (!area)
+		{
+			break;
+		}
+
+		area.style.display = '';
+		i += 1;
+	}
+
+	area = document.getElementById(old_value);
+	area.style.display = 'none';
+	
+	var i = 1;
+
+	while (true)
+	{
+		area = document.getElementById(old_value + '_' + i);
+
+		if (!area)
+		{
+			break;
+		}
+
+		area.style.display = 'none';
+		i += 1;
+	}
+
+	old_value = name;
+}
+
+//--&gt;
+&lt;/script&gt;
+&lt;body&gt;
+	&lt;div id=&quot;container&quot;&gt;
+		&lt;div id=&quot;wrapper&quot;&gt;
+			&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
+				&lt;table class=&quot;tablebg&quot; width=&quot;100%&quot; cellspacing=&quot;1&quot; cellpadding=&quot;4&quot;&gt;
+					&lt;tbody&gt;
+						&lt;tr&gt;
+							&lt;th colspan=&quot;2&quot;&gt;Database Configuration&lt;/th&gt;
+						&lt;/tr&gt;
+						&lt;!-- IF { $error } --&gt;
+						&lt;tr&gt;
+							&lt;td colspan=&quot;2&quot; class=&quot;row2&quot; style=&quot;color: red; text-align:center;&quot;&gt;{ $error }&lt;/th&gt;
+						&lt;/tr&gt;
+						&lt;!-- ENDIF --&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Database type: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;select id=&quot;layer&quot; name=&quot;layer&quot; onchange=&quot;change_option(this.value);&quot;&gt;{ $database_options }&lt;/select&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr id=&quot;sqlite&quot; style=&quot;display: none;&quot;&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Database File: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;file_sqlite&quot; value=&quot;{ $file }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr id=&quot;sqlite_pdo&quot; style=&quot;display: none;&quot;&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Database File: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;file_sqlite_pdo&quot; value=&quot;{ $file }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr id=&quot;all&quot;&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Database server hostname: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;server&quot; value=&quot;{ $server }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr id=&quot;all_1&quot;&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Database server port: &lt;/b&gt;&lt;br&gt;&lt;span class=&quot;gensmall&quot;&gt;Leave this blank unless you know the server operates on a non-standard port.&lt;/span&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;port&quot; value=&quot;{ $port }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr id=&quot;all_2&quot;&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Database name: &lt;/b&gt;&lt;br/&gt;Required&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;database&quot; value=&quot;{ $database }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr id=&quot;all_3&quot;&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Database username: &lt;/b&gt;&lt;br/&gt;Required&lt;/td&gt;
+					
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;username&quot; value=&quot;{ $username }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr id=&quot;all_4&quot;&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Database password: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;password&quot; value=&quot;{ $password }&quot; type=&quot;password&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Prefix for tables: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;table_prefix&quot; value=&quot;{ $table_prefix }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Prefix for user table: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;user_prefix&quot; value=&quot;{ $user_prefix }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;input type=&quot;hidden&quot; name=&quot;stage&quot; value=&quot;2&quot; /&gt;
+							&lt;input type=&quot;hidden&quot; name=&quot;agreement_signed&quot; value=&quot;1&quot; /&gt;
+							&lt;th colspan=&quot;2&quot; align=&quot;center&quot;&gt;&lt;input class=&quot;button&quot; name=&quot;test&quot; value=&quot;Test Connection&quot; type=&quot;submit&quot;&gt; &lt;input class=&quot;button&quot; name=&quot;submit&quot; value=&quot;Start Installation&quot; type=&quot;submit&quot;&gt;&lt;/th&gt;
+						&lt;/tr&gt;
+					&lt;/tbody&gt;
+				&lt;/table&gt;
+			&lt;/form&gt;
+		&lt;/div&gt;
+	&lt;/div&gt;
+
+&lt;script language=&quot;Javascript&quot; type=&quot;text/javascript&quot;&gt;
+&lt;!--
+	change_option(document.getElementById('layer').value);
+//--&gt;
+&lt;/script&gt;
+
+&lt;/body&gt;
+
+&lt;/html&gt;
\ No newline at end of file

Added: cms/branches/1.0alpha1/includes/templates/installer/stage2.html
===================================================================
--- cms/branches/1.0alpha1/includes/templates/installer/stage2.html	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/templates/installer/stage2.html	2005-09-10 14:40:33 UTC (rev 107)
@@ -0,0 +1,169 @@
+&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</A>&quot;&gt;
+&lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
+&lt;head&gt;
+&lt;title&gt;Viperal: Agreement&lt;/title&gt;
+&lt;meta http-equiv=&quot;content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
+&lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot; /&gt;
+
+&lt;style type=&quot;text/css&quot;&gt;
+&lt;!--
+body
+{
+    font-family: Verdana, Helvetica, sans-serif;
+    font-size: 10px;
+    margin: 0%;
+    padding: 0px;
+    background-color: white;
+    background: url(../images/bg.gif);
+}
+
+.error { color: red; }
+
+#container
+{
+	position: relative;
+	top: 50%;
+	left: 0px;
+	width: 100%;
+	margin-top: 0px;
+}
+
+#wrapper
+{
+	position: relative;
+	text-align: left;
+	width: 500px;
+	margin: 0px auto;
+}
+
+.spacer
+{
+	background-color: #ECECEC;
+}
+
+.button
+{
+	background-color: #DCE1E5;
+	border: 1px solid #ccc;
+	color: black;
+}
+
+th { height: 28px; color: #FFA34F; font-size: 110%; font-weight: bold; background-color: #006699;white-space: nowrap; }
+.tablebg { background-color: #A9B8C2; }
+
+.row1 { background-color: #ECECEC; padding: 4px; }
+.row2 { background-color: #DCE1E5; padding: 4px; }
+.row3 { background-color: #C0C8D0; padding: 4px; }
+
+a:link { color: #005784; text-decoration: none; }
+a:active { color: #005784; text-decoration: none; }
+a:visited { color: #005784; text-decoration: none; }
+a:hover { color: #000000; text-decoration: none; }
+
+form { margin: 0px; padding: 0px; border: 0px; }
+input { font-weight: normal; background-color: #FAFAFA; border-style: solid; border-width: 1px; border-color: #ccc; color: black; font-family: Verdana, serif; font-size: 100%; }
+select { color: black; background-color: white; font-family: Verdana, serif; font-size: 100%; font-weight: normal; border-color: black; border-style: solid; border-width: 1px; }
+.post { background-color: white; border-style: solid; border-width: 1px; border-color: #ccc;}
+
+--&gt;
+&lt;/style&gt;
+
+&lt;body&gt;
+	&lt;div id=&quot;container&quot;&gt;
+		&lt;div id=&quot;wrapper&quot;&gt;
+			&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
+				&lt;table class=&quot;tablebg&quot; width=&quot;100%&quot; cellspacing=&quot;1&quot; cellpadding=&quot;4&quot;&gt;
+					&lt;tbody&gt;
+						&lt;!-- IF { $error } --&gt;
+						&lt;tr&gt;
+							&lt;th align=&quot;center&quot; colspan=&quot;2&quot;&gt;Error&lt;/th&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td colspan=&quot;2&quot; class=&quot;row2&quot; style=&quot;color: red; text-align:center;&quot;&gt;{ $error }&lt;/th&gt;
+						&lt;/tr&gt;
+						&lt;!-- ENDIF --&gt;
+						&lt;tr&gt;
+							&lt;th align=&quot;center&quot; colspan=&quot;2&quot;&gt;Administrator Configuration&lt;/th&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Username: &lt;/b&gt;&lt;/td&gt;
+					
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;username&quot; value=&quot;{ $username }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Password: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;password&quot; value=&quot;{ $password }&quot; type=&quot;password&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Password ( Confirm ): &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;password_confirm&quot; value=&quot;{ $password_confirm }&quot; type=&quot;password&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Email address: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;email&quot; value=&quot;{ $email }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Email address  ( Confirm ): &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;email_confirm&quot; value=&quot;{ $email_confirm }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;th align=&quot;center&quot; colspan=&quot;2&quot;&gt;Site Configuration&lt;/th&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td align=&quot;center&quot; colspan=&quot;2&quot; class=&quot;row2&quot;&gt;Default Value are usually correct, please review&lt;/th&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Site Name: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;site_name&quot; value=&quot;{ $site_name }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Site Domain: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;site_domain&quot; value=&quot;{ $site_domain }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Site path: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;site_path&quot; value=&quot;{ $site_path }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Site Port: &lt;/b&gt;&lt;br&gt;&lt;span class=&quot;gensmall&quot;&gt;Leave this blank unless you know the server operates on a non-standard port.&lt;/span&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;site_port&quot; value=&quot;{ $site_port }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Cookie Domain: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;cookie_domain&quot; value=&quot;{ $cookie_domain }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Cookie Path: &lt;/b&gt;&lt;/td&gt;
+					
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;cookie_path&quot; value=&quot;{ $cookie_path }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td class=&quot;row1&quot; width=&quot;50%&quot;&gt;&lt;b&gt;Cookie Name: &lt;/b&gt;&lt;/td&gt;
+							&lt;td class=&quot;row2&quot;&gt;&lt;input class=&quot;post&quot; name=&quot;cookie_name&quot; value=&quot;{ $cookie_name }&quot; type=&quot;text&quot;&gt;&lt;/td&gt;
+						&lt;/tr&gt;
+						&lt;!-- IF { $config_content } --&gt;
+						&lt;tr&gt;
+							&lt;th align=&quot;center&quot; colspan=&quot;2&quot;&gt;Config.php Content&lt;/th&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td colspan=&quot;2&quot; class=&quot;row2&quot; style=&quot;color: red; text-align:center;&quot;&gt;Copy the content below to your config.php file and upload to you site root&lt;/th&gt;
+						&lt;/tr&gt;
+						&lt;tr&gt;
+							&lt;td colspan=&quot;2&quot; class=&quot;row2&quot; style=&quot;color: red; text-align:center;&quot;&gt;
+							&lt;textarea name=&quot;config_content&quot; style=&quot;width: 100%&quot; rows=&quot;15&quot;&gt;{ $config_content }&lt;/textarea&gt;
+							&lt;/th&gt;
+						&lt;/tr&gt;
+						&lt;!-- ENDIF --&gt;
+						&lt;tr&gt;
+							&lt;input type=&quot;hidden&quot; name=&quot;stage&quot; value=&quot;3&quot; /&gt;
+							&lt;input type=&quot;hidden&quot; name=&quot;agreement_signed&quot; value=&quot;1&quot; /&gt;
+							&lt;th colspan=&quot;2&quot; align=&quot;center&quot;&gt;&lt;input class=&quot;button&quot; name=&quot;submit&quot; value=&quot;Finalize Installation&quot; type=&quot;submit&quot;&gt;&lt;/th&gt;
+						&lt;/tr&gt;
+					&lt;/tbody&gt;
+				&lt;/table&gt;
+			&lt;/form&gt;
+		&lt;/div&gt;
+	&lt;/div&gt;
+&lt;/body&gt;
+
+&lt;/html&gt;
\ No newline at end of file

Modified: cms/branches/1.0alpha1/includes/templates/login_admin.html
===================================================================
--- cms/branches/1.0alpha1/includes/templates/login_admin.html	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/includes/templates/login_admin.html	2005-09-10 14:40:33 UTC (rev 107)
@@ -14,7 +14,7 @@
     margin: 0%;
     padding: 0px;
     background-color: white;
-    background: url(/images/bg.gif);
+    background: url(images/bg.gif);
 }
 
 .error { color: red; }

Modified: cms/branches/1.0alpha1/install/build_data.php
===================================================================
--- cms/branches/1.0alpha1/install/build_data.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/install/build_data.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -21,440 +21,438 @@
 $Id$
 */
 
-$install_prefix = 'test_';
 $time = gmtime();
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;admins (admin_section, user_id, admin_status) VALUES ('_all_', 2, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;admins (admin_section, user_id, admin_status) VALUES ('_all_', 2, 2)&quot;);
 
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;blocks (id, title, type, content, position, weight, active, file) VALUES (1, 'Control Panel', , 'block-Control_Panel.php')&quot;);
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;blocks (id, title, type, content, position, weight, active, file) VALUES (1, 'Control Panel', , 'block-Control_Panel.php')&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'site_name', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'site_url', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'start_date', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_theme', 'viperal', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'foot1', '&lt;a href=\&quot;feed.php?feed=rss1\&quot; title=\&quot;RSS 1.0 / RDF Feed\&quot;&gt;&lt;img alt=\&quot;RSS 1.0 / RDF\&quot; src=\&quot;images/rss10_logo.gif\&quot; /&gt;&lt;/a&gt; &lt;a href=\&quot;feed.php?feed=rss2\&quot; title=\&quot;RSS 2.0 Feed\&quot;&gt;&lt;img alt=\&quot;RSS 2.0\&quot; src=\&quot;images/rss20_logo.gif\&quot; /&gt;&lt;/a&gt; &lt;a href=\&quot;feed.php?feed=rss\&quot; title=\&quot;RSS 0.91 Feed\&quot;&gt;&lt;img alt=\&quot;RSS 0.9\&quot; src=\&quot;images/rss090_logo.gif\&quot; /&gt;&lt;/a&gt;', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'foot2', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_lang', 'en', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_dst', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'only_registered', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_dateformat', 'D M d, Y g:i a', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_timezone', '-5', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'link_optimization', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'index_page', 'News', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'site_name', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'start_date', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_theme', 'viperal', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'foot1', '&lt;a href=\&quot;feed.php?feed=rss1\&quot; title=\&quot;RSS 1.0 / RDF Feed\&quot;&gt;&lt;img alt=\&quot;RSS 1.0 / RDF\&quot; src=\&quot;images/rss10_logo.gif\&quot; /&gt;&lt;/a&gt; &lt;a href=\&quot;feed.php?feed=rss2\&quot; title=\&quot;RSS 2.0 Feed\&quot;&gt;&lt;img alt=\&quot;RSS 2.0\&quot; src=\&quot;images/rss20_logo.gif\&quot; /&gt;&lt;/a&gt; &lt;a href=\&quot;feed.php?feed=rss\&quot; title=\&quot;RSS 0.91 Feed\&quot;&gt;&lt;img alt=\&quot;RSS 0.9\&quot; src=\&quot;images/rss090_logo.gif\&quot; /&gt;&lt;/a&gt;', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'foot2', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_lang', 'en', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_dst', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'only_registered', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_dateformat', 'D M d, Y g:i a', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_timezone', '-5', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'link_optimization', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'index_page', 'News', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('maintenance', 'active', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('maintenance', 'start', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('maintenance', 'text', '&lt;p align=\&quot;center\&quot;&gt;&lt;b&gt;Sorry we are currently updating this site.&lt;br&gt;\nPlease try again later&lt;/b&gt;&lt;/p&gt;\n&lt;p align=\&quot;center\&quot;&gt;&lt;b&gt;Viperal&lt;/b&gt;\n&lt;/p&gt;', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('maintenance', 'active', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('maintenance', 'start', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('maintenance', 'text', '&lt;p align=\&quot;center\&quot;&gt;&lt;b&gt;Sorry we are currently updating this site.&lt;br&gt;\nPlease try again later&lt;/b&gt;&lt;/p&gt;\n&lt;p align=\&quot;center\&quot;&gt;&lt;b&gt;Viperal&lt;/b&gt;\n&lt;/p&gt;', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'allow_html_email', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'email_enable', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'email_function_name', 'mb_mail', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_host', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_port', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_username', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_password', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'allow_html_email', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'email_enable', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'email_function_name', 'mb_mail', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_host', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_port', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_username', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_password', '', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'allow_name_chars', '.*', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'enable_confirm', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'coppa_enable', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'coppa_fax', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'coppa_mail', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'min_name_chars', '5', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'max_reg_attempts', '10', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'max_name_chars', '50', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'min_pass_chars', '5', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'max_pass_chars', '25', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'allow_email_reuse', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'allow_name_change', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'newest_username', 'admin', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'newest_user_id', '2', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'activation', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'total_users', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'password_encoding', 'md5', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'allow_name_chars', '.*', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'enable_confirm', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'coppa_enable', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'coppa_fax', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'coppa_mail', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'min_name_chars', '5', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'max_reg_attempts', '10', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'max_name_chars', '50', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'min_pass_chars', '5', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'max_pass_chars', '25', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'allow_email_reuse', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'allow_name_change', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'newest_username', 'admin', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'newest_user_id', '2', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'activation', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'total_users', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'password_encoding', 'md5', 0)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'path', '/', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'cookie_domain', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'cookie_name', 'viperal', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'cookie_path', '/', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'limit_load', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'limit_sessions', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'ip_check', '4', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'session_length', '3600', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'error_options', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_secure', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_domain', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_path', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_port', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'path', '/', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'cookie_domain', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'cookie_name', 'viperal', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'cookie_path', '/', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'limit_load', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'limit_sessions', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'ip_check', '4', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'session_length', '3600', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'error_options', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_secure', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_domain', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_path', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_port', '', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('GUESTS', 1, 2, '', 0, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('REGISTERED', 1, 2, '', 0, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('REGISTERED_COPPA', 1, 2, '', 0, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('ADMINISTRATORS', 1, 2, 'AA0000', 1, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('BOTS', 1, 2, '9E8DA7', 1, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('GUESTS', 1, 2, '', 0, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('REGISTERED', 1, 2, '', 0, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('REGISTERED_COPPA', 1, 2, '', 0, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('ADMINISTRATORS', 1, 2, 'AA0000', 1, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('BOTS', 1, 2, '9E8DA7', 1, '')&quot;);
 // To be seperated
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('SUPER_MODERATORS', 1, 2, '00AA00', 0, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('SUPER_MODERATORS', 1, 2, '00AA00', 0, '')&quot;);
 
 
 //Admin
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (2, 2, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (4, 2, 10)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (6, 2, 10)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (2, 2, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (4, 2, 10)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (6, 2, 10)&quot;);
 // Anonymous
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (1, 1, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (1, 1, 2)&quot;);
 // Bots
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 3, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 4, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 5, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 6, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 7, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 8, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 3, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 4, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 5, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 6, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 7, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 8, 2)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('blocks', 0, 2,'')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('groups', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('system', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('messages', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('modules', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('services', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('smiles', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('users', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('groups', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('blocks', 0, 2,'')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('groups', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('system', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('messages', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('modules', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('services', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('smiles', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('users', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('groups', 0, 2, '')&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('articles', 1, 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Contact', 1, 2, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Calender', 1, 1, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Control_Panel', 1, 2, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Forums', 1, 2, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Members_List', 1, 2, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Recommend_Us', 1, 2, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Submit_News', 1, 2, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Quick_Message', 1, 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('articles', 1, 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Contact', 1, 2, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Calender', 1, 1, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Control_Panel', 1, 2, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Forums', 1, 2, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Members_List', 1, 2, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Recommend_Us', 1, 2, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Submit_News', 1, 2, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Quick_Message', 1, 1, 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':D', 'grin.png', 'Very Happy', 19, 19, 1, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':)', 'smile.png', 'Smile', 19, 19, 2, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':(', 'sad.png', 'Sad', 19, 19, 3, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':o', 'surprised.png', 'Surprised', 19, 19, 4, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':eek:', 'surprised.png', 'Surprised', 19, 19, 4, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES ('8O', 'eek.png', 'Shocked', 19, 19, 5, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':?', 'confused.png', 'Confused', 19, 19, 6, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES ('8)', 'cool.png', 'Cool', 19, 19, 7, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':lol:', 'laugh.png', 'Laughing', 19, 19, 8, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':x', 'mad.png', 'Mad', 19, 19, 9, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':P', 'icon_razz.gif', 'Razz', 19, 19, 10, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':oops:', 'embarrassed.png', 'Embarassed', 19, 19, 11, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':cry:', 'cry.png', 'Crying or Very sad', 19, 19, 12, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':evil:', 'evil.png', 'Evil or Very Mad', 19, 19, 13, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':twisted:', 'twisted.png', 'Twisted Evil', 19, 19, 14, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':roll:', 'rolleyes.png', 'Rolling Eyes', 19, 19, 19, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (';)', 'wink.png', 'Wink', 19, 19, 16, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':!:', 'exclaim.png', 'Exclamation', 19, 19, 17, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':?:', 'question.png', 'Question', 19, 19, 18, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':idea:', 'idea.png', 'Idea', 19, 19, 19, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':arrow:', 'arrow.png', 'Arrow', 19, 19, 20, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':|', 'neutral.png', 'Neutral', 19, 19, 21, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':mrgreen:', 'mrgreen.png', 'Mr. Green', 19, 19, 22, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':D', 'grin.png', 'Very Happy', 19, 19, 1, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':)', 'smile.png', 'Smile', 19, 19, 2, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':(', 'sad.png', 'Sad', 19, 19, 3, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':o', 'surprised.png', 'Surprised', 19, 19, 4, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':eek:', 'surprised.png', 'Surprised', 19, 19, 4, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES ('8O', 'eek.png', 'Shocked', 19, 19, 5, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':?', 'confused.png', 'Confused', 19, 19, 6, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES ('8)', 'cool.png', 'Cool', 19, 19, 7, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':lol:', 'laugh.png', 'Laughing', 19, 19, 8, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':x', 'mad.png', 'Mad', 19, 19, 9, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':P', 'icon_razz.gif', 'Razz', 19, 19, 10, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':oops:', 'embarrassed.png', 'Embarassed', 19, 19, 11, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':cry:', 'cry.png', 'Crying or Very sad', 19, 19, 12, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':evil:', 'evil.png', 'Evil or Very Mad', 19, 19, 13, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':twisted:', 'twisted.png', 'Twisted Evil', 19, 19, 14, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':roll:', 'rolleyes.png', 'Rolling Eyes', 19, 19, 19, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (';)', 'wink.png', 'Wink', 19, 19, 16, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':!:', 'exclaim.png', 'Exclamation', 19, 19, 17, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':?:', 'question.png', 'Question', 19, 19, 18, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':idea:', 'idea.png', 'Idea', 19, 19, 19, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':arrow:', 'arrow.png', 'Arrow', 19, 19, 20, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':|', 'neutral.png', 'Neutral', 19, 19, 21, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':mrgreen:', 'mrgreen.png', 'Mr. Green', 19, 19, 22, 0)&quot;);
 
 $admin_data = $_CLASS['core_db']-&gt;escape('a:6:{s:7:&quot;viewimg&quot;;b:1;s:9:&quot;viewflash&quot;;b:1;s:11:&quot;viewsmilies&quot;;b:1;s:8:&quot;viewsigs&quot;;b:1;s:11:&quot;viewavatars&quot;;b:1;s:11:&quot;viewcensors&quot;;b:1;}');
 $guest_data = $_CLASS['core_db']-&gt;escape('a:6:{s:7:&quot;viewimg&quot;;b:1;s:9:&quot;viewflash&quot;;b:1;s:11:&quot;viewsmilies&quot;;b:1;s:8:&quot;viewsigs&quot;;b:1;s:11:&quot;viewavatars&quot;;b:1;s:11:&quot;viewcensors&quot;;b:1;}');
 $bot_data = $_CLASS['core_db']-&gt;escape('a:6:{s:7:&quot;viewimg&quot;;b:1;s:9:&quot;viewflash&quot;;b:1;s:11:&quot;viewsmilies&quot;;b:1;s:8:&quot;viewsigs&quot;;b:1;s:11:&quot;viewavatars&quot;;b:1;s:11:&quot;viewcensors&quot;;b:1;}');
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (0, 2, 1, 'Anonymous', '', '', '', $time, '', 1, 0, 0, 0, 0, '$guest_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (1, 2, 4, 'admin', '21232f297a57a5a743894a0e4a801fc3', 'md5', '', $time, '', '', 1, 1, 1, 1, 1, '$admin_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Googlebot', '', '', '', $time, '216.239.46.,64.68.8,66.249.64.', 'Googlebot/', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'MSN', '', '', '', $time, '65.54.188.', 'msnbot/', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Yahoo', '', '', '', $time, '66.196.90.1', 'Yahoo! Slurp', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Alexa', '', '', '', $time, '66.28.250.,209.237.238.', 'ia_archiver', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'NaverBot', '', '', '', $time, '218.145.25.,61.78.61.,61.78.61.', 'NaverBot-', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Jetbot', '', '', '', $time, '64.71.144.', 'Jetbot/', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (0, 2, 1, 'Anonymous', '', '', '', $time, '', 1, 0, 0, 0, 0, '$guest_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (1, 2, 4, 'admin', '21232f297a57a5a743894a0e4a801fc3', 'md5', '', $time, '', '', 1, 1, 1, 1, 1, '$admin_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Googlebot', '', '', '', $time, '216.239.46.,64.68.8,66.249.64.', 'Googlebot/', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'MSN', '', '', '', $time, '65.54.188.', 'msnbot/', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Yahoo', '', '', '', $time, '66.196.90.1', 'Yahoo! Slurp', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Alexa', '', '', '', $time, '66.28.250.,209.237.238.', 'ia_archiver', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'NaverBot', '', '', '', $time, '218.145.25.,61.78.61.,61.78.61.', 'NaverBot-', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Jetbot', '', '', '', $time, '64.71.144.', 'Jetbot/', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
 
 // Forums
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_list', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_read', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_post', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_reply', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_quote', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_edit', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_user_lock', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_delete', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_bump', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_poll', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_vote', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_votechg', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_announce', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_sticky', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_attach', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_download', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_icons', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_html', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_bbcode', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_smilies', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_img', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_flash', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_sigs', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_search', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_email', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_rate', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_ignoreflood', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_postcount', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_moderate', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_report', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_subscribe', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_list', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_read', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_post', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_reply', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_quote', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_edit', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_user_lock', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_delete', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_bump', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_poll', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_vote', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_votechg', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_announce', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_sticky', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_attach', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_download', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_icons', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_html', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_bbcode', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_smilies', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_img', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_flash', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_sigs', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_search', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_email', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_rate', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_ignoreflood', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_postcount', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_moderate', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_report', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_subscribe', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_edit', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_delete', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_move', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_lock', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_split', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_merge', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_approve', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_unrate', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_auth', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_ip', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_info', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_edit', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_delete', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_move', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_lock', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_split', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_merge', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_approve', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_unrate', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_auth', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_ip', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_info', 1, 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sendemail', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_readpm', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sendpm', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sendim', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_hideonline', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_viewonline', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_viewprofile', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgavatar', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chggrp', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgemail', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgname', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgpasswd', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgcensors', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_search', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_savedrafts', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_download', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_attach', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sig', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sendemail', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_readpm', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sendpm', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sendim', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_hideonline', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_viewonline', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_viewprofile', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgavatar', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chggrp', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgemail', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgname', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgpasswd', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgcensors', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_search', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_savedrafts', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_download', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_attach', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sig', 1)&quot;);
 
 // START: This should be replaced by beta
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_server', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_defaults', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_board', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_cookies', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_clearlogs', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_words', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_icons', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_bbsmiley_code', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_attach', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_email', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_styles', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_user', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_useradd', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_userdel', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_ranks', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_ban', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_names', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_group', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_groupadd', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_groupdel', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_forum', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_forumadd', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_forumdel', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_prune', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_auth', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authmods', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authadmins', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authusers', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authgroups', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authdeps', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_backup', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_restore', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_search', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_events', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_cron', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_server', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_defaults', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_board', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_cookies', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_clearlogs', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_words', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_icons', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_bbsmiley_code', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_attach', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_email', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_styles', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_user', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_useradd', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_userdel', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_ranks', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_ban', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_names', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_group', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_groupadd', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_groupdel', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_forum', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_forumadd', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_forumdel', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_prune', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_auth', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authmods', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authadmins', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authusers', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authgroups', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authdeps', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_backup', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_restore', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_search', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_events', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_cron', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_attach', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_html', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_bbsmiley_code', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_smilies', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_download', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_report', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_edit', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_printpm', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_emailpm', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_forward', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_delete', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_img', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_flash', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_attach', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_html', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_bbsmiley_code', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_smilies', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_download', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_report', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_edit', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_printpm', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_emailpm', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_forward', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_delete', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_img', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_flash', 1)&quot;);
 
 // ADMINISTRATOR group
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 0, auth_option_id, 1 FROM &quot;.$install_prefix.&quot;forums_auth_options WHERE auth_option LIKE 'u_%'&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 0, auth_option_id, 1 FROM &quot;.$install_prefix.&quot;forums_auth_options WHERE auth_option LIKE 'a_%'&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 1, auth_option_id, 1 FROM &quot;.$install_prefix.&quot;forums_auth_options WHERE auth_option IN ('f_poll', 'f_announce', 'f_sticky', 'f_attach', 'f_html')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 2, auth_option_id, 1 FROM &quot;.$install_prefix.&quot;forums_auth_options WHERE auth_option IN ('f_poll', 'f_announce', 'f_sticky', 'f_attach', 'f_html')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 0, auth_option_id, 1 FROM &quot;.$table_prefix.&quot;forums_auth_options WHERE auth_option LIKE 'u_%'&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 0, auth_option_id, 1 FROM &quot;.$table_prefix.&quot;forums_auth_options WHERE auth_option LIKE 'a_%'&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 1, auth_option_id, 1 FROM &quot;.$table_prefix.&quot;forums_auth_options WHERE auth_option IN ('f_poll', 'f_announce', 'f_sticky', 'f_attach', 'f_html')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 2, auth_option_id, 1 FROM &quot;.$table_prefix.&quot;forums_auth_options WHERE auth_option IN ('f_poll', 'f_announce', 'f_sticky', 'f_attach', 'f_html')&quot;);
 
 // SUPER MODERATOR group
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 6, 0, auth_option_id, 1 FROM &quot;.$install_prefix.&quot;forums_auth_options WHERE auth_option LIKE 'm_%'&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 6, 0, auth_option_id, 1 FROM &quot;.$table_prefix.&quot;forums_auth_options WHERE auth_option LIKE 'm_%'&quot;);
 
 # REGISTERED/REGISTERED COPPA groups - common forum rights
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 0, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option LIKE 'u_%' AND auth_option NOT IN ('u_chggrp', 'u_viewonline', 'u_chgname');
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 1, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_subscribe');
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 2, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_votechg', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_report', 'f_subscribe');
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 0, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option LIKE 'u_%' AND auth_option NOT IN ('u_chggrp', 'u_viewonline', 'u_chgname');
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 1, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_subscribe');
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 2, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_votechg', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_report', 'f_subscribe');
 
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 5, 0, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option LIKE 'u_%' AND auth_option NOT IN ('u_chgcensors', 'u_chggrp', 'u_viewonline', 'u_chgname');
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 5, 1, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_subscribe');
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 5, 2, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_votechg', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_report', 'f_subscribe');
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 5, 0, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option LIKE 'u_%' AND auth_option NOT IN ('u_chgcensors', 'u_chggrp', 'u_viewonline', 'u_chgname');
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 5, 1, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_subscribe');
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 5, 2, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_votechg', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_report', 'f_subscribe');
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_attachments', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_bbcode', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_html', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_html_tags', 'b,i,u,pre', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_smilies', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_topic_notify', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_forum_notify', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_avatar_local', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_avatar_remote', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_avatar_upload', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_nocensors', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_bookmarks', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_disable_msg', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_email_form', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_login_attempts', '3', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('min_ratings', '10', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('posts_per_page', '10', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('topics_per_page', '25', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('hot_threshold', '25', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_path', 'images/avatars/upload', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_gallery_path', 'images/avatars/gallery', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smilies_path', 'images/smilies', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('icons_path', 'images/icons', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('upload_icons_path', 'images/upload_icons', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('ranks_path', 'images/ranks', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('email_enable', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_privmsg', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_attachments', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_bbcode', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_html', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_html_tags', 'b,i,u,pre', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_smilies', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_topic_notify', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_forum_notify', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_avatar_local', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_avatar_remote', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_avatar_upload', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_nocensors', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_bookmarks', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_disable_msg', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_email_form', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_login_attempts', '3', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('min_ratings', '10', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('posts_per_page', '10', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('topics_per_page', '25', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('hot_threshold', '25', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_path', 'images/avatars/upload', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_gallery_path', 'images/avatars/gallery', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smilies_path', 'images/smilies', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('icons_path', 'images/icons', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('upload_icons_path', 'images/upload_icons', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('ranks_path', 'images/ranks', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('email_enable', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_privmsg', '1', 0)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_online_time', '5', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_online', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_birthdays', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_moderators', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_jumpbox', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_search', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_search_upd', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_search_phr', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_db_lastread', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_db_track', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_onlinetrack', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_online_time', '5', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_online', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_birthdays', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_moderators', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_jumpbox', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_search', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_search_upd', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_search_phr', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_db_lastread', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_db_track', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_onlinetrack', '1', 0)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('search_gc', '7200', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('queue_interval', '3', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('version', '2.1.2', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_post_chars', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_post_smilies', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_quote_depth', '3', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_sig_chars', '255', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_poll_options', '10', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('min_search_chars', '3', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_search_chars', '10', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('edit_time', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('display_last_edited', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_email_sig', 'Thanks, The Management', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_email', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_contact', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_startdate', &quot;.gmtime().&quot;, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('search_gc', '7200', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('queue_interval', '3', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('version', '2.1.2', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_post_chars', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_post_smilies', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_quote_depth', '3', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_sig_chars', '255', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_poll_options', '10', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('min_search_chars', '3', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_search_chars', '10', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('edit_time', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('display_last_edited', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_email_sig', 'Thanks, The Management', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_email', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_contact', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_startdate', &quot;.gmtime().&quot;, 0)&quot;);
 
 // to be removed
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('email_function_name', 'mail', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('email_package_size', '50', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_delivery', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_host', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_port', '25', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_auth_method', 'PLAIN', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_username', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_password', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('email_function_name', 'mail', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('email_package_size', '50', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_delivery', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_host', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_port', '25', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_auth_method', 'PLAIN', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_username', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_password', '', 0)&quot;);
 ////
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_enable', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_host', 'jabber.org', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_port', '5222', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_username', 'viperal_site', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_password', '19site83', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_resource', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_enable', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_host', 'jabber.org', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_port', '5222', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_username', 'viperal_site', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_password', '19site83', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_resource', '', 0)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('flood_interval', '15', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('bump_interval', '10h', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('search_interval', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_filesize', '6144', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_min_width', '20', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_min_height', '20', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_max_width', '90', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_max_height', '90', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('flood_interval', '15', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('bump_interval', '10h', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('search_interval', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_filesize', '6144', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_min_width', '20', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_min_height', '20', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_max_width', '90', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_max_height', '90', 0)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('lastread', '432000', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('display_order', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_filesize', '262144', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_filesize_pm', '262144', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('attachment_quota', '52428800', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_attachments', '3', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_attachments_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_pm_attach', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('upload_path', 'files', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_display_inlined', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('secure_downloads', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('secure_allow_deny', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('secure_allow_empty_referer', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_max_width', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_max_height', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_link_width', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_link_height', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_create_thumbnail', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_min_thumb_filesize', '12000', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_imagick', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('pm_max_boxes', '4', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('pm_max_msgs', '50', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_html_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_bbsmiley_code_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_smilies_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_download_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_report_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_online_guests', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_img_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_flash_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('enable_pm_icons', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('pm_edit_time', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_mass_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('record_online_users', '2', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('record_online_date', '1117686190', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('newest_user_id', '334', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('newest_username', 'Grendal', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_users', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_posts', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_topics', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_files', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('upload_dir_size', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('search_last_gc', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('last_queue_run', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('full_folder_action', '2', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('bump_type', 'm', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('enable_karma', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_img', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_hide_emails', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_bbsmiley_code', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_flash', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_html', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_img', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_smilies', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_post_urls', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('database_last_gc', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('lastread', '432000', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('display_order', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_filesize', '262144', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_filesize_pm', '262144', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('attachment_quota', '52428800', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_attachments', '3', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_attachments_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_pm_attach', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('upload_path', 'files', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_display_inlined', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('secure_downloads', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('secure_allow_deny', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('secure_allow_empty_referer', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_max_width', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_max_height', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_link_width', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_link_height', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_create_thumbnail', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_min_thumb_filesize', '12000', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_imagick', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('pm_max_boxes', '4', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('pm_max_msgs', '50', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_html_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_bbsmiley_code_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_smilies_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_download_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_report_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_online_guests', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_img_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_flash_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('enable_pm_icons', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('pm_edit_time', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_mass_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('record_online_users', '2', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('record_online_date', '1117686190', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('newest_user_id', '334', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('newest_username', 'Grendal', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_users', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_posts', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_topics', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_files', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('upload_dir_size', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('search_last_gc', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('last_queue_run', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('full_folder_action', '2', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('bump_type', 'm', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('enable_karma', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_img', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_hide_emails', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_bbsmiley_code', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_flash', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_html', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_img', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_smilies', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_post_urls', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('database_last_gc', '0', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'MAIN', 'main', 1, 1, 'front\r\nsubscribed\r\nbookmarks,cfg_allow_bookmarks\r\ndrafts', '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'PM', 'pm', 2, 1, 'view_messages\r\ncompose\r\nunread\r\ndrafts\r\noptions', 'cfg_allow_privmsg')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'PROFILE', 'profile', 3, 1, 'profile_info\r\nreg_details\r\nsignature\r\navatar', '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'PREFS', 'prefs', 4, 1, 'personal\r\nview\r\npost', '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'ZEBRA', 'zebra', 5, 1, 'friends\r\nfoes', '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'ATTACHMENTS', 'attachments', 6, 1, '', 'acl_u_attach &amp;&amp; cfg_allow_attachments')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'GROUPS', 'groups', 7, 1, '', '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'CALENDER', 'calender', 3, 1, 'month_view\r\nday_view\r\nadd_event', '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('mcp', 'MAIN', 'main', 1, 1, 'front\r\nforum_view\r\ntopic_view\r\npost_details', 'acl_m_')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('mcp', 'QUEUE', 'queue', 2, 1, 'unapproved_topics\r\nunapproved_posts\r\nreports', 'acl_m_approve')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'MAIN', 'main', 1, 1, 'front\r\nsubscribed\r\nbookmarks,cfg_allow_bookmarks\r\ndrafts', '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'PM', 'pm', 2, 1, 'view_messages\r\ncompose\r\nunread\r\ndrafts\r\noptions', 'cfg_allow_privmsg')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'PROFILE', 'profile', 3, 1, 'profile_info\r\nreg_details\r\nsignature\r\navatar', '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'PREFS', 'prefs', 4, 1, 'personal\r\nview\r\npost', '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'ZEBRA', 'zebra', 5, 1, 'friends\r\nfoes', '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'ATTACHMENTS', 'attachments', 6, 1, '', 'acl_u_attach &amp;&amp; cfg_allow_attachments')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'GROUPS', 'groups', 7, 1, '', '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'CALENDER', 'calender', 3, 1, 'month_view\r\nday_view\r\nadd_event', '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('mcp', 'MAIN', 'main', 1, 1, 'front\r\nforum_view\r\ntopic_view\r\npost_details', 'acl_m_')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('mcp', 'QUEUE', 'queue', 2, 1, 'unapproved_topics\r\nunapproved_posts\r\nreports', 'acl_m_approve')&quot;);
 
 ?&gt;
\ No newline at end of file

Modified: cms/branches/1.0alpha1/install/build_tables.php
===================================================================
--- cms/branches/1.0alpha1/install/build_tables.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/install/build_tables.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -21,8 +21,6 @@
 $Id$
 */
 
-$install_prefix = 'test_';
-
 function field_unix_time($name, $null = false)
 {
 	global $_CLASS;
@@ -34,7 +32,7 @@
 	Admin Auth Table
 */
 
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'admins');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'admins');
 
 $_CLASS['core_db']-&gt;add_table_field_char('admin_section', 100);
 
@@ -52,7 +50,7 @@
 /*
 	Blocks Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'blocks');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'blocks');
 
 $_CLASS['core_db']-&gt;add_table_field_int('block_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('block_title', 100);
@@ -78,7 +76,7 @@
 /*
 	Config Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'config');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'config');
 
 $_CLASS['core_db']-&gt;add_table_field_char('config_section', 20);
 $_CLASS['core_db']-&gt;add_table_field_char('config_name', 20);
@@ -95,7 +93,7 @@
 	Groups Table
 */
 
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'groups');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'groups');
 
 // this section needs updating, with null fields
 $_CLASS['core_db']-&gt;add_table_field_int('group_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
@@ -127,7 +125,7 @@
 /*
 	Groups Members Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'groups_members');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'groups_members');
 
 $_CLASS['core_db']-&gt;add_table_field_int('group_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
@@ -142,7 +140,7 @@
 /*
 	Modules Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'modules');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'modules');
 
 $_CLASS['core_db']-&gt;add_table_field_int('module_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('module_name', 100);
@@ -162,7 +160,7 @@
 /*
 	Sessions Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'sessions');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'sessions');
 
 $_CLASS['core_db']-&gt;add_table_field_char('session_id', 40);
 $_CLASS['core_db']-&gt;add_table_field_int('session_user_id', array('max' =&gt; 16000000));
@@ -189,7 +187,7 @@
 /*
 	Sessions Auto login Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'sessions_auto_login');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'sessions_auto_login');
 
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_char('auto_login_browser', 255);
@@ -203,7 +201,7 @@
 /*
 	Smiles Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'smilies');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'smilies');
 
 $_CLASS['core_db']-&gt;add_table_field_int('smiley_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 
@@ -226,7 +224,7 @@
 `user_unread_privmsg` tinyint(4) unsigned NOT NULL default '0',
 */
 
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'users');
+$_CLASS['core_db']-&gt;table_create('start', $user_prefix.'users');
 
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('username', 80);
@@ -324,7 +322,7 @@
 /*
 	Attachments Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_attachments');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_attachments');
 
 $_CLASS['core_db']-&gt;add_table_field_int('attach_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('post_msg_id', array('max' =&gt; 16000000));
@@ -352,7 +350,7 @@
 /*
 	Forums Auth Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_auth');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_auth');
 
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000, 'null' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('group_id', array('max' =&gt; 16000000, 'null' =&gt; true));
@@ -369,7 +367,7 @@
 /*
 	Forums Auth Options Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_auth_options');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_auth_options');
 
 $_CLASS['core_db']-&gt;add_table_field_int('auth_option_id', array('max' =&gt; 2000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('auth_option', 20);
@@ -385,7 +383,7 @@
 /*
 	Forums Auth Presets Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_auth_presets');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_auth_presets');
 
 $_CLASS['core_db']-&gt;add_table_field_int('preset_id', array('max' =&gt; 16000));
 $_CLASS['core_db']-&gt;add_table_field_int('preset_user_id', array('max' =&gt; 16000000));
@@ -402,7 +400,7 @@
 /*
 	Forums Bookmarks Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_bookmarks');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_bookmarks');
 
 $_CLASS['core_db']-&gt;add_table_field_int('topic_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
@@ -416,7 +414,7 @@
 /*
 	Forums Config Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_config');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_config');
 
 $_CLASS['core_db']-&gt;add_table_field_char('config_name', 100);
 $_CLASS['core_db']-&gt;add_table_field_char('config_value', 255);
@@ -431,7 +429,7 @@
 	Forums Disallow Table
 */
 /*
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_disallow');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_disallow');
 
 $_CLASS['core_db']-&gt;add_table_field_int('disallow_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('disallow_username', 30);
@@ -444,7 +442,7 @@
 /*
 	Forums Drafts Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_drafts');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_drafts');
 
 $_CLASS['core_db']-&gt;add_table_field_int('draft_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
@@ -463,7 +461,7 @@
 /*
 	Forums Extensions Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_extensions');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_extensions');
 
 $_CLASS['core_db']-&gt;add_table_field_int('extension_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('group_id', array('max' =&gt; 16000000));
@@ -476,7 +474,7 @@
 /*
 	Forums Extension Groups Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_extension_groups');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_extension_groups');
 
 $_CLASS['core_db']-&gt;add_table_field_int('group_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('group_name', 20);
@@ -495,7 +493,7 @@
 /*
 	Forums Forums Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_forums');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_forums');
 
 $_CLASS['core_db']-&gt;add_table_field_int('forum_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('parent_id', array('max' =&gt; 16000));
@@ -546,7 +544,7 @@
 /*
 	Forums POsts Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_posts');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_posts');
 
 $_CLASS['core_db']-&gt;add_table_field_int('post_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('topic_id', array('max' =&gt; 16000000));
@@ -588,7 +586,7 @@
 /*
 	Forums Topics Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_topics');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_topics');
 
 $_CLASS['core_db']-&gt;add_table_field_int('topic_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('forum_id', array('max' =&gt; 16000000));
@@ -639,7 +637,7 @@
 /*
 	Forums Extensions Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_tracking');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_tracking');
 
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('forum_id', array('max' =&gt; 16000000));
@@ -655,7 +653,7 @@
 /*
 	Forums Icons Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_icons');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_icons');
 
 $_CLASS['core_db']-&gt;add_table_field_int('icons_id', array('max' =&gt; 2000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('icons_url', 50);
@@ -672,7 +670,7 @@
 	Forums Forums Watch Table
 */
 
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_watch');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_watch');
 
 $_CLASS['core_db']-&gt;add_table_field_int('forum_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('topic_id', array('max' =&gt; 16000000));
@@ -689,7 +687,7 @@
 /*
 	Forums Modules Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_modules');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_modules');
 
 $_CLASS['core_db']-&gt;add_table_field_int('module_id', array('max' =&gt; 2000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('module_type', 3);
@@ -709,7 +707,7 @@
 /*
 	Forums Moderator Cache Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_moderator_cache');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_moderator_cache');
 
 $_CLASS['core_db']-&gt;add_table_field_int('forum_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
@@ -728,7 +726,7 @@
 /*
 	Forums Poll Results Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_poll_results');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_poll_results');
 
 $_CLASS['core_db']-&gt;add_table_field_int('poll_option_id', array('max' =&gt; 2000));
 $_CLASS['core_db']-&gt;add_table_field_int('topic_id', array('max' =&gt; 16000000));
@@ -743,7 +741,7 @@
 /*
 	Forums Poll Voters Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_poll_voters');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_poll_voters');
 
 $_CLASS['core_db']-&gt;add_table_field_int('topic_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('poll_option_id', array('max' =&gt; 2000));
@@ -761,7 +759,7 @@
 /*
 	Forums Poll Voters Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_ranks');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_ranks');
 
 $_CLASS['core_db']-&gt;add_table_field_int('rank_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('rank_title', 50);
@@ -776,7 +774,7 @@
 /*
 	Forums Words Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_search_wordlist');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_search_wordlist');
 
 $_CLASS['core_db']-&gt;add_table_field_int('word_id', array('max' =&gt; 3000000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('word_text', 100);
@@ -790,7 +788,7 @@
 /*
 	Forums search_wordmatch Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_search_wordmatch');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_search_wordmatch');
 
 $_CLASS['core_db']-&gt;add_table_field_int('post_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('word_id', array('max' =&gt; 3000000000));
@@ -803,7 +801,7 @@
 /*
 	Forums Words Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_words');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_words');
 
 $_CLASS['core_db']-&gt;add_table_field_int('word_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('word', 100);
@@ -816,7 +814,7 @@
 /*
 	Forums Zebra Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_zebra');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_zebra');
 
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('zebra_id', array('max' =&gt; 16000000));
@@ -833,7 +831,7 @@
 /*
 	Forums Log Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_log');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_log');
 
 $_CLASS['core_db']-&gt;add_table_field_int('log_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('log_type', array('max' =&gt; 200));
@@ -857,7 +855,7 @@
 
 /*
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_privmsgs');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_privmsgs');
 
 $_CLASS['core_db']-&gt;add_table_field_int('msg_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('root_level', array('max' =&gt; 16000000));
@@ -896,7 +894,7 @@
 /*
 	Forums Log Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_privmsgs_folder');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_privmsgs_folder');
 
 $_CLASS['core_db']-&gt;add_table_field_int('folder_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
@@ -911,7 +909,7 @@
 /*
 	Forums Log Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_privmsgs_rules');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_privmsgs_rules');
 
 $_CLASS['core_db']-&gt;add_table_field_int('rule_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
@@ -930,7 +928,7 @@
 /*
 	Forums Log Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_privmsgs_to');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_privmsgs_to');
 
 $_CLASS['core_db']-&gt;add_table_field_int('msg_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));

Modified: cms/branches/1.0alpha1/install/installer.php
===================================================================
--- cms/branches/1.0alpha1/install/installer.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/install/installer.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -20,6 +20,424 @@
 
 $Id$
 */
+define('VIPERAL', 'INSTALLER');
 
-// LOL, MADE YOU LOOK
+error_reporting(0);
+
+//echo str_replace('\\','/', dirname(getenv('SCRIPT_FILENAME'))).'/'; die;
+$site_file_root = '../';
+
+if (!extension_loaded('mbstring'))
+{
+	require_once($site_file_root.'includes/compatiblity/mbstring.php');
+}
+
+set_magic_quotes_runtime(0);
+mb_internal_encoding('UTF-8');
+
+define('STRIP_SLASHES', get_magic_quotes_gpc());
+
+// Remove registered globals
+if ((bool) ini_get('register_globals'))
+{
+	foreach ($_REQUEST as $var_name =&gt; $value)
+	{
+		unset($$var_name);
+	}
+}
+
+require_once($site_file_root.'includes/functions.php');
+require_once($site_file_root.'includes/display/template.php');
+
+load_class(false, 'core_template');
+
+$holding_array = array(
+	'mysql'		=&gt; array(
+		'lang'			=&gt; 'MySQL',
+		'extension'		=&gt; 'mysql', 
+	),
+	'mysql3'			=&gt; array(
+		'lang'			=&gt; 'MySQL3',
+		'extension'		=&gt; 'mysql',
+	),
+	'mysqli'	=&gt; array(
+		'lang'			=&gt; 'MySQL 4.1.x',
+		'extension'		=&gt; 'mysqli', 
+	),
+	'mssql'		=&gt; array(
+		'lang'			=&gt; 'MS SQL Server 7/2000',
+		'extension'		=&gt; 'mssql', 
+	),
+	'postgres' =&gt; array(
+		'lang'			=&gt; 'PostgreSQL',
+		'extension'		=&gt; 'pgsql', 
+	),
+	'sqlite'		=&gt; array(
+		'lang'			=&gt; 'SQLite',
+		'extension'		=&gt; 'sqlite', 
+	),
+	'sqlite_pdo'		=&gt; array(
+		'lang'			=&gt; 'SQLite 3 (PDO)',
+		'extension'		=&gt; 'pdo_sqlite', 
+	)
+);
+
+$database_array = array();
+$database_options = '';
+$db_layer = isset($_POST['layer']) ? $_POST['layer'] : false;
+
+foreach ($holding_array as $name =&gt; $setting)
+{
+	if (extension_loaded($setting['extension']))
+	{
+		$database_options .= '&lt;option value=&quot;' . $name . '&quot;'.(($db_layer == $name) ? ' selected=&quot;selected&quot;' : '').'&gt;' . $setting['lang'] . '&lt;/option&gt;';
+		$database_array[$name] = $setting;
+	}
+}
+
+$error = array();
+$stage = isset($_POST['stage']) ? (int) $_POST['stage'] : 0;
+
+if ($stage &amp;&amp; !$_POST['agreement_signed'])
+{
+	$stage = 0;
+}
+
+if ($stage === 3)
+{
+	if (file_exists($site_file_root.'config.php'))
+	{
+		require_once($site_file_root.'config.php');
+	}
+
+	$site_name		= get_variable('site_name', 'POST');
+	$site_domain	= get_variable('site_domain', 'POST');
+	$site_path		= get_variable('site_path', 'POST');
+	$site_port		= get_variable('site_port', 'POST');
+
+	$cookie_domain	= get_variable('cookie_domain', 'POST');
+	$cookie_path	= get_variable('cookie_path', 'POST');
+	$cookie_name	= get_variable('cookie_name', 'POST');
+
+	$username		= get_variable('username', 'POST');
+	$password		= get_variable('password', 'POST');
+	$password_confirm= get_variable('password_confirm', 'POST');
+	$email			= get_variable('email', 'POST');
+	$email_confirm	= get_variable('email_confirm', 'POST');
+
+	if (!$username)
+	{
+		$error[] = 'Invalid Username';
+	}
+
+	if (!$password || ($password !== $password_confirm))
+	{
+		$error[] = 'Passwords do not match.';
+	}
+
+	if (!$email || ($email !== $email_confirm))
+	{
+		$error[] = 'Emails Address do not match.';
+	}
+
+	if (!$site_domain)
+	{
+		$error[] = 'Site Domain is empty.';
+	}
+
+	if (!$site_domain)
+	{
+		$error[] = 'Site Domain is empty.';
+	}
+
+	if (isset($site_db))
+	{
+		load_class($site_file_root.'includes/db/'.$site_db['type'].'.php', 'core_db', 'db_'.$site_db['type']);
+
+		$_CLASS['core_db']-&gt;connect($site_db);
+		$config_content = '';
+	}
+	else
+	{
+		$error[] = '&lt;b&gt;Please upload the content listed in the &quot;Config.php Content&quot; Section&lt;/b&gt;';
+		$config_content = get_variable('config_content', 'POST');
+	}
+
+	if (empty($error))
+	{
+		require_once($site_file_root.'includes/tables.php');
+		require_once($site_file_root.'includes/cache/cache.php');
+		require_once($site_file_root.'includes/cache/cache_' . $acm_type . '.php');
+
+		load_class(false, 'core_cache', 'cache_'.$acm_type);
+
+		set_core_config('global', 'site_name', $site_name, false);
+		set_core_config('server', 'site_domain', $site_domain, false);
+		set_core_config('server', 'site_path', $site_path, false);
+		set_core_config('server', 'site_port', $site_port, false);
+		set_core_config('server', 'cookie_domain', $cookie_domain, false);
+		set_core_config('server', 'cookie_path', $cookie_path, false);
+		set_core_config('server', 'cookie_name', $cookie_name, false);
+		set_core_config('server', 'site_secure', 0, false);
+
+		set_core_config('user', 'newest_username', $username, true);
+		
+		$user_update = array(
+			'username'				=&gt; $username,
+			'user_password'			=&gt; encode_password($password, 'md5'),
+			'user_password_encoding'=&gt; 'md5',
+			'user_email'			=&gt; $email
+		);
+
+		$_CLASS['core_db']-&gt;query('UPDATE ' . USERS_TABLE . ' SET ' . $_CLASS['core_db']-&gt;sql_build_array('UPDATE', $user_update). ' WHERE user_id = 2');
+
+		$_CLASS['core_template']-&gt;assign_array(array(
+			'admin_link'		=&gt; generate_link(false, array('full' =&gt; true, 'sid' =&gt; false, 'admin' =&gt; true)),
+			'username'			=&gt; $username,
+		));
+
+		$_CLASS['core_template']-&gt;display('installer/complete.html');
+		
+		script_close();
+	}
+
+	$_CLASS['core_template']-&gt;assign_array(array(
+		'site_name'			=&gt; $site_name,
+		'site_domain'		=&gt; $site_domain,
+		'site_path'			=&gt; $site_path,
+		'site_port'			=&gt; $site_port,
+		'cookie_domain'		=&gt; $cookie_domain,
+		'cookie_path'		=&gt; $cookie_path,
+		'cookie_name'		=&gt; $cookie_name,
+		'username'			=&gt; $username,
+		'password'			=&gt; $password,
+		'password_confirm'	=&gt; $password_confirm,
+		'email'				=&gt; $email,
+		'email_confirm'		=&gt; $email_confirm,
+		'error'				=&gt; empty($error) ? false : implode('&lt;br/&gt;', $error),
+		'config_content'	=&gt; $config_content
+	));
+
+	$_CLASS['core_template']-&gt;display('installer/stage2.html');
+
+	script_close();
+}
+
+if ($stage === 2)
+{
+	if ($db_layer &amp;&amp; in_array($db_layer, array_keys($database_array)))
+	{
+		load_class($site_file_root.'includes/db/'.$db_layer.'.php', 'core_db', 'db_'.$db_layer);
+
+		$site_db = array();
+		$site_db['type']		= $db_layer;
+		$site_db['persistent']	= false;
+
+		$_CLASS['core_db']-&gt;report_error(false);
+
+		if (strpos($db_layer, 'sqlite') === false)
+		{
+			$site_db['server']		= get_variable('server', 'POST');
+			$site_db['port']		= get_variable('port', 'POST');
+			$site_db['database']	= get_variable('database', 'POST');
+			$site_db['username']	= get_variable('username', 'POST');
+			$site_db['password']	= get_variable('password', 'POST');
+			
+			if (!$site_db['username'] || !$site_db['database'])
+			{
+				$error[] = 'Required Information missing';
+			}
+		}
+		else
+		{
+			$site_db['file'] = get_variable('file_'.$db_layer, 'POST');
+
+			if (!$site_db['file'])
+			{
+				$error[] = 'Required Information missing';
+			}
+		}
+	}
+	else
+	{
+		$error[] = 'Database not supported on your system';
+	}
+
+	if (empty($error) &amp;&amp; !$_CLASS['core_db']-&gt;connect($site_db))
+	{
+		if (!$_CLASS['core_db']-&gt;link_identifier)
+		{
+			$db_error = $_CLASS['core_db']-&gt;sql_error(false, true);
+			$error[] = 'Could not connect to the database'.(($db_error['message']) ? '&lt;br/&gt;'.$db_error['message'] : '');
+		}
+		else
+		{
+			if (isset($_POST['test']))
+			{
+				$error[] = 'Database Selection fail, will attempt to create in next step';
+			}
+			else
+			{
+				switch ($db_layer)
+				{
+					case 'mysql':
+					case 'mysqli':
+						$_CLASS['core_db']-&gt;query('CREATE DATABASE '.$site_db['database'].' DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci');
+					break;
+
+					case 'mysql3':
+						$_CLASS['core_db']-&gt;query('CREATE DATABASE  '.$site_db['database']);
+					break;
+
+					case 'postgres':
+						if (strtoupper(substr(PHP_OS, 0, 3)) !== 'WIN')
+						{
+							$_CLASS['core_db']-&gt;query('CREATE DATABASE '.$site_db['database'] .' WITH ENCODING UNICODE');
+						}
+						else
+						{
+							$_CLASS['core_db']-&gt;query('CREATE DATABASE '.$site_db['database']);
+						}
+					break;
+				}
+
+				$_CLASS['core_db']-&gt;disconnect();
+				$_CLASS['core_db']-&gt;connect($site_db);
+
+				if (!$_CLASS['core_db']-&gt;connect($site_db))
+				{
+					$error[] = 'Database Creation Failed';
+				}
+			}
+		}
+	}
+	
+	if (empty($error))
+	{
+		$user_prefix	= get_variable('user_prefix', 'POST');
+		$table_prefix	= get_variable('table_prefix', 'POST');
+		
+		require_once($site_file_root.'includes/tables.php');
+	
+		$sql = 'SELECT * FROM ' . CORE_CONFIG_TABLE;
+		$result = $_CLASS['core_db']-&gt;query($sql);
+		$_CLASS['core_db']-&gt;free_result($result);
+	
+		if ($result)
+		{
+			$error[] = 'Creation Failed: Current installation found';
+		}
+	}
+
+	if (isset($_POST['test']) || !empty($error))
+	{
+		$stage = 1;
+	}
+	else
+	{
+		$_CLASS['core_db']-&gt;transaction();
+		require($site_file_root.'install/build_tables.php');
+		$_CLASS['core_db']-&gt;transaction('commit');
+	
+		$_CLASS['core_db']-&gt;transaction();
+		require($site_file_root.'install/build_data.php');
+		$_CLASS['core_db']-&gt;transaction('commit');
+		
+		$_CLASS['core_db']-&gt;optimize_tables();
+		
+		$_CLASS['core_db']-&gt;report_error(true);
+	
+		$config_data = &quot;&lt;?php\n\n&quot;;
+
+		foreach ($site_db as $name =&gt; $value)
+		{
+			if (is_bool($value))
+			{
+				$value = ($value) ? 'true' : 'false';
+			}
+			elseif (!is_int($value))
+			{
+				$value = &quot;'$value'&quot;;
+			}
+
+			$config_data .= &quot;\$site_db['$name'] = $value;\n&quot;;
+		}
+
+		$config_data .= &quot;\n&quot;;
+		$config_data .= &quot;\$table_prefix\t= '$table_prefix';\n&quot;;
+		$config_data .= &quot;\$user_prefix\t= '$user_prefix';\n\n&quot;;
+		$config_data .= &quot;\$acm_type\t\t= 'file';\n\n&quot;;
+		$config_data .= &quot;if (!defined('INDEX_PAGE'))\n{\n\tdefine('INDEX_PAGE', 'index.php');\n}\n\n&quot;;
+		$config_data .= &quot;if (!defined('ADMIN_PAGE'))\n{\n\tdefine('ADMIN_PAGE', 'admin.php');\n}\n\n&quot;;
+		$config_data .= '?&gt;';
+
+		if (file_put_contents($site_file_root.'config.php', $config_data))
+		{
+			$config_data = false;
+		}
+		else
+		{
+			$error[] = 'Failed to write to your config.php file&lt;br/&gt;Please upload the content listed in the &quot;Config.php Content&quot; Section';
+		}
+		
+		$path = dirname(getenv('SCRIPT_NAME'));
+
+		if (substr($path, -1) != '/')
+		{
+			$path .= '/';
+		}
+
+		$path = str_replace('install/', '', $path);
+		$domain = !empty($_SERVER['SERVER_NAME']) ? $_SERVER['SERVER_NAME'] : $_SERVER['HTTP_HOST'];
+
+		$_CLASS['core_template']-&gt;assign_array(array(
+			'site_name'			=&gt; 'New CMS Site',
+			'site_domain'		=&gt; $domain,
+			'site_path'			=&gt; $path,
+			'site_port'			=&gt; ($_SERVER['SERVER_PORT'] == 80) ? '' : $_SERVER['SERVER_PORT'],
+			'cookie_domain'		=&gt; $domain,
+			'cookie_path'		=&gt; $path,
+			'cookie_name'		=&gt; 'cms',
+			'username'			=&gt; '',
+			'password'			=&gt; '',
+			'password_confirm'	=&gt; '',
+			'email'				=&gt; '',
+			'email_confirm'		=&gt; '',
+			'error'				=&gt; empty($error) ? false : implode('&lt;br/&gt;', $error),
+			'config_content'	=&gt; $config_data
+		));
+
+		$_CLASS['core_template']-&gt;display('installer/stage2.html');
+
+		script_close();
+	}
+}
+
+if ($stage === 1)
+{
+	$_CLASS['core_template']-&gt;assign_array(array(
+		'database_options'	=&gt; $database_options,
+		'error'				=&gt; empty($error) ? false : implode('&lt;br/&gt;', $error),
+
+		'server'		=&gt; isset($site_db['server']) ? $site_db['server'] : '',
+		'port'			=&gt; isset($site_db['port']) ? $site_db['port'] : '',
+		'database'		=&gt; isset($site_db['database']) ? $site_db['database'] : '',
+		'username'		=&gt; isset($site_db['username']) ? $site_db['username'] : '',
+		'password'		=&gt; isset($site_db['password']) ? $site_db['password'] : '',
+		'file'			=&gt; isset($site_db['file']) ? $site_db['file'] : '',
+		'table_prefix'	=&gt; get_variable('table_prefix', 'POST', 'cms_'),
+		'user_prefix'	=&gt; get_variable('user_prefix', 'POST', 'cms_'),
+	));
+
+	$_CLASS['core_template']-&gt;display('installer/stage1.html');
+
+	script_close();
+}
+
+if (!$stage)
+{
+	$_CLASS['core_template']-&gt;display('installer/agreement.html');
+	script_close();
+}
+
 ?&gt;
\ No newline at end of file

Modified: cms/branches/1.0alpha1/modules/Quick_Message/index.php
===================================================================
--- cms/branches/1.0alpha1/modules/Quick_Message/index.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/modules/Quick_Message/index.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -26,11 +26,11 @@
     die;
 }
 
-global $prefix;
-
+global $table_prefix;
+
 if (!defined('QUICK_MESSAGE_TABLE'))
 {
-	define('QUICK_MESSAGE_TABLE', $prefix.'quick_message');
+	define('QUICK_MESSAGE_TABLE', $table_prefix.'quick_message');
 }
 
 $_CLASS['core_user']-&gt;user_setup();

Modified: cms/branches/1.0alpha1/modules/Quick_Message/install.php
===================================================================
--- cms/branches/1.0alpha1/modules/Quick_Message/install.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/modules/Quick_Message/install.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -26,11 +26,11 @@
     die;
 }
 
-global $prefix;
-
+global $table_prefix;
+
 if (!defined('QUICK_MESSAGE_TABLE'))
 {
-	define('QUICK_MESSAGE_TABLE', $prefix.'quick_message');
+	define('QUICK_MESSAGE_TABLE', $table_prefix.'quick_message');
 }
 
 class Quick_Message_install

Modified: cms/branches/1.0alpha1/modules/articles/admin/index.php
===================================================================
--- cms/branches/1.0alpha1/modules/articles/admin/index.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/modules/articles/admin/index.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -27,7 +27,7 @@
 
 if (!defined('ARTICLES_TABLE'))
 {
-	define('ARTICLES_TABLE', $prefix.'articles');
+	define('ARTICLES_TABLE', $table_prefix.'articles');
 }
 
 if (isset($_REQUEST['mode']))

Modified: cms/branches/1.0alpha1/modules/articles/index.php
===================================================================
--- cms/branches/1.0alpha1/modules/articles/index.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/modules/articles/index.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -28,7 +28,7 @@
 
 if (!defined('ARTICLES_TABLE'))
 {
-	define('ARTICLES_TABLE', $prefix.'articles');
+	define('ARTICLES_TABLE', $table_prefix.'articles');
 }
 
 $_CLASS['core_user']-&gt;user_setup();
@@ -58,7 +58,7 @@
 				trigger_error('ARTICLE_NOT_FOUND');
 			}
 
-			$_CLASS['core_template']-&gt;assign(array(
+			$_CLASS['core_template']-&gt;assign_array(array(
 				'ARTICLES_POSTER' 		=&gt; ($row['poster_name']) ? $row['poster_name'] : $_CLASS['core_user']-&gt;get_lang('ANONYMOUS'),
 				'ARTICLES_POSTER_LINK'	=&gt; ($row['poster_name'] &amp;&amp; $row['poster_id']) ? generate_link('Members_List&amp;mode=viewprofile&amp;u=' . $row['poster_id']) : '',
 				'ARTICLES_TEXT'			=&gt; $row['articles_text'],

Modified: cms/branches/1.0alpha1/modules/articles/install.php
===================================================================
--- cms/branches/1.0alpha1/modules/articles/install.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/branches/1.0alpha1/modules/articles/install.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -30,7 +30,7 @@
 
 if (!defined('ARTICLES_TABLE'))
 {
-	define('ARTICLES_TABLE', $prefix.'articles');
+	define('ARTICLES_TABLE', $table_prefix.'articles');
 }
 
 class articles_install
@@ -64,9 +64,9 @@
 		$_CLASS['core_db']-&gt;add_table_field_char('approver_name', 80, true);
 
 		$_CLASS['core_db']-&gt;add_table_index('articles_id', 'primary');
-		$_CLASS['core_db']-&gt;add_table_index('articles_start');
+		$_CLASS['core_db']-&gt;add_table_index('articles_starts');
+		$_CLASS['core_db']-&gt;add_table_index('articles_expires');
 		//$_CLASS['core_db']-&gt;add_table_index('articles_type');
-		//$_CLASS['core_db']-&gt;add_table_index('articles_expires');
 		$_CLASS['core_db']-&gt;add_table_index('articles_order');
 		$_CLASS['core_db']-&gt;add_table_index('articles_status');
 

Modified: cms/trunk/admin/blocks.php
===================================================================
--- cms/trunk/admin/blocks.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/admin/blocks.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -143,7 +143,7 @@
 			'TITLE'			=&gt; $block['block_title'],
 			'TYPE'			=&gt; $_CLASS['core_user']-&gt;get_lang('TYPE_'.$block['block_type']),
 
-			'EXPIRES'		=&gt; ($block['block_expires'] &gt; $_CLASS['core_user']-&gt;time) ? $_CLASS['core_user']-&gt;format_date($block['block_expires']) : false,
+			'EXPIRES'		=&gt; ($block['block_expires']) ? $_CLASS['core_user']-&gt;format_date($block['block_expires']) : false,
 			'STARTS'		=&gt; ($block['block_starts'] &gt; $_CLASS['core_user']-&gt;time) ? $_CLASS['core_user']-&gt;format_date($block['block_starts']) : false,
 
 			'ORDER_DOWN' 	=&gt; ($block['block_order'] &lt; $weigth[$block['block_position']]),

Modified: cms/trunk/admin/menu.php
===================================================================
--- cms/trunk/admin/menu.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/admin/menu.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -42,6 +42,7 @@
 $menu['modules'][] = array('lang' =&gt; $_CLASS['core_user']-&gt;get_lang('MODULES'), 'link' =&gt; generate_link('modules', array('admin' =&gt; true)));
 $menu['modules'][] = array('lang' =&gt; $_CLASS['core_user']-&gt;get_lang('MANAGE'), 'link' =&gt; generate_link('modules', array('admin' =&gt; true)));
 $menu['modules'][] = '';
+$menu['modules'][] = array('lang' =&gt; $_CLASS['core_user']-&gt;get_lang('ARTICLES'), 'link' =&gt; generate_link('articles', array('admin' =&gt; true)));
 
 $menu['forums'][] = array('lang' =&gt; $_CLASS['core_user']-&gt;get_lang('FORUMS'), 'link' =&gt; generate_link('Forums', array('admin' =&gt; true)));
 $menu['forums'][] = array('lang' =&gt; $_CLASS['core_user']-&gt;get_lang('ADMIN_INDEX'), 'link' =&gt; generate_link('Forums', array('admin' =&gt; true)));

Modified: cms/trunk/admin/messages.php
===================================================================
--- cms/trunk/admin/messages.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/admin/messages.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -118,7 +118,7 @@
 		'EDIT_LINK'		=&gt; generate_link('messages&amp;mode=edit&amp;id='.$row['block_id'], array('admin' =&gt; true)),
 		'DELETE_LINK' 	=&gt; generate_link('messages&amp;mode=delete&amp;id='.$row['block_id'], array('admin' =&gt; true)),
 
-		'EXPIRES'		=&gt; ($row['block_expires'] &gt; $_CLASS['core_user']-&gt;time) ? $_CLASS['core_user']-&gt;format_date($row['block_expires']) : false,
+		'EXPIRES'		=&gt; ($row['block_expires']) ? $_CLASS['core_user']-&gt;format_date($row['block_expires']) : false,
 		'STARTS'		=&gt; ($row['block_starts'] &gt; $_CLASS['core_user']-&gt;time) ? $_CLASS['core_user']-&gt;format_date($row['block_starts']) : false,
 		'TITLE'			=&gt; $row['block_title'],
 

Modified: cms/trunk/blocks/block-Quick_Message.php
===================================================================
--- cms/trunk/blocks/block-Quick_Message.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/blocks/block-Quick_Message.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -26,9 +26,11 @@
     die;
 }
 
+global $table_prefix;
+
 if (!defined('QUICK_MESSAGE_TABLE'))
 {
-	define('QUICK_MESSAGE_TABLE', 'test_quick_message');
+	define('QUICK_MESSAGE_TABLE', $table_prefix.'quick_message');
 }
 
 global $prefix, $_CLASS, $_CORE_CONFIG;

Modified: cms/trunk/config.php
===================================================================
--- cms/trunk/config.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/config.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -1,101 +0,0 @@
-&lt;?php
-/*
-||**************************************************************||
-||  Viperal CMS &#169; :												||
-||**************************************************************||
-||																||
-||	Copyright (C) 2004, 2005									||
-||  By Ryan Marshall ( Viperal )								||
-||																||
-||  Email: <A HREF="https://lists.berlios.de/mailman/listinfo/viperals-svncheckins">viperal1 at gmail.com</A>									||
-||  Site: <A HREF="http://www.viperal.com">http://www.viperal.com</A>								||
-||																||
-||**************************************************************||
-||	LICENSE: ( <A HREF="http://www.gnu.org/licenses/gpl.txt">http://www.gnu.org/licenses/gpl.txt</A> )			||
-||**************************************************************||
-||  Viperal CMS is released under the terms and conditions		||
-||  of the GNU General Public License version 2					||
-||																||
-||**************************************************************||
-
-$Id$
-*/
-
-// TEMP
-
-// do not modify!
-if (!defined('VIPERAL'))
-{
-    die;
-}
-
-//echo getenv('DOCUMENT_ROOT'); die;
-/*
-If (getenv('DOCUMENT_ROOT') != 'C:/Program Files/Apache Group/Apache2/htdocs')
-{
-    die('Your site shouldn\'t access this file');
-}
-*/
-
-$prefix = 'test_';
-$user_prefix = 'test_';
-
-/*
-$site_db['type']		= 'mysql';
-$site_db['server']		= '';
-$site_db['port']		= '';
-$site_db['database']	= 'cms';
-$site_db['username']	= 'root';
-$site_db['password']	= '';
-$site_db['persistent']	= false;
-*/
-
-
-$site_db['type']		= 'postgres';
-$site_db['server']		= '';
-$site_db['port']		= '';
-$site_db['database']	= 'cms';
-$site_db['username']	= 'postgres';
-$site_db['password']	= 'viper83';
-$site_db['persistent']	= false;
-
-
-/*
-$site_db['type']	= 'sqlite';
-$site_db['file']	= 'C:\Program Files\Apache Group\Apache2\tester';
-$site_db['persistent']	= false;
-*/
-
-/*
-$site_db['type']	= 'sqlite_pdo';
-$site_db['file']	= 'C:\Program Files\Apache Group\Apache2\tester_pdo';
-$site_db['persistent']	= false;
-
-*/
-
-/*
-NOT WORKING
-
-$site_db['type']		= 'mssql';
-$site_db['server']		= '';
-$site_db['port']		= '';
-$site_db['database']	= 'tester';
-$site_db['username']	= '';
-$site_db['password']	= '';
-$site_db['persistent']	= false;
-*/
-
-//$acm_type = 'eaccelerator';
-$acm_type = 'file';
-
-if (!defined('INDEX_PAGE'))
-{
-	define('INDEX_PAGE', 'index.php');
-}
-
-if (!defined('ADMIN_PAGE'))
-{
-	define('ADMIN_PAGE', 'admin.php');
-}
-
-?&gt;
\ No newline at end of file

Modified: cms/trunk/core.php
===================================================================
--- cms/trunk/core.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/core.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -38,7 +38,6 @@
 mb_internal_encoding('UTF-8');
 //mb_http_output('UTF-8');
 
-
 // Remove registered globals
 if ((bool) ini_get('register_globals'))
 {
@@ -93,26 +92,6 @@
 $_CLASS['core_db']-&gt;connect($site_db);
 unset($sitedb);
 
-/*
-$_CLASS['core_db']-&gt;transaction();
-require($site_file_root.'install/build_tables.php');
-$_CLASS['core_db']-&gt;transaction('commit');
-die;
-*/
-
-
-/*
-$_CLASS['core_db']-&gt;transaction();
-require($site_file_root.'install/build_data.php');
-$_CLASS['core_db']-&gt;transaction('commit');
-die;
-*/
-
-/*
-	Progres need to be optimized after install :-(
-	$_CLASS['core_db']-&gt;optimize_tables();
-*/
-
 $_CLASS['core_db']-&gt;return_on_error = true;
 
 // Error messages just incase we can't get our configs

Modified: cms/trunk/error.php
===================================================================
--- cms/trunk/error.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/error.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -22,7 +22,7 @@
 }
 
 //echo str_replace('\\','/', getenv('DOCUMENT_ROOT')); die;
-$site_file_root = 'C:/apachefriends/xampp/cms/';
+$site_file_root = '';
 $lang = 'en';
 
 if (isset($_SERVER['HTTP_ACCEPT_LANGUAGE']))

Modified: cms/trunk/includes/db/mysql.php
===================================================================
--- cms/trunk/includes/db/mysql.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/includes/db/mysql.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -41,11 +41,11 @@
 	var $_fields = array();
 	var $_table_name = false;
 
-	function connect($db)
+	function connect($db, $return = false)
 	{		
 		if ($db['port'])
 		{
-			$db['server'] .= ':' . $port;
+			$db['server'] .= ':' . $db['port'];
 		}
 
 		if ($this-&gt;link_identifier)
@@ -68,9 +68,14 @@
 
 			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB2&lt;/center&gt;';
 		}
-		
-		if (!$error)
+
+		if (!$this-&gt;report_error)
 		{
+			return false;
+		}
+
+		if (!isset($error))
+		{
 			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB1&lt;/center&gt;';
 		}
 
@@ -179,7 +184,7 @@
 
 		if ($this-&gt;last_result === false)
 		{
-			$this-&gt;_error($query, $backtrace);
+			$this-&gt;sql_error($backtrace);
 		}
 		elseif (strpos($query, 'SELECT') === 0)
 		{
@@ -223,60 +228,67 @@
 	/*
 		Boy do I like this but it phpBB's, may have to do something similar
 	*/
-	function sql_build_array($query, $assoc_ary = false)
+	function sql_build_array($query, $array = false)
 	{
-		if (!is_array($assoc_ary))
+		if (!is_array($array))
 		{
 			return false;
 		}
 
-		$fields = array();
-		$values = array();
+		$_fields = $values = array();
 
 		if ($query == 'INSERT')
 		{
-			foreach ($assoc_ary as $key =&gt; $var)
+			foreach ($array as $key =&gt; $value)
 			{
-				$fields[] = $key;
+				$_fields[] = $key;
 
-				if (is_null($var))
+				if (is_numeric($value))
 				{
-					$values[] = 'NULL';
+					$values[] = $value;
 				}
-				elseif (is_string($var))
+				elseif (is_string($value))
 				{
-					$values[] = &quot;'&quot; . $this-&gt;escape($var) . &quot;'&quot;;
+					$values[] = &quot;'&quot; . $this-&gt;escape($value) . &quot;'&quot;;
 				}
-				else
+				elseif (is_null($value))
 				{
-					$values[] = (is_bool($var)) ? intval($var) : $var;
+					$values[] = 'NULL';
 				}
+				elseif (is_bool($value))
+				{
+					$values[] = ($value) ? 1 : 0;
+				}
 			}
 
-			$query = ' (' . implode(', ', $fields) . ') VALUES (' . implode(', ', $values) . ')';
+			return ' (' . implode(', ', $_fields) . ') VALUES (' . implode(', ', $values) . ')';
 		}
-		else if ($query == 'UPDATE' || $query == 'SELECT')
+		elseif ($query == 'UPDATE' || $query == 'SELECT')
 		{
 			$values = array();
-			foreach ($assoc_ary as $key =&gt; $var)
+			foreach ($array as $key =&gt; $value)
 			{
-				if (is_null($var))
+				if (is_numeric($value))
 				{
-					$values[] = &quot;$key = NULL&quot;;
+					$values[] = $key.' = '.$value;
 				}
-				elseif (is_string($var))
+				elseif (is_string($value))
 				{
-					$values[] = &quot;$key = '&quot; . $this-&gt;escape($var) . &quot;'&quot;;
+					$values[] = &quot;$key = '&quot; . $this-&gt;escape($value) . &quot;'&quot;;
 				}
-				else
+				elseif (is_null($value))
 				{
-					$values[] = (is_bool($var)) ? &quot;$key = &quot; . intval($var) : &quot;$key = $var&quot;;
+					$values[] = &quot;$key = NULL&quot;;
 				}
+				elseif (is_bool($value))
+				{
+					$values[] = $key.' = '.(($value) ? 1 : 0);
+				}
+
 			}
-			$query = implode(($query == 'UPDATE') ? ', ' : ' AND ', $values);
+
+			return implode(($query == 'UPDATE') ? ', ' : ' AND ', $values);
 		}
-
-		return $query;
 	}
 
 	function num_rows($result = false)
@@ -393,7 +405,7 @@
 				}
 			}
 
-			$this-&gt;sql_freeresult($result);
+			$this-&gt;free_result($result);
 		}
 
 		if ($table)
@@ -412,14 +424,22 @@
 		return (($return_dbname) ? 'MySQL ' : '').mysql_get_server_info($this-&gt;link_identifier);
 	}
 
-	function _error($sql = '', $backtrace)
+	function sql_error($backtrace, $return = false)
 	{
+		if ($return)
+		{
+			return array(
+				'message'	=&gt; @mysql_error(),
+				'code'		=&gt; @mysql_errno()
+			);
+		}
+
 		if (!$this-&gt;report_error)
 		{
 			return;
 		}
 
-		$message = '&lt;br clear=&quot;all&quot;/&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mysql_error() . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($sql) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $sql : '') . '&lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';
+		$message = '&lt;br clear=&quot;all&quot;/&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mysql_error() . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($this-&gt;last_query) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $this-&gt;last_query : '') . '&lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';
 
 		if ($this-&gt;in_transaction)
 		{
@@ -427,8 +447,6 @@
 		}
 
 		trigger_error($message, E_USER_ERROR);
-		
-		script_close(false);
 	}
 
 	function _debug($mode, $backtrace)
@@ -634,6 +652,7 @@
 	function add_table_index($field, $type  = 'index', $index_name = false)
 	{
 		$index_name = ($index_name) ? $index_name : $field;
+		$index_name = is_array($index_name) ? implode('_', $index_name) : $index_name;
 
 		$field = is_array($field) ? implode('` , `', $field) : $field;
 

Modified: cms/trunk/includes/db/mysql3.php
===================================================================
--- cms/trunk/includes/db/mysql3.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/includes/db/mysql3.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -64,7 +64,12 @@
 
 			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB2&lt;/center&gt;';
 		}
-		
+
+		if (!$this-&gt;report_error)
+		{
+			return false;
+		}
+
 		if (!isset($error))
 		{
 			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB1&lt;/center&gt;';
@@ -125,7 +130,7 @@
 
 		if ($this-&gt;last_result === false)
 		{
-			$this-&gt;_error($query, $backtrace);
+			$this-&gt;sql_error($backtrace);
 		}
 		elseif (strpos($query, 'SELECT') === 0)
 		{
@@ -348,14 +353,22 @@
 		return (($return_dbname) ? 'MySQL ' : '').mysql_get_server_info($this-&gt;link_identifier);
 	}
 
-	function _error($sql = '', $backtrace)
+	function sql_error($backtrace, $return = false)
 	{
+		if ($return)
+		{
+			return array(
+				'message'	=&gt; @mysql_error(),
+				'code'		=&gt; @mysql_errno()
+			);
+		}
+
 		if (!$this-&gt;report_error)
 		{
 			return;
 		}
 
-		$message = '&lt;br clear=&quot;all&quot;/&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mysql_error() . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($sql) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $sql : '') . '&lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';
+		$message = '&lt;br clear=&quot;all&quot;/&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mysql_error() . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($sql) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $this-&gt;last_query : '') . '&lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';
 
 		if ($this-&gt;in_transaction)
 		{
@@ -572,7 +585,8 @@
 	function add_table_index($field, $type  = 'index', $index_name = false)
 	{
 		$index_name = ($index_name) ? $index_name : $field;
-		
+		$index_name = is_array($index_name) ? implode('_', $index_name) : $index_name;
+
 		$field = is_array($field) ? implode('` , `', $field) : $field;
 
 		switch ($type)

Modified: cms/trunk/includes/db/mysqli.php
===================================================================
--- cms/trunk/includes/db/mysqli.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/includes/db/mysqli.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -27,7 +27,7 @@
 	var $db_layer = 'mysqli';
 
 	var $last_result;
-	var $return_on_error;
+	var $report_error = true;
 	var $in_transaction;
 
 	var $queries_time = 0;
@@ -62,15 +62,19 @@
 				mysqli_query($this-&gt;link_identifier, 'SET NAMES utf8');
 
 				//mysqli_query($this-&gt;link_identifier, 'SET character_set_results = NULL');
-				//mysqli_set_charset($this-&gt;link_identifier, &quot;utf8&quot;);
 
 				return $this-&gt;link_identifier;
 			}
 
 			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB2&lt;/center&gt;';
 		}
+
+		if (!$this-&gt;report_error)
+		{
+			return false;
+		}
 		
-		if (!$error)
+		if (!isset($error))
 		{
 			$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB1&lt;/center&gt;';
 		}
@@ -92,9 +96,9 @@
 		$this-&gt;link_identifier = false;
 	}
 
-	function sql_return_on_error($fail = false)
+	function report_error($report)
 	{
-		$this-&gt;return_on_error = $fail;
+		$this-&gt;report_error = ($report);
 	}
 
 	function transaction($option = 'start', $auto_rollback = true)
@@ -181,9 +185,9 @@
 
 		if ($this-&gt;last_result === false)
 		{
-			$this-&gt;_error($query, $backtrace);
+			$this-&gt;sql_error($backtrace);
 		}
-		elseif (strpos($query, 'SELECT') === false)
+		elseif (strpos($query, 'SELECT') === 0)
 		{
 			$this-&gt;open_queries[(string) $this-&gt;last_result] = $this-&gt;last_result;
 		}
@@ -421,14 +425,22 @@
 		return mysqli_get_server_info($this-&gt;link_identifier);
 	}
 	
-	function _error($sql = '', $backtrace)
+	function sql_error($backtrace, $return = false)
 	{
+		if ($return)
+		{
+			return array(
+				'message'	=&gt; @mysqli_error($this-&gt;link_identifier),
+				'code'		=&gt; @mysqli_errno($this-&gt;link_identifier)
+			);
+		}
+
 		if ($this-&gt;return_on_error)
 		{
 			return;
 		}
 
-		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mysqli_error($this-&gt;link_identifier) . '&lt;br /&gt;&lt;br /&gt;File: &lt;br/&gt;'.$backtrace['file'].'&lt;br/&gt;&lt;br /&gt;Line:&lt;br/&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $sql .'&lt;br /&gt;';
+		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @mysqli_error($this-&gt;link_identifier) . '&lt;br /&gt;&lt;br /&gt;File: &lt;br/&gt;'.$backtrace['file'].'&lt;br/&gt;&lt;br /&gt;Line:&lt;br/&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $this-&gt;last_query .'&lt;br /&gt;';
 
 		if ($this-&gt;in_transaction)
 		{
@@ -638,8 +650,9 @@
 
 	function add_table_index($field, $type  = 'index', $index_name = false)
 	{
-		$index_name = $index_name ? $index_name : $field;
-		
+		$index_name = ($index_name) ? $index_name : $field;
+		$index_name = is_array($index_name) ? implode('_', $index_name) : $index_name;
+
 		$field = is_array($field) ? implode('` , `', $field) : $field;
 
 		switch ($type)

Modified: cms/trunk/includes/db/postgres.php
===================================================================
--- cms/trunk/includes/db/postgres.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/includes/db/postgres.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -75,24 +75,30 @@
 
 		$connection_string = implode(' ', $connection_string);
 
-
 		$this-&gt;link_identifier = ($db['persistent']) ? @pg_pconnect($connection_string) : @pg_connect($connection_string);
 
 		if ($this-&gt;link_identifier)
 		{
-			//pg_set_client_encoding($this-&gt;link_identifier, 'UNICODE');
-			//pg_set_client_encoding($this-&gt;link_identifier, 'UTF8');  pg8.1 unicode still works tho
+			if (strtoupper(substr(PHP_OS, 0, 3)) !== 'WIN')
+			{
+				pg_set_client_encoding($this-&gt;link_identifier, 'UNICODE');
+				//pg_set_client_encoding($this-&gt;link_identifier, 'UTF8');  pg8.1 unicode still works tho
+				//pg_query($this-&gt;link_identifier, &quot;SET CLIENT_ENCODING TO 'UNICODE'&quot;); SET NAMES 'UNICODE'
+			}
 
-			//pg_query($this-&gt;link_identifier, &quot;SET CLIENT_ENCODING TO 'value'&quot;); SET NAMES 'value'
 			return $this-&gt;link_identifier;
 		}
 
+		if (!$this-&gt;report_error)
+		{
+			return false;
+		}
+
 		$error = '&lt;center&gt;There is currently a problem with the site&lt;br/&gt;Please try again later&lt;br /&gt;&lt;br /&gt;Error Code: DB1&lt;/center&gt;';
 
 		$this-&gt;disconnect();
+
 		trigger_error($error, E_USER_ERROR);
-
-		die;
 	}
 
 	function disconnect()
@@ -102,7 +108,7 @@
 			return;
 		}
 
-		@pg_close($this-&gt;link_identifier);
+		pg_close($this-&gt;link_identifier);
 		$this-&gt;link_identifier = false;
 	}
 
@@ -110,6 +116,7 @@
 	{
 		$this-&gt;report_error = ($report);
 	}
+
 	function transaction($option = 'start', $auto_rollback = true)
 	{
 		$result = false;
@@ -186,7 +193,7 @@
 
 		if ($this-&gt;last_result === false)
 		{
-			$this-&gt;_error($query, $backtrace);
+			$this-&gt;sql_error($backtrace);
 		}
 		elseif (strpos($query, 'SELECT') === 0)
 		{
@@ -329,7 +336,7 @@
 			return false;
 		}
 
-		return @pg_fetch_assoc($result);
+		return pg_fetch_assoc($result);
 	}
 
 	function fetch_row_num($result = false)
@@ -339,7 +346,7 @@
 			return false;
 		}
 
-		return @pg_fetch_row($result);
+		return pg_fetch_row($result);
 	}
 
 	function fetch_row_both($result = false)
@@ -349,12 +356,12 @@
 			return false;
 		}
 
-		return @pg_fetch_array($result);
+		return pg_fetch_array($result);
 	}
 
 	function insert_id($table, $column)
 	{
-		$oid = @pg_last_oid($this-&gt;last_result);
+		$oid = pg_last_oid($this-&gt;last_result);
 
 		/* 
 		Shouldn't be need, but incase they don't have oid support ( not sure why they wouldn't )
@@ -389,7 +396,7 @@
 
 		unset($this-&gt;open_queries[(int) $result]);
 
-		return @pg_free_result($result);
+		return pg_free_result($result);
 	}
 
 	function escape($text)
@@ -421,14 +428,22 @@
 		}
 	}
 
-	function _error($sql = '', $backtrace)
+	function sql_error($backtrace, $return = false)
 	{
+		if ($return)
+		{
+			return array(
+				'message'	=&gt; @pg_last_error($this-&gt;link_identifier),
+				'code'		=&gt; ''
+			);
+		}
+		
 		if (!$this-&gt;report_error)
 		{
 			return;
 		}
 
-		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @pg_last_error($this-&gt;link_identifier) . '&lt;br /&gt;&lt;br /&gt;File: &lt;br/&gt;'.$backtrace['file'].'&lt;br/&gt;&lt;br /&gt;Line:&lt;br/&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $sql .'&lt;br /&gt;';
+		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @pg_last_error($this-&gt;link_identifier) . '&lt;br /&gt;&lt;br /&gt;File: &lt;br/&gt;'.$backtrace['file'].'&lt;br/&gt;&lt;br /&gt;Line:&lt;br/&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $this-&gt;last_query .'&lt;br /&gt;';
 
 		if ($this-&gt;in_transaction)
 		{
@@ -490,14 +505,14 @@
 				{
 					if (strpos('SELECT', $this-&gt;last_query) === 0)
 					{
-						if ($result = @pg_query($this-&gt;link_identifier, 'EXPLAIN '.$this-&gt;last_query))
+						if ($result = pg_query($this-&gt;link_identifier, 'EXPLAIN '.$this-&gt;last_query))
 						{
-							while ($row = @pg_fetch_assoc($result))
+							while ($row = pg_fetch_assoc($result))
 							{
 								$this-&gt;query_details[$this-&gt;num_queries][] = $row;
 							}
 
-							@pg_free_result($result);
+							pg_free_result($result);
 						}
 					}
 					else

Modified: cms/trunk/includes/db/sqlite.php
===================================================================
--- cms/trunk/includes/db/sqlite.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/includes/db/sqlite.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -172,7 +172,7 @@
 
 		if ($this-&gt;last_result === false)
 		{
-			$this-&gt;_error($query, $backtrace);
+			$this-&gt;sql_error($backtrace);
 		}
 		elseif (strpos($query, 'SELECT') === 0)
 		{
@@ -407,14 +407,24 @@
 		return (($return_dbname) ? 'SQLITE ' : '').sqlite_libversion();
 	}
 
-	function _error($sql = '', $backtrace)
+	function sql_error($backtrace, $return = false)
 	{
+		if ($return)
+		{
+			$code = @sqlite_last_error($this-&gt;link_identifier);
+
+			return array(
+				'message'	=&gt; @sqlite_error_string($code),
+				'code'		=&gt; $code
+			);
+		}
+
 		if (!$this-&gt;report_error)
 		{
 			return;
 		}
 
-		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @sqlite_error_string(@sqlite_last_error($this-&gt;link_identifier)) . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($sql) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $sql : '') . '&lt;br /&gt;';
+		$message = '&lt;u&gt;SQL ERROR&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . @sqlite_error_string(@sqlite_last_error($this-&gt;link_identifier)) . '&lt;br /&gt;&lt;br /&gt;File:&lt;br/&gt;&lt;br/&gt;'.$backtrace['file'].'&lt;br /&gt;&lt;br /&gt;Line:&lt;br /&gt;&lt;br /&gt;'.$backtrace['line'].'&lt;br /&gt;&lt;br /&gt;&lt;u&gt;CALLING PAGE&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;'.(($this-&gt;last_query) ? '&lt;br /&gt;&lt;br /&gt;&lt;u&gt;SQL&lt;/u&gt;&lt;br /&gt;&lt;br /&gt;' . $this-&gt;last_query : '') . '&lt;br /&gt;';
 
 		if ($this-&gt;in_transaction)
 		{

Modified: cms/trunk/includes/display/display.php
===================================================================
--- cms/trunk/includes/display/display.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/includes/display/display.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -181,7 +181,6 @@
 			'SITE_BASE'			=&gt;	generate_base_url(),
 			'SITE_CHARSET'		=&gt;	'UTF-8',
 			'SITE_NAME'			=&gt;	$_CORE_CONFIG['global']['site_name'],
-			'SITE_URL'			=&gt;	$_CORE_CONFIG['global']['site_url'],
 			'HEADER_MESSAGE'	=&gt;	$this-&gt;message,
 			'HEADER_REGULAR'	=&gt;	$this-&gt;header['meta'].$this-&gt;header['regular'],
 			'HEADER_JS' 		=&gt;	$this-&gt;header['js'],

Modified: cms/trunk/includes/display/template.php
===================================================================
--- cms/trunk/includes/display/template.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/includes/display/template.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -48,20 +48,10 @@
     /*
 		Assign variable to be used in template
     */
-// rewmove array from here
+
 	function assign($var, $value = false)
     {
-		if (is_array($var))
-		{
-			foreach ($var as $name =&gt; $value)
-			{
-				$this-&gt;_vars[$name] = $value;
-			}
-		}
-		else
-		{
-			$this-&gt;_vars[$var] = $value;
-		}
+		$this-&gt;_vars[$var] = $value;
 	}
 
     function assign_array($var, $value = false)

Modified: cms/trunk/includes/functions.php
===================================================================
--- cms/trunk/includes/functions.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/includes/functions.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -803,6 +803,7 @@
 			@flock($fp, LOCK_UN);
 			fclose($fp);
 		}
+
 		return $bytes;
 	}
 }

Modified: cms/trunk/includes/tables.php
===================================================================
--- cms/trunk/includes/tables.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/includes/tables.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -173,71 +173,71 @@
 
 // Table names
 
-define('FORUMS_ACL_TABLE', $prefix.'forums_auth');
-define('FORUMS_ACL_OPTIONS_TABLE', $prefix.'forums_auth_options');
-//define('ACL_DEPS_TABLE', $prefix.'forums_auth_deps');
-define('FORUMS_ACL_PRESETS_TABLE', $prefix.'forums_auth_presets');
+define('FORUMS_ACL_TABLE', $table_prefix.'forums_auth');
+define('FORUMS_ACL_OPTIONS_TABLE', $table_prefix.'forums_auth_options');
+//define('ACL_DEPS_TABLE', $table_prefix.'forums_auth_deps');
+define('FORUMS_ACL_PRESETS_TABLE', $table_prefix.'forums_auth_presets');
 
-define('FORUMS_ATTACHMENTS_TABLE', $prefix.'forums_attachments');
-define('FORUMS_BOOKMARKS_TABLE', $prefix.'forums_bookmarks');
-define('FORUMS_BBCODES_TABLE', $prefix.'forums_bbcodes');
-define('FORUMS_CONFIG_TABLE', $prefix.'forums_config');
-define('FORUMS_DRAFTS_TABLE', $prefix.'forums_drafts');
-define('FORUMS_FORUMS_TABLE', $prefix.'forums_forums');
-define('FORUMS_ACCESS_TABLE', $prefix.'forums_access');
-define('FORUMS_ICONS_TABLE', $prefix.'forums_icons');
-define('FORUMS_LOG_TABLE', $prefix.'forums_log');
-define('FORUMS_MODERATOR_TABLE', $prefix.'forums_moderator_cache');
-define('FORUMS_MODULES_TABLE', $prefix . 'forums_modules');
-define('FORUMS_POSTS_TABLE', $prefix.'forums_posts');
-define('FORUMS_PRIVMSGS_TABLE', $prefix.'forums_privmsgs');
-define('FORUMS_PRIVMSGS_TO_TABLE', $prefix.'forums_privmsgs_to');
-define('FORUMS_PRIVMSGS_FOLDER_TABLE', $prefix.'forums_privmsgs_folder');
-define('FORUMS_PRIVMSGS_RULES_TABLE', $prefix.'forums_privmsgs_rules');
-define('FORUMS_REPORTS_TABLE', $prefix.'forums_reports');
-define('FORUMS_REASONS_TABLE', $prefix.'forums_reports_reasons');
-define('FORUMS_SEARCH_TABLE', $prefix.'forums_search_results');
-define('FORUMS_SEARCH_WORD_TABLE', $prefix.'forums_search_wordlist');
-define('FORUMS_SEARCH_MATCH_TABLE', $prefix.'forums_search_wordmatch');
-define('FORUMS_TOPICS_TABLE', $prefix.'forums_topics');
-define('FORUMS_POLL_OPTIONS_TABLE', $prefix.'forums_poll_results');
-define('FORUMS_POLL_VOTES_TABLE', $prefix.'forums_poll_voters');
-define('FORUMS_WORDS_TABLE', $prefix.'forums_words');
-define('FORUMS_WATCH_TABLE', $prefix.'forums_watch');
-define('FORUMS_TRACK_TABLE', $prefix.'forums_tracking');
-define('FORUMS_RANKS_TABLE', $prefix.'forums_ranks');
+define('FORUMS_ATTACHMENTS_TABLE', $table_prefix.'forums_attachments');
+define('FORUMS_BOOKMARKS_TABLE', $table_prefix.'forums_bookmarks');
+define('FORUMS_BBCODES_TABLE', $table_prefix.'forums_bbcodes');
+define('FORUMS_CONFIG_TABLE', $table_prefix.'forums_config');
+define('FORUMS_DRAFTS_TABLE', $table_prefix.'forums_drafts');
+define('FORUMS_FORUMS_TABLE', $table_prefix.'forums_forums');
+define('FORUMS_ACCESS_TABLE', $table_prefix.'forums_access');
+define('FORUMS_ICONS_TABLE', $table_prefix.'forums_icons');
+define('FORUMS_LOG_TABLE', $table_prefix.'forums_log');
+define('FORUMS_MODERATOR_TABLE', $table_prefix.'forums_moderator_cache');
+define('FORUMS_MODULES_TABLE', $table_prefix . 'forums_modules');
+define('FORUMS_POSTS_TABLE', $table_prefix.'forums_posts');
+define('FORUMS_PRIVMSGS_TABLE', $table_prefix.'forums_privmsgs');
+define('FORUMS_PRIVMSGS_TO_TABLE', $table_prefix.'forums_privmsgs_to');
+define('FORUMS_PRIVMSGS_FOLDER_TABLE', $table_prefix.'forums_privmsgs_folder');
+define('FORUMS_PRIVMSGS_RULES_TABLE', $table_prefix.'forums_privmsgs_rules');
+define('FORUMS_REPORTS_TABLE', $table_prefix.'forums_reports');
+define('FORUMS_REASONS_TABLE', $table_prefix.'forums_reports_reasons');
+define('FORUMS_SEARCH_TABLE', $table_prefix.'forums_search_results');
+define('FORUMS_SEARCH_WORD_TABLE', $table_prefix.'forums_search_wordlist');
+define('FORUMS_SEARCH_MATCH_TABLE', $table_prefix.'forums_search_wordmatch');
+define('FORUMS_TOPICS_TABLE', $table_prefix.'forums_topics');
+define('FORUMS_POLL_OPTIONS_TABLE', $table_prefix.'forums_poll_results');
+define('FORUMS_POLL_VOTES_TABLE', $table_prefix.'forums_poll_voters');
+define('FORUMS_WORDS_TABLE', $table_prefix.'forums_words');
+define('FORUMS_WATCH_TABLE', $table_prefix.'forums_watch');
+define('FORUMS_TRACK_TABLE', $table_prefix.'forums_tracking');
+define('FORUMS_RANKS_TABLE', $table_prefix.'forums_ranks');
 
 
-define('ADMIN_AUTH_TABLE', 'test_admins');
+define('ADMIN_AUTH_TABLE', $table_prefix.'admins');
 
-define('BLOCKS_TABLE', 'test_blocks');
+define('BLOCKS_TABLE', $table_prefix.'blocks');
 
-define('CORE_CONFIG_TABLE', 'test_config');
-define('CORE_MODULES_TABLE', $prefix.'modules');
+define('CORE_CONFIG_TABLE', $table_prefix.'config');
+define('CORE_MODULES_TABLE', $table_prefix.'modules');
 
-define('SMILIES_TABLE', 'test_smilies');
+define('SMILIES_TABLE', $table_prefix.'smilies');
 
-define('USER_GROUP_TABLE', 'test_groups_members');
-define('GROUPS_TABLE', 'test_groups');
+define('USER_GROUP_TABLE', $table_prefix.'groups_members');
+define('GROUPS_TABLE', $table_prefix.'groups');
 
-define('SESSIONS_AUTOLOGIN_TABLE', 'test_sessions_auto_login');
-define('SESSIONS_TABLE', $prefix.'sessions');
+define('SESSIONS_AUTOLOGIN_TABLE', $table_prefix.'sessions_auto_login');
+define('SESSIONS_TABLE', $table_prefix.'sessions');
 
 
-define('EXTENSIONS_TABLE', $prefix.'forums_extensions');
-define('EXTENSION_GROUPS_TABLE', $prefix.'forums_extension_groups');
+define('EXTENSIONS_TABLE', $table_prefix.'forums_extensions');
+define('EXTENSION_GROUPS_TABLE', $table_prefix.'forums_extension_groups');
 
-define('USERS_TABLE', $prefix.'users');
-define('USERS_NOTES_TABLE', $prefix.'forums_users_notes');
-define('ZEBRA_TABLE', $prefix.'forums_zebra');
-//define('LOG_TABLE', $prefix.'log');
+define('USERS_TABLE', $user_prefix.'users');
+define('USERS_NOTES_TABLE', $table_prefix.'forums_users_notes');
+define('ZEBRA_TABLE', $table_prefix.'forums_zebra');
+//define('LOG_TABLE', $table_prefix.'log');
 
 
 // can be removed
-define('PROFILE_FIELDS_TABLE', $prefix.'forums_profile_fields');
-define('PROFILE_LANG_TABLE', $prefix.'forums_profile_lang');
-define('PROFILE_DATA_TABLE', $prefix.'forums_profile_fields_data');
-define('PROFILE_FIELDS_LANG_TABLE', $prefix.'forums_profile_fields_lang');
-define('DISALLOW_TABLE', $prefix.'forums_disallow');
+define('PROFILE_FIELDS_TABLE', $table_prefix.'forums_profile_fields');
+define('PROFILE_LANG_TABLE', $table_prefix.'forums_profile_lang');
+define('PROFILE_DATA_TABLE', $table_prefix.'forums_profile_fields_data');
+define('PROFILE_FIELDS_LANG_TABLE', $table_prefix.'forums_profile_fields_lang');
+define('DISALLOW_TABLE', $table_prefix.'forums_disallow');
 
 ?&gt;
\ No newline at end of file

Modified: cms/trunk/includes/templates/login_admin.html
===================================================================
--- cms/trunk/includes/templates/login_admin.html	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/includes/templates/login_admin.html	2005-09-10 14:40:33 UTC (rev 107)
@@ -14,7 +14,7 @@
     margin: 0%;
     padding: 0px;
     background-color: white;
-    background: url(/images/bg.gif);
+    background: url(images/bg.gif);
 }
 
 .error { color: red; }

Modified: cms/trunk/install/build_data.php
===================================================================
--- cms/trunk/install/build_data.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/install/build_data.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -21,440 +21,438 @@
 $Id$
 */
 
-$install_prefix = 'test_';
 $time = gmtime();
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;admins (admin_section, user_id, admin_status) VALUES ('_all_', 2, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;admins (admin_section, user_id, admin_status) VALUES ('_all_', 2, 2)&quot;);
 
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;blocks (id, title, type, content, position, weight, active, file) VALUES (1, 'Control Panel', , 'block-Control_Panel.php')&quot;);
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;blocks (id, title, type, content, position, weight, active, file) VALUES (1, 'Control Panel', , 'block-Control_Panel.php')&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'site_name', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'site_url', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'start_date', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_theme', 'viperal', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'foot1', '&lt;a href=\&quot;feed.php?feed=rss1\&quot; title=\&quot;RSS 1.0 / RDF Feed\&quot;&gt;&lt;img alt=\&quot;RSS 1.0 / RDF\&quot; src=\&quot;images/rss10_logo.gif\&quot; /&gt;&lt;/a&gt; &lt;a href=\&quot;feed.php?feed=rss2\&quot; title=\&quot;RSS 2.0 Feed\&quot;&gt;&lt;img alt=\&quot;RSS 2.0\&quot; src=\&quot;images/rss20_logo.gif\&quot; /&gt;&lt;/a&gt; &lt;a href=\&quot;feed.php?feed=rss\&quot; title=\&quot;RSS 0.91 Feed\&quot;&gt;&lt;img alt=\&quot;RSS 0.9\&quot; src=\&quot;images/rss090_logo.gif\&quot; /&gt;&lt;/a&gt;', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'foot2', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_lang', 'en', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_dst', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'only_registered', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_dateformat', 'D M d, Y g:i a', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_timezone', '-5', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'link_optimization', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'index_page', 'News', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'site_name', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'start_date', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_theme', 'viperal', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'foot1', '&lt;a href=\&quot;feed.php?feed=rss1\&quot; title=\&quot;RSS 1.0 / RDF Feed\&quot;&gt;&lt;img alt=\&quot;RSS 1.0 / RDF\&quot; src=\&quot;images/rss10_logo.gif\&quot; /&gt;&lt;/a&gt; &lt;a href=\&quot;feed.php?feed=rss2\&quot; title=\&quot;RSS 2.0 Feed\&quot;&gt;&lt;img alt=\&quot;RSS 2.0\&quot; src=\&quot;images/rss20_logo.gif\&quot; /&gt;&lt;/a&gt; &lt;a href=\&quot;feed.php?feed=rss\&quot; title=\&quot;RSS 0.91 Feed\&quot;&gt;&lt;img alt=\&quot;RSS 0.9\&quot; src=\&quot;images/rss090_logo.gif\&quot; /&gt;&lt;/a&gt;', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'foot2', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_lang', 'en', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_dst', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'only_registered', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_dateformat', 'D M d, Y g:i a', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'default_timezone', '-5', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'link_optimization', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('global', 'index_page', 'News', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('maintenance', 'active', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('maintenance', 'start', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('maintenance', 'text', '&lt;p align=\&quot;center\&quot;&gt;&lt;b&gt;Sorry we are currently updating this site.&lt;br&gt;\nPlease try again later&lt;/b&gt;&lt;/p&gt;\n&lt;p align=\&quot;center\&quot;&gt;&lt;b&gt;Viperal&lt;/b&gt;\n&lt;/p&gt;', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('maintenance', 'active', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('maintenance', 'start', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('maintenance', 'text', '&lt;p align=\&quot;center\&quot;&gt;&lt;b&gt;Sorry we are currently updating this site.&lt;br&gt;\nPlease try again later&lt;/b&gt;&lt;/p&gt;\n&lt;p align=\&quot;center\&quot;&gt;&lt;b&gt;Viperal&lt;/b&gt;\n&lt;/p&gt;', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'allow_html_email', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'email_enable', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'email_function_name', 'mb_mail', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_host', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_port', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_username', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_password', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'allow_html_email', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'email_enable', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'email_function_name', 'mb_mail', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_host', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_port', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_username', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('email', 'smtp_password', '', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'allow_name_chars', '.*', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'enable_confirm', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'coppa_enable', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'coppa_fax', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'coppa_mail', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'min_name_chars', '5', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'max_reg_attempts', '10', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'max_name_chars', '50', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'min_pass_chars', '5', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'max_pass_chars', '25', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'allow_email_reuse', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'allow_name_change', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'newest_username', 'admin', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'newest_user_id', '2', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'activation', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'total_users', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'password_encoding', 'md5', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'allow_name_chars', '.*', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'enable_confirm', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'coppa_enable', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'coppa_fax', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'coppa_mail', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'min_name_chars', '5', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'max_reg_attempts', '10', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'max_name_chars', '50', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'min_pass_chars', '5', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'max_pass_chars', '25', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'allow_email_reuse', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'allow_name_change', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'newest_username', 'admin', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'newest_user_id', '2', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'activation', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'total_users', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('user', 'password_encoding', 'md5', 0)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'path', '/', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'cookie_domain', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'cookie_name', 'viperal', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'cookie_path', '/', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'limit_load', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'limit_sessions', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'ip_check', '4', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'session_length', '3600', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'error_options', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_secure', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_domain', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_path', '', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_port', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'path', '/', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'cookie_domain', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'cookie_name', 'viperal', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'cookie_path', '/', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'limit_load', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'limit_sessions', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'ip_check', '4', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'session_length', '3600', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'error_options', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_secure', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_domain', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_path', '', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;config (config_section, config_name, config_value, config_cache) VALUES ('server', 'site_port', '', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('GUESTS', 1, 2, '', 0, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('REGISTERED', 1, 2, '', 0, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('REGISTERED_COPPA', 1, 2, '', 0, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('ADMINISTRATORS', 1, 2, 'AA0000', 1, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('BOTS', 1, 2, '9E8DA7', 1, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('GUESTS', 1, 2, '', 0, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('REGISTERED', 1, 2, '', 0, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('REGISTERED_COPPA', 1, 2, '', 0, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('ADMINISTRATORS', 1, 2, 'AA0000', 1, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('BOTS', 1, 2, '9E8DA7', 1, '')&quot;);
 // To be seperated
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('SUPER_MODERATORS', 1, 2, '00AA00', 0, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups (group_name, group_type, group_status, group_colour, group_legend, group_description) VALUES ('SUPER_MODERATORS', 1, 2, '00AA00', 0, '')&quot;);
 
 
 //Admin
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (2, 2, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (4, 2, 10)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (6, 2, 10)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (2, 2, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (4, 2, 10)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (6, 2, 10)&quot;);
 // Anonymous
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (1, 1, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (1, 1, 2)&quot;);
 // Bots
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 3, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 4, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 5, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 6, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 7, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 8, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 3, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 4, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 5, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 6, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 7, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;groups_members (group_id, user_id, member_status) VALUES (5, 8, 2)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('blocks', 0, 2,'')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('groups', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('system', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('messages', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('modules', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('services', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('smiles', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('users', 0, 2, '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('groups', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('blocks', 0, 2,'')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('groups', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('system', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('messages', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('modules', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('services', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('smiles', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('users', 0, 2, '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_admin_options) VALUES ('groups', 0, 2, '')&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('articles', 1, 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Contact', 1, 2, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Calender', 1, 1, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Control_Panel', 1, 2, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Forums', 1, 2, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Members_List', 1, 2, 2)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Recommend_Us', 1, 2, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Submit_News', 1, 2, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Quick_Message', 1, 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('articles', 1, 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Contact', 1, 2, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Calender', 1, 1, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Control_Panel', 1, 2, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Forums', 1, 2, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Members_List', 1, 2, 2)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Recommend_Us', 1, 2, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Submit_News', 1, 2, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;modules (module_name, module_type, module_status, module_sides) VALUES ('Quick_Message', 1, 1, 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':D', 'grin.png', 'Very Happy', 19, 19, 1, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':)', 'smile.png', 'Smile', 19, 19, 2, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':(', 'sad.png', 'Sad', 19, 19, 3, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':o', 'surprised.png', 'Surprised', 19, 19, 4, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':eek:', 'surprised.png', 'Surprised', 19, 19, 4, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES ('8O', 'eek.png', 'Shocked', 19, 19, 5, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':?', 'confused.png', 'Confused', 19, 19, 6, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES ('8)', 'cool.png', 'Cool', 19, 19, 7, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':lol:', 'laugh.png', 'Laughing', 19, 19, 8, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':x', 'mad.png', 'Mad', 19, 19, 9, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':P', 'icon_razz.gif', 'Razz', 19, 19, 10, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':oops:', 'embarrassed.png', 'Embarassed', 19, 19, 11, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':cry:', 'cry.png', 'Crying or Very sad', 19, 19, 12, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':evil:', 'evil.png', 'Evil or Very Mad', 19, 19, 13, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':twisted:', 'twisted.png', 'Twisted Evil', 19, 19, 14, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':roll:', 'rolleyes.png', 'Rolling Eyes', 19, 19, 19, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (';)', 'wink.png', 'Wink', 19, 19, 16, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':!:', 'exclaim.png', 'Exclamation', 19, 19, 17, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':?:', 'question.png', 'Question', 19, 19, 18, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':idea:', 'idea.png', 'Idea', 19, 19, 19, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':arrow:', 'arrow.png', 'Arrow', 19, 19, 20, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':|', 'neutral.png', 'Neutral', 19, 19, 21, 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':mrgreen:', 'mrgreen.png', 'Mr. Green', 19, 19, 22, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':D', 'grin.png', 'Very Happy', 19, 19, 1, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':)', 'smile.png', 'Smile', 19, 19, 2, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':(', 'sad.png', 'Sad', 19, 19, 3, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':o', 'surprised.png', 'Surprised', 19, 19, 4, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':eek:', 'surprised.png', 'Surprised', 19, 19, 4, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES ('8O', 'eek.png', 'Shocked', 19, 19, 5, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':?', 'confused.png', 'Confused', 19, 19, 6, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES ('8)', 'cool.png', 'Cool', 19, 19, 7, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':lol:', 'laugh.png', 'Laughing', 19, 19, 8, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':x', 'mad.png', 'Mad', 19, 19, 9, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':P', 'icon_razz.gif', 'Razz', 19, 19, 10, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':oops:', 'embarrassed.png', 'Embarassed', 19, 19, 11, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':cry:', 'cry.png', 'Crying or Very sad', 19, 19, 12, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':evil:', 'evil.png', 'Evil or Very Mad', 19, 19, 13, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':twisted:', 'twisted.png', 'Twisted Evil', 19, 19, 14, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':roll:', 'rolleyes.png', 'Rolling Eyes', 19, 19, 19, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (';)', 'wink.png', 'Wink', 19, 19, 16, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':!:', 'exclaim.png', 'Exclamation', 19, 19, 17, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':?:', 'question.png', 'Question', 19, 19, 18, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':idea:', 'idea.png', 'Idea', 19, 19, 19, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':arrow:', 'arrow.png', 'Arrow', 19, 19, 20, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':|', 'neutral.png', 'Neutral', 19, 19, 21, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;smilies (smiley_code, smiley_src, smiley_description, smiley_width, smiley_height, smiley_order, smiley_type) VALUES (':mrgreen:', 'mrgreen.png', 'Mr. Green', 19, 19, 22, 0)&quot;);
 
 $admin_data = $_CLASS['core_db']-&gt;escape('a:6:{s:7:&quot;viewimg&quot;;b:1;s:9:&quot;viewflash&quot;;b:1;s:11:&quot;viewsmilies&quot;;b:1;s:8:&quot;viewsigs&quot;;b:1;s:11:&quot;viewavatars&quot;;b:1;s:11:&quot;viewcensors&quot;;b:1;}');
 $guest_data = $_CLASS['core_db']-&gt;escape('a:6:{s:7:&quot;viewimg&quot;;b:1;s:9:&quot;viewflash&quot;;b:1;s:11:&quot;viewsmilies&quot;;b:1;s:8:&quot;viewsigs&quot;;b:1;s:11:&quot;viewavatars&quot;;b:1;s:11:&quot;viewcensors&quot;;b:1;}');
 $bot_data = $_CLASS['core_db']-&gt;escape('a:6:{s:7:&quot;viewimg&quot;;b:1;s:9:&quot;viewflash&quot;;b:1;s:11:&quot;viewsmilies&quot;;b:1;s:8:&quot;viewsigs&quot;;b:1;s:11:&quot;viewavatars&quot;;b:1;s:11:&quot;viewcensors&quot;;b:1;}');
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (0, 2, 1, 'Anonymous', '', '', '', $time, '', 1, 0, 0, 0, 0, '$guest_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (1, 2, 4, 'admin', '21232f297a57a5a743894a0e4a801fc3', 'md5', '', $time, '', '', 1, 1, 1, 1, 1, '$admin_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Googlebot', '', '', '', $time, '216.239.46.,64.68.8,66.249.64.', 'Googlebot/', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'MSN', '', '', '', $time, '65.54.188.', 'msnbot/', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Yahoo', '', '', '', $time, '66.196.90.1', 'Yahoo! Slurp', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Alexa', '', '', '', $time, '66.28.250.,209.237.238.', 'ia_archiver', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'NaverBot', '', '', '', $time, '218.145.25.,61.78.61.,61.78.61.', 'NaverBot-', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Jetbot', '', '', '', $time, '64.71.144.', 'Jetbot/', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (0, 2, 1, 'Anonymous', '', '', '', $time, '', 1, 0, 0, 0, 0, '$guest_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (1, 2, 4, 'admin', '21232f297a57a5a743894a0e4a801fc3', 'md5', '', $time, '', '', 1, 1, 1, 1, 1, '$admin_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Googlebot', '', '', '', $time, '216.239.46.,64.68.8,66.249.64.', 'Googlebot/', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'MSN', '', '', '', $time, '65.54.188.', 'msnbot/', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Yahoo', '', '', '', $time, '66.196.90.1', 'Yahoo! Slurp', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Alexa', '', '', '', $time, '66.28.250.,209.237.238.', 'ia_archiver', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'NaverBot', '', '', '', $time, '218.145.25.,61.78.61.,61.78.61.', 'NaverBot-', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$user_prefix.&quot;users (user_type, user_status, user_group, username, user_password, user_password_encoding, user_email, user_reg_date, user_ip, user_agent, user_colour, user_allow_viewonline, user_allow_viewemail, user_allow_massemail, user_allow_pm, user_allow_email, user_data) VALUES (2, 2, 5, 'Jetbot', '', '', '', $time, '64.71.144.', 'Jetbot/', '', 1, 0, 0, 0, 0, '$bot_data')&quot;);
 
 // Forums
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_list', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_read', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_post', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_reply', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_quote', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_edit', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_user_lock', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_delete', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_bump', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_poll', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_vote', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_votechg', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_announce', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_sticky', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_attach', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_download', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_icons', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_html', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_bbcode', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_smilies', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_img', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_flash', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_sigs', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_search', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_email', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_rate', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_ignoreflood', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_postcount', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_moderate', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_report', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_subscribe', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_list', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_read', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_post', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_reply', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_quote', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_edit', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_user_lock', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_delete', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_bump', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_poll', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_vote', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_votechg', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_announce', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_sticky', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_attach', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_download', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_icons', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_html', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_bbcode', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_smilies', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_img', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_flash', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_sigs', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_search', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_email', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_rate', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_ignoreflood', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_postcount', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_moderate', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_report', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local) VALUES ('f_subscribe', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_edit', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_delete', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_move', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_lock', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_split', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_merge', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_approve', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_unrate', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_auth', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_ip', 1, 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_info', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_edit', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_delete', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_move', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_lock', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_split', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_merge', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_approve', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_unrate', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_auth', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_ip', 1, 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_local, is_global) VALUES ('m_info', 1, 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sendemail', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_readpm', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sendpm', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sendim', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_hideonline', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_viewonline', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_viewprofile', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgavatar', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chggrp', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgemail', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgname', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgpasswd', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgcensors', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_search', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_savedrafts', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_download', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_attach', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sig', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sendemail', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_readpm', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sendpm', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sendim', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_hideonline', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_viewonline', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_viewprofile', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgavatar', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chggrp', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgemail', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgname', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgpasswd', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_chgcensors', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_search', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_savedrafts', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_download', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_attach', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_sig', 1)&quot;);
 
 // START: This should be replaced by beta
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_server', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_defaults', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_board', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_cookies', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_clearlogs', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_words', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_icons', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_bbsmiley_code', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_attach', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_email', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_styles', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_user', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_useradd', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_userdel', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_ranks', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_ban', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_names', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_group', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_groupadd', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_groupdel', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_forum', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_forumadd', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_forumdel', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_prune', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_auth', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authmods', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authadmins', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authusers', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authgroups', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authdeps', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_backup', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_restore', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_search', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_events', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_cron', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_server', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_defaults', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_board', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_cookies', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_clearlogs', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_words', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_icons', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_bbsmiley_code', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_attach', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_email', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_styles', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_user', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_useradd', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_userdel', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_ranks', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_ban', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_names', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_group', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_groupadd', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_groupdel', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_forum', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_forumadd', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_forumdel', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_prune', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_auth', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authmods', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authadmins', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authusers', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authgroups', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_authdeps', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_backup', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_restore', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_search', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_events', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('a_cron', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_attach', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_html', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_bbsmiley_code', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_smilies', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_download', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_report', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_edit', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_printpm', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_emailpm', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_forward', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_delete', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_img', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_flash', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_attach', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_html', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_bbsmiley_code', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_smilies', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_download', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_report', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_edit', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_printpm', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_emailpm', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_forward', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_delete', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_img', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth_options (auth_option, is_global) VALUES ('u_pm_flash', 1)&quot;);
 
 // ADMINISTRATOR group
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 0, auth_option_id, 1 FROM &quot;.$install_prefix.&quot;forums_auth_options WHERE auth_option LIKE 'u_%'&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 0, auth_option_id, 1 FROM &quot;.$install_prefix.&quot;forums_auth_options WHERE auth_option LIKE 'a_%'&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 1, auth_option_id, 1 FROM &quot;.$install_prefix.&quot;forums_auth_options WHERE auth_option IN ('f_poll', 'f_announce', 'f_sticky', 'f_attach', 'f_html')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 2, auth_option_id, 1 FROM &quot;.$install_prefix.&quot;forums_auth_options WHERE auth_option IN ('f_poll', 'f_announce', 'f_sticky', 'f_attach', 'f_html')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 0, auth_option_id, 1 FROM &quot;.$table_prefix.&quot;forums_auth_options WHERE auth_option LIKE 'u_%'&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 0, auth_option_id, 1 FROM &quot;.$table_prefix.&quot;forums_auth_options WHERE auth_option LIKE 'a_%'&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 1, auth_option_id, 1 FROM &quot;.$table_prefix.&quot;forums_auth_options WHERE auth_option IN ('f_poll', 'f_announce', 'f_sticky', 'f_attach', 'f_html')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 2, auth_option_id, 1 FROM &quot;.$table_prefix.&quot;forums_auth_options WHERE auth_option IN ('f_poll', 'f_announce', 'f_sticky', 'f_attach', 'f_html')&quot;);
 
 // SUPER MODERATOR group
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 6, 0, auth_option_id, 1 FROM &quot;.$install_prefix.&quot;forums_auth_options WHERE auth_option LIKE 'm_%'&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth (group_id, forum_id, auth_option_id, auth_setting) SELECT 6, 0, auth_option_id, 1 FROM &quot;.$table_prefix.&quot;forums_auth_options WHERE auth_option LIKE 'm_%'&quot;);
 
 # REGISTERED/REGISTERED COPPA groups - common forum rights
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 0, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option LIKE 'u_%' AND auth_option NOT IN ('u_chggrp', 'u_viewonline', 'u_chgname');
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 1, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_subscribe');
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 2, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_votechg', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_report', 'f_subscribe');
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 0, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option LIKE 'u_%' AND auth_option NOT IN ('u_chggrp', 'u_viewonline', 'u_chgname');
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 1, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_subscribe');
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 4, 2, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_votechg', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_report', 'f_subscribe');
 
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 5, 0, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option LIKE 'u_%' AND auth_option NOT IN ('u_chgcensors', 'u_chggrp', 'u_viewonline', 'u_chgname');
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 5, 1, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_subscribe');
-//$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 5, 2, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_votechg', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_report', 'f_subscribe');
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 5, 0, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option LIKE 'u_%' AND auth_option NOT IN ('u_chgcensors', 'u_chggrp', 'u_viewonline', 'u_chgname');
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 5, 1, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_subscribe');
+//$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_auth  (group_id, forum_id, auth_option_id, auth_setting) SELECT 5, 2, auth_option_id, 1 FROM phpbb_auth_options WHERE auth_option IN ('f_', 'f_list', 'f_read', 'f_post', 'f_reply', 'f_quote', 'f_edit', 'f_delete', 'f_vote', 'f_votechg', 'f_download', 'f_bbsmiley_code', 'f_smilies', 'f_img', 'f_flash', 'f_sigs', 'f_search', 'f_email', 'f_print', 'f_postcount', 'f_report', 'f_subscribe');
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_attachments', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_bbcode', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_html', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_html_tags', 'b,i,u,pre', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_smilies', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_topic_notify', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_forum_notify', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_avatar_local', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_avatar_remote', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_avatar_upload', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_nocensors', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_bookmarks', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_disable_msg', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_email_form', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_login_attempts', '3', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('min_ratings', '10', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('posts_per_page', '10', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('topics_per_page', '25', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('hot_threshold', '25', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_path', 'images/avatars/upload', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_gallery_path', 'images/avatars/gallery', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smilies_path', 'images/smilies', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('icons_path', 'images/icons', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('upload_icons_path', 'images/upload_icons', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('ranks_path', 'images/ranks', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('email_enable', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_privmsg', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_attachments', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_bbcode', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_html', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_html_tags', 'b,i,u,pre', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_smilies', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_topic_notify', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_forum_notify', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_avatar_local', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_avatar_remote', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_avatar_upload', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_nocensors', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_bookmarks', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_disable_msg', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_email_form', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_login_attempts', '3', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('min_ratings', '10', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('posts_per_page', '10', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('topics_per_page', '25', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('hot_threshold', '25', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_path', 'images/avatars/upload', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_gallery_path', 'images/avatars/gallery', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smilies_path', 'images/smilies', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('icons_path', 'images/icons', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('upload_icons_path', 'images/upload_icons', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('ranks_path', 'images/ranks', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('email_enable', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_privmsg', '1', 0)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_online_time', '5', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_online', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_birthdays', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_moderators', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_jumpbox', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_search', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_search_upd', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_search_phr', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_db_lastread', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_db_track', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_onlinetrack', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_online_time', '5', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_online', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_birthdays', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_moderators', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_jumpbox', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_search', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_search_upd', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_search_phr', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_db_lastread', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_db_track', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_onlinetrack', '1', 0)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('search_gc', '7200', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('queue_interval', '3', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('version', '2.1.2', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_post_chars', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_post_smilies', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_quote_depth', '3', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_sig_chars', '255', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_poll_options', '10', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('min_search_chars', '3', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_search_chars', '10', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('edit_time', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('display_last_edited', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_email_sig', 'Thanks, The Management', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_email', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_contact', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_startdate', &quot;.gmtime().&quot;, 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('search_gc', '7200', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('queue_interval', '3', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('version', '2.1.2', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_post_chars', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_post_smilies', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_quote_depth', '3', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_sig_chars', '255', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_poll_options', '10', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('min_search_chars', '3', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_search_chars', '10', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('edit_time', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('display_last_edited', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_email_sig', 'Thanks, The Management', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_email', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_contact', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_startdate', &quot;.gmtime().&quot;, 0)&quot;);
 
 // to be removed
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('email_function_name', 'mail', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('email_package_size', '50', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_delivery', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_host', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_port', '25', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_auth_method', 'PLAIN', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_username', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_password', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('email_function_name', 'mail', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('email_package_size', '50', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_delivery', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_host', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_port', '25', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_auth_method', 'PLAIN', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_username', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('smtp_password', '', 0)&quot;);
 ////
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_enable', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_host', 'jabber.org', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_port', '5222', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_username', 'viperal_site', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_password', '19site83', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_resource', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_enable', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_host', 'jabber.org', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_port', '5222', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_username', 'viperal_site', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_password', '19site83', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('jab_resource', '', 0)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('flood_interval', '15', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('bump_interval', '10h', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('search_interval', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_filesize', '6144', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_min_width', '20', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_min_height', '20', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_max_width', '90', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_max_height', '90', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('flood_interval', '15', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('bump_interval', '10h', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('search_interval', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_filesize', '6144', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_min_width', '20', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_min_height', '20', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_max_width', '90', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('avatar_max_height', '90', 0)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('lastread', '432000', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('display_order', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_filesize', '262144', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_filesize_pm', '262144', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('attachment_quota', '52428800', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_attachments', '3', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_attachments_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_pm_attach', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('upload_path', 'files', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_display_inlined', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('secure_downloads', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('secure_allow_deny', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('secure_allow_empty_referer', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_max_width', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_max_height', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_link_width', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_link_height', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_create_thumbnail', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_min_thumb_filesize', '12000', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_imagick', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('pm_max_boxes', '4', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('pm_max_msgs', '50', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_html_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_bbsmiley_code_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_smilies_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_download_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_report_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_online_guests', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_img_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_flash_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('enable_pm_icons', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('pm_edit_time', '', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_mass_pm', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('record_online_users', '2', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('record_online_date', '1117686190', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('newest_user_id', '334', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('newest_username', 'Grendal', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_users', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_posts', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_topics', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_files', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('upload_dir_size', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('search_last_gc', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('last_queue_run', '0', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('full_folder_action', '2', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('bump_type', 'm', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('enable_karma', '1', 1)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_img', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_hide_emails', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_bbsmiley_code', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_flash', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_html', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_img', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_smilies', '1', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_post_urls', '0', 0)&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('database_last_gc', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('lastread', '432000', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('display_order', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_filesize', '262144', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_filesize_pm', '262144', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('attachment_quota', '52428800', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_attachments', '3', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_attachments_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_pm_attach', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('upload_path', 'files', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_display_inlined', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('secure_downloads', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('secure_allow_deny', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('secure_allow_empty_referer', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_max_width', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_max_height', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_link_width', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_link_height', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_create_thumbnail', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_min_thumb_filesize', '12000', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('img_imagick', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('pm_max_boxes', '4', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('pm_max_msgs', '50', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_html_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_bbsmiley_code_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_smilies_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_download_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_report_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('load_online_guests', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_img_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('auth_flash_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('enable_pm_icons', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('pm_edit_time', '', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_mass_pm', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('record_online_users', '2', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('record_online_date', '1117686190', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('newest_user_id', '334', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('newest_username', 'Grendal', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_users', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_posts', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_topics', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('num_files', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('upload_dir_size', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('search_last_gc', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('last_queue_run', '0', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('full_folder_action', '2', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('bump_type', 'm', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('enable_karma', '1', 1)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_img', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('board_hide_emails', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_bbsmiley_code', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_flash', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_html', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_img', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('allow_sig_smilies', '1', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('max_post_urls', '0', 0)&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_config (config_name, config_value, is_dynamic) VALUES ('database_last_gc', '0', 1)&quot;);
 
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'MAIN', 'main', 1, 1, 'front\r\nsubscribed\r\nbookmarks,cfg_allow_bookmarks\r\ndrafts', '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'PM', 'pm', 2, 1, 'view_messages\r\ncompose\r\nunread\r\ndrafts\r\noptions', 'cfg_allow_privmsg')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'PROFILE', 'profile', 3, 1, 'profile_info\r\nreg_details\r\nsignature\r\navatar', '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'PREFS', 'prefs', 4, 1, 'personal\r\nview\r\npost', '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'ZEBRA', 'zebra', 5, 1, 'friends\r\nfoes', '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'ATTACHMENTS', 'attachments', 6, 1, '', 'acl_u_attach &amp;&amp; cfg_allow_attachments')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'GROUPS', 'groups', 7, 1, '', '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'CALENDER', 'calender', 3, 1, 'month_view\r\nday_view\r\nadd_event', '')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('mcp', 'MAIN', 'main', 1, 1, 'front\r\nforum_view\r\ntopic_view\r\npost_details', 'acl_m_')&quot;);
-$_CLASS['core_db']-&gt;query('INSERT INTO '.$install_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('mcp', 'QUEUE', 'queue', 2, 1, 'unapproved_topics\r\nunapproved_posts\r\nreports', 'acl_m_approve')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'MAIN', 'main', 1, 1, 'front\r\nsubscribed\r\nbookmarks,cfg_allow_bookmarks\r\ndrafts', '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'PM', 'pm', 2, 1, 'view_messages\r\ncompose\r\nunread\r\ndrafts\r\noptions', 'cfg_allow_privmsg')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'PROFILE', 'profile', 3, 1, 'profile_info\r\nreg_details\r\nsignature\r\navatar', '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'PREFS', 'prefs', 4, 1, 'personal\r\nview\r\npost', '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'ZEBRA', 'zebra', 5, 1, 'friends\r\nfoes', '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'ATTACHMENTS', 'attachments', 6, 1, '', 'acl_u_attach &amp;&amp; cfg_allow_attachments')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'GROUPS', 'groups', 7, 1, '', '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('ucp', 'CALENDER', 'calender', 3, 1, 'month_view\r\nday_view\r\nadd_event', '')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('mcp', 'MAIN', 'main', 1, 1, 'front\r\nforum_view\r\ntopic_view\r\npost_details', 'acl_m_')&quot;);
+$_CLASS['core_db']-&gt;query('INSERT INTO '.$table_prefix.&quot;forums_modules (module_type, module_title, module_filename, module_order, module_enabled, module_subs, module_acl) VALUES ('mcp', 'QUEUE', 'queue', 2, 1, 'unapproved_topics\r\nunapproved_posts\r\nreports', 'acl_m_approve')&quot;);
 
 ?&gt;
\ No newline at end of file

Modified: cms/trunk/install/build_tables.php
===================================================================
--- cms/trunk/install/build_tables.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/install/build_tables.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -21,8 +21,6 @@
 $Id$
 */
 
-$install_prefix = 'test_';
-
 function field_unix_time($name, $null = false)
 {
 	global $_CLASS;
@@ -34,7 +32,7 @@
 	Admin Auth Table
 */
 
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'admins');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'admins');
 
 $_CLASS['core_db']-&gt;add_table_field_char('admin_section', 100);
 
@@ -52,7 +50,7 @@
 /*
 	Blocks Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'blocks');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'blocks');
 
 $_CLASS['core_db']-&gt;add_table_field_int('block_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('block_title', 100);
@@ -78,7 +76,7 @@
 /*
 	Config Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'config');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'config');
 
 $_CLASS['core_db']-&gt;add_table_field_char('config_section', 20);
 $_CLASS['core_db']-&gt;add_table_field_char('config_name', 20);
@@ -95,7 +93,7 @@
 	Groups Table
 */
 
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'groups');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'groups');
 
 // this section needs updating, with null fields
 $_CLASS['core_db']-&gt;add_table_field_int('group_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
@@ -127,7 +125,7 @@
 /*
 	Groups Members Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'groups_members');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'groups_members');
 
 $_CLASS['core_db']-&gt;add_table_field_int('group_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
@@ -142,7 +140,7 @@
 /*
 	Modules Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'modules');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'modules');
 
 $_CLASS['core_db']-&gt;add_table_field_int('module_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('module_name', 100);
@@ -162,7 +160,7 @@
 /*
 	Sessions Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'sessions');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'sessions');
 
 $_CLASS['core_db']-&gt;add_table_field_char('session_id', 40);
 $_CLASS['core_db']-&gt;add_table_field_int('session_user_id', array('max' =&gt; 16000000));
@@ -189,7 +187,7 @@
 /*
 	Sessions Auto login Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'sessions_auto_login');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'sessions_auto_login');
 
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_char('auto_login_browser', 255);
@@ -203,7 +201,7 @@
 /*
 	Smiles Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'smilies');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'smilies');
 
 $_CLASS['core_db']-&gt;add_table_field_int('smiley_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 
@@ -226,7 +224,7 @@
 `user_unread_privmsg` tinyint(4) unsigned NOT NULL default '0',
 */
 
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'users');
+$_CLASS['core_db']-&gt;table_create('start', $user_prefix.'users');
 
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('username', 80);
@@ -324,7 +322,7 @@
 /*
 	Attachments Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_attachments');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_attachments');
 
 $_CLASS['core_db']-&gt;add_table_field_int('attach_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('post_msg_id', array('max' =&gt; 16000000));
@@ -352,7 +350,7 @@
 /*
 	Forums Auth Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_auth');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_auth');
 
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000, 'null' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('group_id', array('max' =&gt; 16000000, 'null' =&gt; true));
@@ -369,7 +367,7 @@
 /*
 	Forums Auth Options Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_auth_options');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_auth_options');
 
 $_CLASS['core_db']-&gt;add_table_field_int('auth_option_id', array('max' =&gt; 2000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('auth_option', 20);
@@ -385,7 +383,7 @@
 /*
 	Forums Auth Presets Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_auth_presets');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_auth_presets');
 
 $_CLASS['core_db']-&gt;add_table_field_int('preset_id', array('max' =&gt; 16000));
 $_CLASS['core_db']-&gt;add_table_field_int('preset_user_id', array('max' =&gt; 16000000));
@@ -402,7 +400,7 @@
 /*
 	Forums Bookmarks Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_bookmarks');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_bookmarks');
 
 $_CLASS['core_db']-&gt;add_table_field_int('topic_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
@@ -416,7 +414,7 @@
 /*
 	Forums Config Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_config');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_config');
 
 $_CLASS['core_db']-&gt;add_table_field_char('config_name', 100);
 $_CLASS['core_db']-&gt;add_table_field_char('config_value', 255);
@@ -431,7 +429,7 @@
 	Forums Disallow Table
 */
 /*
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_disallow');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_disallow');
 
 $_CLASS['core_db']-&gt;add_table_field_int('disallow_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('disallow_username', 30);
@@ -444,7 +442,7 @@
 /*
 	Forums Drafts Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_drafts');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_drafts');
 
 $_CLASS['core_db']-&gt;add_table_field_int('draft_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
@@ -463,7 +461,7 @@
 /*
 	Forums Extensions Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_extensions');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_extensions');
 
 $_CLASS['core_db']-&gt;add_table_field_int('extension_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('group_id', array('max' =&gt; 16000000));
@@ -476,7 +474,7 @@
 /*
 	Forums Extension Groups Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_extension_groups');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_extension_groups');
 
 $_CLASS['core_db']-&gt;add_table_field_int('group_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('group_name', 20);
@@ -495,7 +493,7 @@
 /*
 	Forums Forums Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_forums');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_forums');
 
 $_CLASS['core_db']-&gt;add_table_field_int('forum_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('parent_id', array('max' =&gt; 16000));
@@ -546,7 +544,7 @@
 /*
 	Forums POsts Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_posts');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_posts');
 
 $_CLASS['core_db']-&gt;add_table_field_int('post_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('topic_id', array('max' =&gt; 16000000));
@@ -588,7 +586,7 @@
 /*
 	Forums Topics Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_topics');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_topics');
 
 $_CLASS['core_db']-&gt;add_table_field_int('topic_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('forum_id', array('max' =&gt; 16000000));
@@ -639,7 +637,7 @@
 /*
 	Forums Extensions Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_tracking');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_tracking');
 
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('forum_id', array('max' =&gt; 16000000));
@@ -655,7 +653,7 @@
 /*
 	Forums Icons Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_icons');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_icons');
 
 $_CLASS['core_db']-&gt;add_table_field_int('icons_id', array('max' =&gt; 2000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('icons_url', 50);
@@ -672,7 +670,7 @@
 	Forums Forums Watch Table
 */
 
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_watch');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_watch');
 
 $_CLASS['core_db']-&gt;add_table_field_int('forum_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('topic_id', array('max' =&gt; 16000000));
@@ -689,7 +687,7 @@
 /*
 	Forums Modules Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_modules');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_modules');
 
 $_CLASS['core_db']-&gt;add_table_field_int('module_id', array('max' =&gt; 2000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('module_type', 3);
@@ -709,7 +707,7 @@
 /*
 	Forums Moderator Cache Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_moderator_cache');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_moderator_cache');
 
 $_CLASS['core_db']-&gt;add_table_field_int('forum_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
@@ -728,7 +726,7 @@
 /*
 	Forums Poll Results Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_poll_results');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_poll_results');
 
 $_CLASS['core_db']-&gt;add_table_field_int('poll_option_id', array('max' =&gt; 2000));
 $_CLASS['core_db']-&gt;add_table_field_int('topic_id', array('max' =&gt; 16000000));
@@ -743,7 +741,7 @@
 /*
 	Forums Poll Voters Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_poll_voters');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_poll_voters');
 
 $_CLASS['core_db']-&gt;add_table_field_int('topic_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('poll_option_id', array('max' =&gt; 2000));
@@ -761,7 +759,7 @@
 /*
 	Forums Poll Voters Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_ranks');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_ranks');
 
 $_CLASS['core_db']-&gt;add_table_field_int('rank_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('rank_title', 50);
@@ -776,7 +774,7 @@
 /*
 	Forums Words Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_search_wordlist');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_search_wordlist');
 
 $_CLASS['core_db']-&gt;add_table_field_int('word_id', array('max' =&gt; 3000000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('word_text', 100);
@@ -790,7 +788,7 @@
 /*
 	Forums search_wordmatch Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_search_wordmatch');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_search_wordmatch');
 
 $_CLASS['core_db']-&gt;add_table_field_int('post_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('word_id', array('max' =&gt; 3000000000));
@@ -803,7 +801,7 @@
 /*
 	Forums Words Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_words');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_words');
 
 $_CLASS['core_db']-&gt;add_table_field_int('word_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_char('word', 100);
@@ -816,7 +814,7 @@
 /*
 	Forums Zebra Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_zebra');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_zebra');
 
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('zebra_id', array('max' =&gt; 16000000));
@@ -833,7 +831,7 @@
 /*
 	Forums Log Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_log');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_log');
 
 $_CLASS['core_db']-&gt;add_table_field_int('log_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('log_type', array('max' =&gt; 200));
@@ -857,7 +855,7 @@
 
 /*
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_privmsgs');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_privmsgs');
 
 $_CLASS['core_db']-&gt;add_table_field_int('msg_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('root_level', array('max' =&gt; 16000000));
@@ -896,7 +894,7 @@
 /*
 	Forums Log Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_privmsgs_folder');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_privmsgs_folder');
 
 $_CLASS['core_db']-&gt;add_table_field_int('folder_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
@@ -911,7 +909,7 @@
 /*
 	Forums Log Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_privmsgs_rules');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_privmsgs_rules');
 
 $_CLASS['core_db']-&gt;add_table_field_int('rule_id', array('max' =&gt; 16000000, 'auto_increment' =&gt; true));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));
@@ -930,7 +928,7 @@
 /*
 	Forums Log Table
 */
-$_CLASS['core_db']-&gt;table_create('start', $install_prefix.'forums_privmsgs_to');
+$_CLASS['core_db']-&gt;table_create('start', $table_prefix.'forums_privmsgs_to');
 
 $_CLASS['core_db']-&gt;add_table_field_int('msg_id', array('max' =&gt; 16000000));
 $_CLASS['core_db']-&gt;add_table_field_int('user_id', array('max' =&gt; 16000000));

Modified: cms/trunk/install/installer.php
===================================================================
--- cms/trunk/install/installer.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/install/installer.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -20,11 +20,12 @@
 
 $Id$
 */
+define('VIPERAL', 'INSTALLER');
 
 error_reporting(E_ALL);
 
 //echo str_replace('\\','/', dirname(getenv('SCRIPT_FILENAME'))).'/'; die;
-$site_file_root = 'C:/Program Files/Apache Group/Apache2/cms/';
+$site_file_root = '../';
 
 if (!extension_loaded('mbstring'))
 {
@@ -50,102 +51,426 @@
 
 load_class(false, 'core_template');
 
-$_REQUEST['stage'] = isset($_REQUEST['stage']) ? (int) $_REQUEST['stage'] : 0;
+$holding_array = array(
+	'mysql'		=&gt; array(
+		'lang'			=&gt; 'MySQL',
+		'extension'		=&gt; 'mysql', 
+	),
+	'mysql3'			=&gt; array(
+		'lang'			=&gt; 'MySQL3',
+		'extension'		=&gt; 'mysql',
+	),
+	'mysqli'	=&gt; array(
+		'lang'			=&gt; 'MySQL 4.1.x',
+		'extension'		=&gt; 'mysqli', 
+	),
+	'mssql'		=&gt; array(
+		'lang'			=&gt; 'MS SQL Server 7/2000',
+		'extension'		=&gt; 'mssql', 
+	),
+	'postgres' =&gt; array(
+		'lang'			=&gt; 'PostgreSQL',
+		'extension'		=&gt; 'pgsql', 
+	),
+	'sqlite'		=&gt; array(
+		'lang'			=&gt; 'SQLite',
+		'extension'		=&gt; 'sqlite', 
+	),
+	'sqlite_pdo'		=&gt; array(
+		'lang'			=&gt; 'SQLite 3 (PDO)',
+		'extension'		=&gt; 'pdo_sqlite', 
+	)
+);
 
-if ($_REQUEST['stage'] &amp;&amp; !$_POST['agreement_signed'])
+$database_array = array();
+$database_options = '';
+$db_layer = isset($_POST['layer']) ? $_POST['layer'] : false;
+
+foreach ($holding_array as $name =&gt; $setting)
+{
+	if (extension_loaded($setting['extension']))
+	{
+		$database_options .= '&lt;option value=&quot;' . $name . '&quot;'.(($db_layer == $name) ? ' selected=&quot;selected&quot;' : '').'&gt;' . $setting['lang'] . '&lt;/option&gt;';
+		$database_array[$name] = $setting;
+	}
+}
+
+$error = array();
+$stage = isset($_POST['stage']) ? (int) $_POST['stage'] : 0;
+
+if ($stage &amp;&amp; !$_POST['agreement_signed'])
 {
-	$_REQUEST['stage'] = 0;
+	$stage = 0;
 }
 
-Switch ($_REQUEST['stage'])
+if ($stage === 3)
 {
-	case 1:
-		$holding_array = array(
-			'mysql'		=&gt; array(
-				'lang'			=&gt; 'MySQL',
-				'extension'		=&gt; 'mysql', 
-			),
-			'mysql3'			=&gt; array(
-				'lang'			=&gt; 'MySQL3',
-				'extension'		=&gt; 'mysql',
-			),
-			'mysqli'	=&gt; array(
-				'lang'			=&gt; 'MySQL 4.1.x',
-				'extension'		=&gt; 'mysqli', 
-			),
-			'mssql'		=&gt; array(
-				'lang'			=&gt; 'MS SQL Server 7/2000',
-				'extension'		=&gt; 'mssql', 
-			),
-			'postgres' =&gt; array(
-				'lang'			=&gt; 'PostgreSQL',
-				'extension'		=&gt; 'pgsql', 
-			),
-			'sqlite'		=&gt; array(
-				'lang'			=&gt; 'SQLite',
-				'extension'		=&gt; 'sqlite', 
-			),
-			'sqlite_pdo'		=&gt; array(
-				'lang'			=&gt; 'SQLite 3 (PDO)',
-				'extension'		=&gt; 'pdo_sqlite', 
-			)
+	if (file_exists($site_file_root.'config.php'))
+	{
+		require_once($site_file_root.'config.php');
+	}
+
+	$site_name		= get_variable('site_name', 'POST');
+	$site_domain	= get_variable('site_domain', 'POST');
+	$site_path		= get_variable('site_path', 'POST');
+	$site_port		= get_variable('site_port', 'POST');
+
+	$cookie_domain	= get_variable('cookie_domain', 'POST');
+	$cookie_path	= get_variable('cookie_path', 'POST');
+	$cookie_name	= get_variable('cookie_name', 'POST');
+
+	$username		= get_variable('username', 'POST');
+	$password		= get_variable('password', 'POST');
+	$password_confirm= get_variable('password_confirm', 'POST');
+	$email			= get_variable('email', 'POST');
+	$email_confirm	= get_variable('email_confirm', 'POST');
+
+	if (!$username)
+	{
+		$error[] = 'Invalid Username';
+	}
+
+	if (!$password || ($password !== $password_confirm))
+	{
+		$error[] = 'Passwords do not match.';
+	}
+
+	if (!$email || ($email !== $email_confirm))
+	{
+		$error[] = 'Emails Address do not match.';
+	}
+
+	if (!$site_domain)
+	{
+		$error[] = 'Site Domain is empty.';
+	}
+
+	if (!$site_domain)
+	{
+		$error[] = 'Site Domain is empty.';
+	}
+
+	if (isset($site_db))
+	{
+		load_class($site_file_root.'includes/db/'.$site_db['type'].'.php', 'core_db', 'db_'.$site_db['type']);
+
+		$_CLASS['core_db']-&gt;connect($site_db);
+		$config_content = '';
+	}
+	else
+	{
+		$error[] = '&lt;b&gt;Please upload the content listed in the &quot;Config.php Content&quot; Section&lt;/b&gt;';
+		$config_content = get_variable('config_content', 'POST');
+	}
+
+	if (empty($error))
+	{
+		require_once($site_file_root.'includes/tables.php');
+		require_once($site_file_root.'includes/cache/cache.php');
+		require_once($site_file_root.'includes/cache/cache_' . $acm_type . '.php');
+
+		load_class(false, 'core_cache', 'cache_'.$acm_type);
+
+		set_core_config('global', 'site_name', $site_name, false);
+		set_core_config('server', 'site_domain', $site_domain, false);
+		set_core_config('server', 'site_path', $site_path, false);
+		set_core_config('server', 'site_port', $site_port, false);
+		set_core_config('server', 'cookie_domain', $cookie_domain, false);
+		set_core_config('server', 'cookie_path', $cookie_path, false);
+		set_core_config('server', 'cookie_name', $cookie_name, false);
+		set_core_config('server', 'site_secure', 0, false);
+
+		set_core_config('user', 'newest_username', $username, true);
+		
+		$user_update = array(
+			'username'				=&gt; $username,
+			'user_password'			=&gt; encode_password($password, 'md5'),
+			'user_password_encoding'=&gt; 'md5',
+			'user_email'			=&gt; $email
 		);
+
+		$_CLASS['core_db']-&gt;query('UPDATE ' . USERS_TABLE . ' SET ' . $_CLASS['core_db']-&gt;sql_build_array('UPDATE', $user_update). ' WHERE user_id = 2');
+
+		$_CLASS['core_template']-&gt;assign_array(array(
+			'admin_link'		=&gt; generate_link(false, array('full' =&gt; true, 'sid' =&gt; false, 'admin' =&gt; true)),
+			'username'			=&gt; $username,
+		));
+
+		$_CLASS['core_template']-&gt;display('installer/complete.html');
 		
-		$database_array = array();
-		$database_options = '';
+		script_close();
+	}
 
-		foreach ($holding_array as $name =&gt; $setting)
-		{
-			if (extension_loaded($setting['extension']))
-			{
-				$database_options .= '&lt;option value=&quot;' . $name . '&quot;&gt;' . $setting['lang'] . '&lt;/option&gt;';
-				$database_array[$name] = $setting;
-			}
+	$_CLASS['core_template']-&gt;assign_array(array(
+		'site_name'			=&gt; $site_name,
+		'site_domain'		=&gt; $site_domain,
+		'site_path'			=&gt; $site_path,
+		'site_port'			=&gt; $site_port,
+		'cookie_domain'		=&gt; $cookie_domain,
+		'cookie_path'		=&gt; $cookie_path,
+		'cookie_name'		=&gt; $cookie_name,
+		'username'			=&gt; $username,
+		'password'			=&gt; $password,
+		'password_confirm'	=&gt; $password_confirm,
+		'email'				=&gt; $email,
+		'email_confirm'		=&gt; $email_confirm,
+		'error'				=&gt; empty($error) ? false : implode('&lt;br/&gt;', $error),
+		'config_content'	=&gt; $config_content
+	));
+
+	$_CLASS['core_template']-&gt;display('installer/stage2.html');
+
+	script_close();
+}
+
+if ($stage === 2)
+{
+	if ($db_layer &amp;&amp; in_array($db_layer, array_keys($database_array)))
+	{
+		load_class($site_file_root.'includes/db/'.$db_layer.'.php', 'core_db', 'db_'.$db_layer);
+
+		$site_db = array();
+		$site_db['type']		= $db_layer;
+		$site_db['persistent']	= false;
+
+		$_CLASS['core_db']-&gt;report_error(false);
+
+		if (strpos($db_layer, 'sqlite') === false)
+		{
+			$site_db['server']		= get_variable('server', 'POST');
+			$site_db['port']		= get_variable('port', 'POST');
+			$site_db['database']	= get_variable('database', 'POST');
+			$site_db['username']	= get_variable('username', 'POST');
+			$site_db['password']	= get_variable('password', 'POST');
+			
+			if (!$site_db['username'] || !$site_db['database'])
+			{
+				$error[] = 'Required Information missing';
+			}
 		}
+		else
+		{
+			$site_db['file'] = get_variable('file_'.$db_layer, 'POST');
 
-		$php_config = array(
-			/*array(
-				'lang'	=&gt; 'PHP version',
-				'recommended'	=&gt; '4.2.3 +',
-				'current'		=&gt; PHP_VERSION
-			),*/
-			array(
-				'lang'	=&gt; 'Safe Mode',
-				'ini'	=&gt; 'safe_mode',
-				'recommended'	=&gt; false,
-				'current'		=&gt; (bool) ini_get('safe_mode')
-			),
-			array(
-				'lang'	=&gt; 'Magic Quotes GPC',
-				'ini'	=&gt; 'magic_quotes_gpc',
-				'recommended'	=&gt; false,
-				'current'		=&gt; (bool) ini_get('magic_quotes_gpc')
-			),
-			array(
-				'lang'	=&gt; 'Register Globals',
-				'ini'	=&gt; 'register_globals',
-				'recommended'	=&gt; false,
-				'current'		=&gt; (bool) ini_get('register_globals')
-			),
-			array(
-				'lang'	=&gt; 'Output Buffering',
-				'ini'	=&gt; 'output_buffering',
-				'recommended'	=&gt; false,
-				'current'		=&gt; (bool) ini_get('output_buffering')
-			),
-		);
+			if (!$site_db['file'])
+			{
+				$error[] = 'Required Information missing';
+			}
+		}
+	}
+	else
+	{
+		$error[] = 'Database not supported on your system';
+	}
 
+	if (empty($error) &amp;&amp; !$_CLASS['core_db']-&gt;connect($site_db))
+	{
+		if (!$_CLASS['core_db']-&gt;link_identifier)
+		{
+			$db_error = $_CLASS['core_db']-&gt;sql_error(false, true);
+			$error[] = 'Could not connect to the database'.(($db_error['message']) ? '&lt;br/&gt;'.$db_error['message'] : '');
+		}
+		else
+		{
+			if (isset($_POST['test']))
+			{
+				$error[] = 'Database Selection fail, will attempt to create in next step';
+			}
+			else
+			{
+				switch ($db_layer)
+				{
+					case 'mysql':
+					case 'mysqli':
+						$_CLASS['core_db']-&gt;query('CREATE DATABASE '.$site_db['database'].' DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci');
+					break;
+
+					case 'mysql3':
+						$_CLASS['core_db']-&gt;query('CREATE DATABASE  '.$site_db['database']);
+					break;
+
+					case 'postgres':
+						if (strtoupper(substr(PHP_OS, 0, 3)) !== 'WIN')
+						{
+							$_CLASS['core_db']-&gt;query('CREATE DATABASE '.$site_db['database'] .' WITH ENCODING UNICODE');
+						}
+						else
+						{
+							$_CLASS['core_db']-&gt;query('CREATE DATABASE '.$site_db['database']);
+						}
+					break;
+				}
+
+				$_CLASS['core_db']-&gt;disconnect();
+				$_CLASS['core_db']-&gt;connect($site_db);
+
+				if (!$_CLASS['core_db']-&gt;connect($site_db))
+				{
+					$error[] = 'Database Creation Failed';
+				}
+			}
+		}
+	}
+	
+	if (empty($error))
+	{
+		$user_prefix	= get_variable('user_prefix', 'POST');
+		$table_prefix	= get_variable('table_prefix', 'POST');
+		
+		require_once($site_file_root.'includes/tables.php');
+	
+		$sql = 'SELECT * FROM ' . CORE_CONFIG_TABLE;
+		$result = $_CLASS['core_db']-&gt;query($sql);
+		$_CLASS['core_db']-&gt;free_result($result);
+	
+		if ($result)
+		{
+			$error[] = 'Creation Failed: Current installation found';
+		}
+	}
+
+	if (isset($_POST['test']) || !empty($error))
+	{
+		$stage = 1;
+	}
+	else
+	{
+		$_CLASS['core_db']-&gt;transaction();
+		require($site_file_root.'install/build_tables.php');
+		$_CLASS['core_db']-&gt;transaction('commit');
+	
+		$_CLASS['core_db']-&gt;transaction();
+		require($site_file_root.'install/build_data.php');
+		$_CLASS['core_db']-&gt;transaction('commit');
+		
+		$_CLASS['core_db']-&gt;optimize_tables();
+		
+		$_CLASS['core_db']-&gt;report_error(true);
+	
+		$config_data = &quot;&lt;?php\n\n&quot;;
+
+		foreach ($site_db as $name =&gt; $value)
+		{
+			if (is_bool($value))
+			{
+				$value = ($value) ? 'true' : 'false';
+			}
+			elseif (!is_int($value))
+			{
+				$value = &quot;'$value'&quot;;
+			}
+
+			$config_data .= &quot;\$site_db['$name'] = $value;\n&quot;;
+		}
+
+		$config_data .= &quot;\n&quot;;
+		$config_data .= &quot;\$table_prefix\t= '$table_prefix';\n&quot;;
+		$config_data .= &quot;\$user_prefix\t= '$user_prefix';\n\n&quot;;
+		$config_data .= &quot;\$acm_type\t\t= 'file';\n\n&quot;;
+		$config_data .= &quot;if (!defined('INDEX_PAGE'))\n{\n\tdefine('INDEX_PAGE', 'index.php');\n}\n\n&quot;;
+		$config_data .= &quot;if (!defined('ADMIN_PAGE'))\n{\n\tdefine('ADMIN_PAGE', 'admin.php');\n}\n\n&quot;;
+		$config_data .= '?&gt;';
+
+		if (file_put_contents($site_file_root.'config.php', $config_data))
+		{
+			$config_data = false;
+		}
+		else
+		{
+			$error[] = 'Failed to write to your config.php file&lt;br/&gt;Please upload the content listed in the &quot;Config.php Content&quot; Section';
+		}
+		
+		$path = dirname(getenv('SCRIPT_NAME'));
+
+		if (substr($path, -1) != '/')
+		{
+			$path .= '/';
+		}
+
+		$path = str_replace('install/', '', $path);
+		$domain = !empty($_SERVER['SERVER_NAME']) ? $_SERVER['SERVER_NAME'] : $_SERVER['HTTP_HOST'];
+
 		$_CLASS['core_template']-&gt;assign_array(array(
-			'database_options'	=&gt; $database_options,
-			'php_config'		=&gt; $php_config,
+			'site_name'			=&gt; 'New CMS Site',
+			'site_domain'		=&gt; $domain,
+			'site_path'			=&gt; $path,
+			'site_port'			=&gt; ($_SERVER['SERVER_PORT'] == 80) ? '' : $_SERVER['SERVER_PORT'],
+			'cookie_domain'		=&gt; $domain,
+			'cookie_path'		=&gt; $path,
+			'cookie_name'		=&gt; 'cms',
+			'username'			=&gt; '',
+			'password'			=&gt; '',
+			'password_confirm'	=&gt; '',
+			'email'				=&gt; '',
+			'email_confirm'		=&gt; '',
+			'error'				=&gt; empty($error) ? false : implode('&lt;br/&gt;', $error),
+			'config_content'	=&gt; $config_data
 		));
-		
-		$_CLASS['core_template']-&gt;display('installer/stage1.html');
-	break;
 
-	default:
-	case 0:
-		$_CLASS['core_template']-&gt;display('installer/agreement.html');
-	break;
+		$_CLASS['core_template']-&gt;display('installer/stage2.html');
+
+		script_close();
+	}
 }
+
+if ($stage === 1)
+{
+	$php_config = array(
+		/*array(
+			'lang'	=&gt; 'PHP version',
+			'recommended'	=&gt; '4.2.3 +',
+			'current'		=&gt; PHP_VERSION
+		),*/
+		array(
+			'lang'	=&gt; 'Safe Mode',
+			'ini'	=&gt; 'safe_mode',
+			'recommended'	=&gt; false,
+			'current'		=&gt; (bool) ini_get('safe_mode')
+		),
+		array(
+			'lang'	=&gt; 'Magic Quotes GPC',
+			'ini'	=&gt; 'magic_quotes_gpc',
+			'recommended'	=&gt; false,
+			'current'		=&gt; (bool) ini_get('magic_quotes_gpc')
+		),
+		array(
+			'lang'	=&gt; 'Register Globals',
+			'ini'	=&gt; 'register_globals',
+			'recommended'	=&gt; false,
+			'current'		=&gt; (bool) ini_get('register_globals')
+		),
+		array(
+			'lang'	=&gt; 'Output Buffering',
+			'ini'	=&gt; 'output_buffering',
+			'recommended'	=&gt; false,
+			'current'		=&gt; (bool) ini_get('output_buffering')
+		),
+	);
+
+	$_CLASS['core_template']-&gt;assign_array(array(
+		'database_options'	=&gt; $database_options,
+		'php_config'		=&gt; $php_config,
+		'error'				=&gt; empty($error) ? false : implode('&lt;br/&gt;', $error),
+
+		'server'		=&gt; isset($site_db['server']) ? $site_db['server'] : '',
+		'port'			=&gt; isset($site_db['port']) ? $site_db['port'] : '',
+		'database'		=&gt; isset($site_db['database']) ? $site_db['database'] : '',
+		'username'		=&gt; isset($site_db['username']) ? $site_db['username'] : '',
+		'password'		=&gt; isset($site_db['password']) ? $site_db['password'] : '',
+		'file'			=&gt; isset($site_db['file']) ? $site_db['file'] : '',
+		'table_prefix'	=&gt; get_variable('table_prefix', 'POST', 'cms_'),
+		'user_prefix'	=&gt; get_variable('user_prefix', 'POST', 'cms_'),
+	));
+
+	$_CLASS['core_template']-&gt;display('installer/stage1.html');
+
+	script_close();
+}
+
+if (!$stage)
+{
+	$_CLASS['core_template']-&gt;display('installer/agreement.html');
+	script_close();
+}
+
 ?&gt;
\ No newline at end of file

Modified: cms/trunk/modules/Quick_Message/index.php
===================================================================
--- cms/trunk/modules/Quick_Message/index.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/modules/Quick_Message/index.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -26,11 +26,11 @@
     die;
 }
 
-global $prefix;
-
+global $table_prefix;
+
 if (!defined('QUICK_MESSAGE_TABLE'))
 {
-	define('QUICK_MESSAGE_TABLE', $prefix.'quick_message');
+	define('QUICK_MESSAGE_TABLE', $table_prefix.'quick_message');
 }
 
 $_CLASS['core_user']-&gt;user_setup();

Modified: cms/trunk/modules/Quick_Message/install.php
===================================================================
--- cms/trunk/modules/Quick_Message/install.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/modules/Quick_Message/install.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -26,11 +26,11 @@
     die;
 }
 
-global $prefix;
-
+global $table_prefix;
+
 if (!defined('QUICK_MESSAGE_TABLE'))
 {
-	define('QUICK_MESSAGE_TABLE', $prefix.'quick_message');
+	define('QUICK_MESSAGE_TABLE', $table_prefix.'quick_message');
 }
 
 class Quick_Message_install

Modified: cms/trunk/modules/articles/admin/index.php
===================================================================
--- cms/trunk/modules/articles/admin/index.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/modules/articles/admin/index.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -27,7 +27,7 @@
 
 if (!defined('ARTICLES_TABLE'))
 {
-	define('ARTICLES_TABLE', $prefix.'articles');
+	define('ARTICLES_TABLE', $table_prefix.'articles');
 }
 
 if (isset($_REQUEST['mode']))

Modified: cms/trunk/modules/articles/index.php
===================================================================
--- cms/trunk/modules/articles/index.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/modules/articles/index.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -28,7 +28,7 @@
 
 if (!defined('ARTICLES_TABLE'))
 {
-	define('ARTICLES_TABLE', $prefix.'articles');
+	define('ARTICLES_TABLE', $table_prefix.'articles');
 }
 
 $_CLASS['core_user']-&gt;user_setup();
@@ -58,7 +58,7 @@
 				trigger_error('ARTICLE_NOT_FOUND');
 			}
 
-			$_CLASS['core_template']-&gt;assign(array(
+			$_CLASS['core_template']-&gt;assign_array(array(
 				'ARTICLES_POSTER' 		=&gt; ($row['poster_name']) ? $row['poster_name'] : $_CLASS['core_user']-&gt;get_lang('ANONYMOUS'),
 				'ARTICLES_POSTER_LINK'	=&gt; ($row['poster_name'] &amp;&amp; $row['poster_id']) ? generate_link('Members_List&amp;mode=viewprofile&amp;u=' . $row['poster_id']) : '',
 				'ARTICLES_TEXT'			=&gt; $row['articles_text'],

Modified: cms/trunk/modules/articles/install.php
===================================================================
--- cms/trunk/modules/articles/install.php	2005-09-09 16:05:50 UTC (rev 106)
+++ cms/trunk/modules/articles/install.php	2005-09-10 14:40:33 UTC (rev 107)
@@ -30,7 +30,7 @@
 
 if (!defined('ARTICLES_TABLE'))
 {
-	define('ARTICLES_TABLE', $prefix.'articles');
+	define('ARTICLES_TABLE', $table_prefix.'articles');
 }
 
 class articles_install
@@ -64,9 +64,9 @@
 		$_CLASS['core_db']-&gt;add_table_field_char('approver_name', 80, true);
 
 		$_CLASS['core_db']-&gt;add_table_index('articles_id', 'primary');
-		$_CLASS['core_db']-&gt;add_table_index('articles_start');
+		$_CLASS['core_db']-&gt;add_table_index('articles_starts');
+		$_CLASS['core_db']-&gt;add_table_index('articles_expires');
 		//$_CLASS['core_db']-&gt;add_table_index('articles_type');
-		//$_CLASS['core_db']-&gt;add_table_index('articles_expires');
 		$_CLASS['core_db']-&gt;add_table_index('articles_order');
 		$_CLASS['core_db']-&gt;add_table_index('articles_status');
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000027.html">[Viperals-svncheckins] r106 - in cms/trunk: includes/templates includes/templates/installer install
</A></li>
	<LI>Next message: <A HREF="000029.html">[Viperals-svncheckins] r108 - in cms/branches/1.0alpha1: . images images/avatars images/avatars/gallery images/avatars/gallery/gallery1 images/avatars/gallery/gallery2 includes includes/db includes/display includes/forums install javascript modules/Forums modules/Forums/admin themes/viperal/style themes/viperal/template/modules themes/viperal/template/modules/Forums themes/viperal/template/modules/Forums/images themes/viperal/template/modules/Forums/images/en themes/viperal/template/modules/Forums/images/karma
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28">[ date ]</a>
              <a href="thread.html#28">[ thread ]</a>
              <a href="subject.html#28">[ subject ]</a>
              <a href="author.html#28">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/viperals-svncheckins">More information about the Viperals-svncheckins
mailing list</a><br>
</body></html>
